<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>DAPR2 - Effects Coding</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);
e.style.display = ((e.style.display!='none') ? 'none' : 'block');
if(f.classList.contains('fa-chevron-circle-right')) {
    f.classList.add('fa-chevron-circle-down')
    f.classList.remove('fa-chevron-circle-right')
} else {
    f.classList.add('fa-chevron-circle-right')
    f.classList.remove('fa-chevron-circle-down')
}
}
</script><script src="https://kit.fontawesome.com/120b08a6f5.js" crossorigin="anonymous"></script><script src="site_libs/kePrint-0.0.1/kePrint.js"></script><link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DAPR2</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-intro-to-linear-models" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Intro to Linear Models</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-intro-to-linear-models">
<li>
    <a class="dropdown-item" href="./1_01_function.html">
 <span class="dropdown-text">1/1: Functions and Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_02_slr.html">
 <span class="dropdown-text">1/2: Intro to Linear Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_03_mlr.html">
 <span class="dropdown-text">1/3: Multiple Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_04_model_fit.html">
 <span class="dropdown-text">1/4: Model Fit and Standardization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_05_cat_recap.html">
 <span class="dropdown-text">1/5: Cat Predictors &amp; Recap</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more-linear-models" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More Linear Models</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-more-linear-models">
<li>
    <a class="dropdown-item" href="./1_07_int1_nc.html">
 <span class="dropdown-text">1/7: Interactions I: Num x Cat</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_08_int2_nn.html">
 <span class="dropdown-text">1/8: Interactions II: Num x Num</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_09_int3_cc.html">
 <span class="dropdown-text">1/9: Interactions III: Cat x Cat</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_10_assump_diag.html">
 <span class="dropdown-text">1/10: Assumptions &amp; Diagnostics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_11_writeup_recap.html">
 <span class="dropdown-text">1/11: Write Up &amp; Recap</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-analysing-experimental-studies" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Analysing Experimental Studies</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-analysing-experimental-studies">
<li>
    <a class="dropdown-item" href="./2_01_model_comps.html">
 <span class="dropdown-text">2/1: Model Comparison</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_02_effects.html">
 <span class="dropdown-text">2/2: Effects Coding</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_03_contrasts.html">
 <span class="dropdown-text">2/3: Contrasts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_04_emmeans.html">
 <span class="dropdown-text">2/4: Simple Effects &amp; Pairwise Comparisons</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_05_writeup_recap.html">
 <span class="dropdown-text">2/5: Write Up &amp; Recap</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-advanced-topics-for-lm" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Advanced Topics for LM</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-advanced-topics-for-lm">
<li>
    <a class="dropdown-item" href="./2_06_glm1.html">
 <span class="dropdown-text">2/6: Binary Logistic Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_07_glm2.html">
 <span class="dropdown-text">2/7: More Logistic Regression</span></a>
  </li>  
        <li class="dropdown-header">2/8: Sample Size &amp; Power Analysis</li>
        <li class="dropdown-header">2/9: Write Up &amp; Recap</li>
        <li class="dropdown-header">2/10: Mock Exam</li>
    </ul>
</li>
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#study-overview" id="toc-study-overview" class="nav-link active" data-scroll-target="#study-overview">Study Overview</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li>
<a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a>
  <ul class="collapse">
<li><a href="#dummy-coding" id="toc-dummy-coding" class="nav-link" data-scroll-target="#dummy-coding">Dummy Coding</a></li>
  <li><a href="#sum-to-zero-coding" id="toc-sum-to-zero-coding" class="nav-link" data-scroll-target="#sum-to-zero-coding">Sum to Zero Coding</a></li>
  <li><a href="#comparing-approaches" id="toc-comparing-approaches" class="nav-link" data-scroll-target="#comparing-approaches">Comparing Approaches</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Effects Coding</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><div class="lo">
<section id="learning-objectives" class="level3"><h3 class="anchored" data-anchor-id="learning-objectives">
<i class="fa fa-graduation-cap"></i> Learning Objectives</h3>
<p>At the end of this lab, you will:</p>
<ol type="1">
<li>Understand how to specify dummy and sum-to-zero coding</li>
<li>Interpret the output from a model using dummy coding</li>
<li>Interpret the output from a model using sum-to-zero coding</li>
</ol></section><section id="what-you-need" class="level3"><h3 class="anchored" data-anchor-id="what-you-need">
<i class="fa fa-check-square-o fa-2"></i> What You Need</h3>
<ol type="1">
<li>Be up to date with lectures</li>
<li>Have completed previous lab exercises from <a href="https://uoepsy.github.io/dapr2/2223/labs/2_01_model_comps.html">Week 1</a>
</li>
</ol></section><section id="required-r-packages" class="level3"><h3 class="anchored" data-anchor-id="required-r-packages">
<i class="fab fa-r-project"></i> Required R Packages</h3>
<p>Remember to load all packages within a code chunk at the start of your RMarkdown file using <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>. If you do not have a package and need to install, do so within the console using <code>install.packages(" ")</code>. For further guidance on installing/updating packages, see Section C <a href="https://uoepsy.github.io/files/install-update-r#update-pkgs">here</a>.</p>
<p>For this lab, you will need to load the following package(s):</p>
<ul>
<li><strong>tidyverse</strong></li>
<li><strong>psych</strong></li>
<li><strong>kableExtra</strong></li>
</ul></section><section id="lab-data" class="level3"><h3 class="anchored" data-anchor-id="lab-data">
<i class="fa fa-file"></i> Lab Data</h3>
<p>You can download the data required for this lab <a href="https://uoepsy.github.io/data/RestaurantSpending.csv">here</a> or read it in via this link https://uoepsy.github.io/data/RestaurantSpending.csv</p>
</section>
</div>
<section id="study-overview" class="level1"><h1>Study Overview</h1>
<blockquote class="blockquote">
<p><strong>Research Question</strong></p>
<p>Does the type of background music playing in a restaurant influence the amount of money that diners spend on their meal?</p>
</blockquote>
<p>A group of researchers wanted to test the claims reported in <span class="citation" data-cites="North2003">(<a href="#ref-North2003" role="doc-biblioref">North, Shilcock, and Hargreaves 2003</a>)</span> on whether the type of background music playing in a restaurant influences the average amount of money spent by diners on their meal.</p>
<p>The group researchers got in touch with a restaurant and asked to alternate silence, popular music, and classical music on successive nights over 18 days. On those nights they recorded the mean spend per head for each table.</p>
<div class="optional-begin">
<span id="opt-start-1" class="fa fa-chevron-circle-right optional-icon clickable" onclick="toggle_visibility('opt-body-1', 'opt-start-1')"> <span class="olab">Restaurant Spending Codebook</span></span>
</div>
<div id="opt-body-1" class="optional-body" style="display: none;">
<p><strong>Description</strong></p>
<p>The following variables were collected:</p>
<ul>
<li>
<code>id</code>: Identifier for each diner</li>
<li>
<code>type</code>: type of music played (“Classical Music”, “Pop Music”, “No Music”)</li>
<li>
<code>amount</code>: restaurant spending per person (in pounds - £)</li>
</ul>
<p><strong>Preview</strong></p>
<p>The first ten rows of the data are:</p>
<div class="cell">
<div class="cell-output-display">

<div id="lgdzhkhtjw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#lgdzhkhtjw) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

:where(#lgdzhkhtjw) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#lgdzhkhtjw) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#lgdzhkhtjw) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#lgdzhkhtjw) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#lgdzhkhtjw) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#lgdzhkhtjw) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#lgdzhkhtjw) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#lgdzhkhtjw) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

:where(#lgdzhkhtjw) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#lgdzhkhtjw) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#lgdzhkhtjw) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#lgdzhkhtjw) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#lgdzhkhtjw) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#lgdzhkhtjw) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#lgdzhkhtjw) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#lgdzhkhtjw) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#lgdzhkhtjw) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#lgdzhkhtjw) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#lgdzhkhtjw) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#lgdzhkhtjw) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#lgdzhkhtjw) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#lgdzhkhtjw) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#lgdzhkhtjw) .gt_left {
  text-align: left;
}

:where(#lgdzhkhtjw) .gt_center {
  text-align: center;
}

:where(#lgdzhkhtjw) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#lgdzhkhtjw) .gt_font_normal {
  font-weight: normal;
}

:where(#lgdzhkhtjw) .gt_font_bold {
  font-weight: bold;
}

:where(#lgdzhkhtjw) .gt_font_italic {
  font-style: italic;
}

:where(#lgdzhkhtjw) .gt_super {
  font-size: 65%;
}

:where(#lgdzhkhtjw) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#lgdzhkhtjw) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#lgdzhkhtjw) .gt_indent_1 {
  text-indent: 5px;
}

:where(#lgdzhkhtjw) .gt_indent_2 {
  text-indent: 10px;
}

:where(#lgdzhkhtjw) .gt_indent_3 {
  text-indent: 15px;
}

:where(#lgdzhkhtjw) .gt_indent_4 {
  text-indent: 20px;
}

:where(#lgdzhkhtjw) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
<thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="id">id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="type">type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="amount">amount</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="id" class="gt_row gt_right">1</td>
<td headers="type" class="gt_row gt_left">No Music</td>
<td headers="amount" class="gt_row gt_right">23.14891</td>
</tr>
<tr>
<td headers="id" class="gt_row gt_right">2</td>
<td headers="type" class="gt_row gt_left">Pop Music</td>
<td headers="amount" class="gt_row gt_right">20.59492</td>
</tr>
<tr>
<td headers="id" class="gt_row gt_right">3</td>
<td headers="type" class="gt_row gt_left">Pop Music</td>
<td headers="amount" class="gt_row gt_right">19.18172</td>
</tr>
<tr>
<td headers="id" class="gt_row gt_right">4</td>
<td headers="type" class="gt_row gt_left">Pop Music</td>
<td headers="amount" class="gt_row gt_right">16.70237</td>
</tr>
<tr>
<td headers="id" class="gt_row gt_right">5</td>
<td headers="type" class="gt_row gt_left">Classical Music</td>
<td headers="amount" class="gt_row gt_right">25.91041</td>
</tr>
<tr>
<td headers="id" class="gt_row gt_right">6</td>
<td headers="type" class="gt_row gt_left">Pop Music</td>
<td headers="amount" class="gt_row gt_right">19.27888</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p class="optional-end">
</p>
</section><section id="setup" class="level1"><h1>Setup</h1>
<div class="question-begin">
Setup
</div>
<div class="question-body">
<ol type="1">
<li>Create a new RMarkdown file</li>
<li>Load the required package(s)</li>
<li>Read the Restaurant Spending dataset into R, assigning it to an object named <code>rest_spend</code>
</li>
</ol>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-2" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-2', 'sol-start-2')"> Solution </span>
</div>
<div id="sol-body-2" class="solution-body" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#Loading the required package(s)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://personality-project.org/r/psych/">psych</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Reading in data and storing in object named 'rest_spend'</span></span>
<span><span class="va">rest_spend</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">'https://uoepsy.github.io/data/RestaurantSpending.csv'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<p class="solution-end">
</p>
</section><section id="exercises" class="level1"><h1>Exercises</h1>
<div class="question-begin">
Question 1
</div>
<div class="question-body">
<p>Examine the dataset, and perform any necessary and appropriate data management steps.</p>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-3" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-3', 'sol-start-3')"> Solution </span>
</div>
<div id="sol-body-3" class="solution-body" style="display: none;">
<p>Let’s have a look at the data to see what we’re working with:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#first look at dataset structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [360 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ id    : num [1:360] 1 2 3 4 5 6 7 8 9 10 ...
 $ type  : chr [1:360] "No Music" "Pop Music" "Pop Music" "Pop Music" ...
 $ amount: num [1:360] 23.1 20.6 19.2 16.7 25.9 ...
 - attr(*, "spec")=
  .. cols(
  ..   id = col_double(),
  ..   type = col_character(),
  ..   amount = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#now lets look at top 6 rows (or the head) of the dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
     id type            amount
  &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;
1     1 No Music          23.1
2     2 Pop Music         20.6
3     3 Pop Music         19.2
4     4 Pop Music         16.7
5     5 Classical Music   25.9
6     6 Pop Music         19.3</code></pre>
</div>
</div>
<p>Music type is a categorical variable but it is encoded as a character (<code>&lt;chr&gt;</code>) variable rather than a factor (<code>&lt;fctr&gt;</code>). Let’s fix this, and rename ‘type’ to ‘music’ and the levels of the factor to avoid repetition whilst we’re at it:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="va">rest_spend</span> <span class="op">&lt;-</span> <span class="va">rest_spend</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>        type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">type</span>, </span>
<span>                           levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"No Music"</span>, <span class="st">"Pop Music"</span>, <span class="st">"Classical Music"</span><span class="op">)</span>,</span>
<span>                           labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"None"</span>, <span class="st">"Pop"</span>, <span class="st">"Classical"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>music <span class="op">=</span> <span class="va">type</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#re-examine the top 6 rows of the dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
     id music     amount
  &lt;dbl&gt; &lt;fct&gt;      &lt;dbl&gt;
1     1 None        23.1
2     2 Pop         20.6
3     3 Pop         19.2
4     4 Pop         16.7
5     5 Classical   25.9
6     6 Pop         19.3</code></pre>
</div>
</div>
</div>
<p class="solution-end">
</p>
<p><br></p>
<div class="question-begin">
Question 2
</div>
<div class="question-body">
<p>Provide a table of descriptive statistics and visualise your data (remember to interpret your plot in the context of the research question).</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p>For your table of descriptive statistics, both the <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> functions will come in handy here.</p></li>
<li><p>When visualising the data, consider using <code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code> to visually explore the association between restaurant spending and music type.</p></li>
<li><p>Make sure to comment on any observed differences among the sample means of the three background music types.</p></li>
</ol>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-4" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-4', 'sol-start-4')"> Solution </span>
</div>
<div id="sol-body-4" class="solution-body" style="display: none;">
<p>First, let’s look at our descriptive statistics and present in a well formatted table:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="va">music_desc</span> <span class="op">&lt;-</span> <span class="va">rest_spend</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">music</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                      Mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">amount</span><span class="op">)</span>,</span>
<span>                      SD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">amount</span><span class="op">)</span>,</span>
<span>                      Min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">amount</span><span class="op">)</span>,</span>
<span>                      Max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">amount</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Descriptive Statistics"</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">music_desc</span></span></code></pre></div>
<div class="cell-output-display">
<div id="tbl-music-descript" class="anchored">

<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>Table&nbsp;1:  Descriptive Statistics </caption>
 <thead><tr>
<th style="text-align:left;"> music </th>
   <th style="text-align:right;"> n </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> SD </th>
   <th style="text-align:right;"> Min </th>
   <th style="text-align:right;"> Max </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> None </td>
   <td style="text-align:right;"> 120 </td>
   <td style="text-align:right;"> 22.14 </td>
   <td style="text-align:right;"> 3.44 </td>
   <td style="text-align:right;"> 13.71 </td>
   <td style="text-align:right;"> 33.43 </td>
  </tr>
<tr>
<td style="text-align:left;"> Pop </td>
   <td style="text-align:right;"> 120 </td>
   <td style="text-align:right;"> 21.90 </td>
   <td style="text-align:right;"> 2.97 </td>
   <td style="text-align:right;"> 15.60 </td>
   <td style="text-align:right;"> 28.94 </td>
  </tr>
<tr>
<td style="text-align:left;"> Classical </td>
   <td style="text-align:right;"> 120 </td>
   <td style="text-align:right;"> 24.17 </td>
   <td style="text-align:right;"> 1.89 </td>
   <td style="text-align:right;"> 19.05 </td>
   <td style="text-align:right;"> 28.02 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now, let’s visualise the association between restaurant spending and music type using a boxplot:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">rest_spend</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">music</span>, y <span class="op">=</span> <span class="va">amount</span>, fill <span class="op">=</span> <span class="va">music</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'Background music type'</span>, y <span class="op">=</span> <span class="st">'Restaurant spending (in GBP)'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1</span> </span></code></pre></div>
<div class="cell-output-display">
<div id="fig-music-desc" class="quarto-figure quarto-figure-center anchored">
<figure class="figure"><p><img src="2_02_effects_files/figure-html/fig-music-desc-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Associations among Spending and Music Type</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>There are three types of music groups (<span class="math inline">\(g = 3\)</span>), where there is one group for each music type: “Classical,” “None,” “Pop”. Each group has 120 observations.</li>
<li>It seems that customers without background music or pop music had a similar average restaurant spending</li>
<li>The average restaurant spending seems to be higher for those who had a classical music background compared to the customers either without music or with a pop music background.</li>
</ul>
</div>
<p class="solution-end">
</p>
<section id="dummy-coding" class="level2"><h2 class="anchored" data-anchor-id="dummy-coding">Dummy Coding</h2>
<div class="question-begin">
Question 3
</div>
<div class="question-body">
<p>Using dummy coding, choose an appropriate reference level to address the research question, and then formally state a linear model to investigate whether there are differences in restaurant spending based on background music conditions.</p>
<p>Describe and schematically represent the coding matrix used in the above model.</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When you reorder the levels, you should end up with the following coding of group means if you choose ‘none’ as your reference group:</p>
<ul>
<li>
<span class="math inline">\(\mu_1\)</span> = mean of no music group</li>
<li>
<span class="math inline">\(\mu_2\)</span> = mean of pop music group</li>
<li>
<span class="math inline">\(\mu_3\)</span> = mean of classical music group</li>
</ul>
<p>When schematically representing the coding scheme, you should produce a matrix/table of 0s and 1s.</p>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-5" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-5', 'sol-start-5')"> Solution </span>
</div>
<div id="sol-body-5" class="solution-body" style="display: none;">
<p>It makes sense to have no music as our reference level, since both other groups involve some type of music playing:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#set 'None' music type condition as our reference group. </span></span>
<span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span> , <span class="st">"None"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check the levels of the variable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "None"      "Pop"       "Classical"</code></pre>
</div>
</div>
<p>Specify our model:</p>
<p><span class="math display">\[
\text{Restaurant Spending} = \beta_0 + \beta_1 \cdot \text{Music(Pop)} + \beta_2 \cdot \text{Music(Classical)} + \epsilon
\]</span> In words:</p>
<p><span class="math display">\[
\text{IsPopMusic} = \begin{cases}
1 &amp; \text{if observation is from the Pop Music category} \\
0 &amp; \text{otherwise}
\end{cases}
\]</span></p>
<p><span class="math display">\[
\text{IsClassicalMusic} = \begin{cases}
1 &amp; \text{if observation is from the Classical Music category} \\
0 &amp; \text{otherwise}
\end{cases}
\]</span></p>
<p>Schematically:</p>
<p><span class="math display">\[
\begin{matrix}
\textbf{Level}  &amp; \textbf{IsPopMusic} &amp; \textbf{IsClassicalMusic} \\
\hline
\text{None}       &amp; 0   &amp; 0   \\
\text{Pop}            &amp; 1   &amp; 0   \\
\text{Clasical}             &amp; 0   &amp; 1
\end{matrix}
\]</span></p>
</div>
<p class="solution-end">
</p>
<p><br></p>
<div class="question-begin">
Question 4
</div>
<div class="question-body">
<p>Fit the specified model, and assign it the name “mdl_rg” (for reference group constraint).</p>
<p>Interpret your coefficients in the context of the study.</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Under the constraint <span class="math inline">\(\beta_1 = 0\)</span>, meaning that the first factor level is the reference group,</p>
<ul>
<li>
<span class="math inline">\(\beta_0\)</span> is interpreted as <span class="math inline">\(\mu_1\)</span>, the mean response for the reference group (group 1);</li>
<li>
<span class="math inline">\(\beta_i\)</span> is interpreted as the difference between the mean response for group <span class="math inline">\(i\)</span> and the reference group.</li>
</ul>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-6" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-6', 'sol-start-6')"> Solution </span>
</div>
<div id="sol-body-6" class="solution-body" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#fit model</span></span>
<span><span class="va">mdl_rg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">amount</span> <span class="op">~</span> <span class="va">music</span>, data <span class="op">=</span> <span class="va">rest_spend</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mdl_rg</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = amount ~ music, data = rest_spend)

Residuals:
   Min     1Q Median     3Q    Max 
-8.433 -1.886  0.127  1.755 11.285 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     22.1414     0.2593  85.373  &lt; 2e-16 ***
musicPop        -0.2424     0.3668  -0.661    0.509    
musicClassical   2.0328     0.3668   5.542 5.81e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.841 on 357 degrees of freedom
Multiple R-squared:  0.1151,    Adjusted R-squared:  0.1101 
F-statistic: 23.21 on 2 and 357 DF,  p-value: 3.335e-10</code></pre>
</div>
</div>
<p>The interpretation is as follows:</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;">Coefficient</th>
<th style="text-align: center;">Estimate</th>
<th style="text-align: center;">Corresponds to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">(Intercept)</td>
<td style="text-align: center;">22.1414</td>
<td style="text-align: center;"><span class="math inline">\(\hat \beta_0 = \hat \mu_1\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">musicPop</td>
<td style="text-align: center;">-0.2424</td>
<td style="text-align: center;"><span class="math inline">\(\hat \beta_2 = \hat \mu_2 - \hat \beta_0 = \hat \mu_2 - \hat \mu_1\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">musicClassical</td>
<td style="text-align: center;">2.0328</td>
<td style="text-align: center;"><span class="math inline">\(\hat \beta_3 = \hat \mu_3 - \hat \beta_0 = \hat \mu_3 - \hat \mu_1\)</span></td>
</tr>
</tbody>
</table>
<p>The estimate corresponding to (Intercept) contains <span class="math inline">\(\hat \beta_0 = \hat \mu_1 = 22.1414\)</span>. The estimated average spending for those having no music playing in the background is approximately £22.14.</p>
<p>The next estimate corresponds to <code>musicPop</code> and is <span class="math inline">\(\hat \beta_1 = -0.2424\)</span>. The difference in mean spending between <code>None</code> and <code>Pop</code> is estimated to be <span class="math inline">\(-0.2424\)</span>. In other words, people with pop music playing in the background seem to spend approximately £0.24 less than those who have no music playing in the background.</p>
<p>The estimate corresponding to <code>musicClassical</code> is <span class="math inline">\(\hat \beta_2 = 2.0328\)</span>. This is the estimated difference in mean spending between <code>None</code> and <code>Classical</code>. People with classical music background in the background seem to spend approximately £2.03 more than those who have no music playing in the background.</p>
<p>Hence, for all levels except the reference group we see differences to the reference group while the estimate of the reference level can be found next to <code>(Intercept)</code>.</p>
<p>It is also important to notice how the coefficients’ names are written. They are a combination of <code>factor name</code> and <code>level name</code>, such as <code>musicPop</code>. The only coefficient that is missing is <code>musicNone</code>, the one corresponding to the reference category <code>None</code>.</p>
</div>
<p class="solution-end">
</p>
<p><br></p>
<div class="question-begin">
Question 5
</div>
<div class="question-body">
<p>Identify the relevant pieces of information from the commands <code>anova(mdl_rg)</code> and <code>summary(mdl_rg)</code> that can be used to conduct an ANOVA <span class="math inline">\(F\)</span>-test against the null hypothesis that all population means are equal.</p>
<p>Interpret the <span class="math inline">\(F\)</span>-test results in the context of the ANOVA null hypothesis, and present this output in an APA formatted table.</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>To create a table, you can use the <code><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable()</a></code> function from the <strong>kableExtra</strong> package here, just like you do for tables of descriptive statistics. Note that we need to list how many digits we want our values to be rounded to in our table: + Degrees of freedom are whole numbers, so 1 will suffice + for all others, we want 2 (in line with <a href="https://apastyle.apa.org/instructional-aids/numbers-statistics-guide.pdf">APA</a>, but to avoid a <span class="math inline">\(p\)</span>-value of zero, specify 10</p>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-7" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-7', 'sol-start-7')"> Solution </span>
</div>
<div id="sol-body-7" class="solution-body" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#examine summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mdl_rg</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = amount ~ music, data = rest_spend)

Residuals:
   Min     1Q Median     3Q    Max 
-8.433 -1.886  0.127  1.755 11.285 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     22.1414     0.2593  85.373  &lt; 2e-16 ***
musicPop        -0.2424     0.3668  -0.661    0.509    
musicClassical   2.0328     0.3668   5.542 5.81e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.841 on 357 degrees of freedom
Multiple R-squared:  0.1151,    Adjusted R-squared:  0.1101 
F-statistic: 23.21 on 2 and 357 DF,  p-value: 3.335e-10</code></pre>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#run anova</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">mdl_rg</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: amount
           Df Sum Sq Mean Sq F value    Pr(&gt;F)    
music       2  374.7 187.348  23.211 3.335e-10 ***
Residuals 357 2881.5   8.071                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The model summary returns the <span class="math inline">\(F\)</span>-test of model utility which, in this case, corresponds to the ANOVA <span class="math inline">\(F\)</span>-test against the null hypothesis of equal population means.</p>
<p>The relevant line from <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> is:</p>
<pre><code>F-statistic: 23.21 on 2 and 357 DF,  p-value: 3.335e-10</code></pre>
<p>The relevant parts from <code><a href="https://rdrr.io/r/stats/anova.html">anova()</a></code> are:</p>
<ul>
<li>
<code>F value</code> of <code>23.211</code>
</li>
<li>The <code>Df</code> column giving <code>2</code> and <code>357</code> degrees of freedom</li>
<li>The p-value of the test, reported under <code>Pr(&gt;F)</code> as <code>3.335e-10 ***</code>.</li>
</ul>
<p>We can create a nice table of our anova results:</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">mdl_rg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Analysis of Variance Table"</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div id="tbl-anova-results" class="anchored">

<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>Table&nbsp;2:  Analysis of Variance Table </caption>
 <thead><tr>
<th style="text-align:left;">   </th>
   <th style="text-align:right;"> Df </th>
   <th style="text-align:right;"> Sum Sq </th>
   <th style="text-align:right;"> Mean Sq </th>
   <th style="text-align:right;"> F value </th>
   <th style="text-align:right;"> Pr(&gt;F) </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:left;"> music </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 374.7 </td>
   <td style="text-align:right;"> 187.35 </td>
   <td style="text-align:right;"> 23.21 </td>
   <td style="text-align:right;"> 3e-10 </td>
  </tr>
<tr>
<td style="text-align:left;"> Residuals </td>
   <td style="text-align:right;"> 357 </td>
   <td style="text-align:right;"> 2881.5 </td>
   <td style="text-align:right;"> 8.07 </td>
   <td style="text-align:right;"> NA </td>
   <td style="text-align:right;"> NA </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
<p>We can write this up as follows:</p>
<div class="callout-important callout callout-style-simple no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>We performed an analysis of variance against the null hypothesis of equal population mean spending across three types of background music, <span class="math inline">\(F(2, 357) = 23.21\)</span>, <span class="math inline">\(p &lt; .001\)</span>.</p>
<p>The large observed <span class="math inline">\(F\)</span>-statistic led to a very small <em>p</em>-value, meaning that such a large observed variability among the mean restaurant spending across the different music types, compared to the variability in the residuals, is very unlikely to happen by chance alone if the population means where all the same (see <a href="#tbl-anova-results">Table&nbsp;2</a>).</p>
<p>For this reason, at the 5% significance level, we reject the null hypothesis as there is strong evidence that at least two population means differ.</p>
</div>
</div>
</div>
</div>
<p class="solution-end">
</p>
<p><br></p>
<div class="question-begin">
Question 6
</div>
<div class="question-body">
<p>Obtain the estimated (or predicted) group means for the “None,” “Pop,” and “Classical” background music conditions by using the <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> function.</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Step 1: Define a data frame with a column having the same name as the factor in the fitted model (i.e., music). Then, specify all the groups (= levels) for which you would like the predicted mean.</p>
<p>Step 2: Pass the data frame to the predict function using the <code>newdata =</code> argument. The <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> function will match the column named type with the predictor called type in the fitted model ‘mdl_rg’.</p>
<p>See <a href="https://uoepsy.github.io/dapr2/2223/labs/1_03_mlr.html">Semester 1 Lab 3 Q8</a> for a worked example.</p>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-8" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-8', 'sol-start-8')"> Solution </span>
</div>
<div id="sol-body-8" class="solution-body" style="display: none;">
<p>Step 1:</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="va">query_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>music <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"None"</span>, <span class="st">"Pop"</span>, <span class="st">"Classical"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">query_groups</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  music    
  &lt;chr&gt;    
1 None     
2 Pop      
3 Classical</code></pre>
</div>
</div>
<p>Step 2:</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">mdl_rg</span>, newdata <span class="op">=</span> <span class="va">query_groups</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       1        2        3 
22.14139 21.89894 24.17414 </code></pre>
</div>
</div>
<ul>
<li>Predicted mean of “None” = <span class="math inline">\(\hat \mu_\text{None}\)</span> = 22.1414</li>
<li>Predicted mean of “Pop” = <span class="math inline">\(\hat \mu_\text{Pop}\)</span> = 22.1414 - 0.2424 = 21.899</li>
<li>Predicted mean of “Classical” = <span class="math inline">\(\hat \mu_\text{Classical}\)</span> = 22.1414 + 2.0328 = 24.1742</li>
</ul>
</div>
<p class="solution-end">
</p>
</section><section id="sum-to-zero-coding" class="level2"><h2 class="anchored" data-anchor-id="sum-to-zero-coding">Sum to Zero Coding</h2>
<div class="question-begin">
Question 7
</div>
<div class="question-body">
<p>Using sum-to-zero coding, formally state a linear model to investigate whether there are differences in restaurant spending based on background music conditions.</p>
<p>Describe and schematically represent the coding matrix used in the above model.</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When schematically representing the coding scheme, you should produce a matrix/table of 0s and 1s.</p>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-9" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-9', 'sol-start-9')"> Solution </span>
</div>
<div id="sol-body-9" class="solution-body" style="display: none;">
<p>Specify our model:</p>
<p><span class="math display">\[
\text{Restaurant Spending} = \beta_0 + \beta_1 \cdot \text{EffectLevel1} + \beta_2 \cdot \text{EffectLevel2} + \epsilon
\]</span> In words:</p>
<p><span class="math display">\[
\text{EffectLevel1} = \begin{cases}
1  &amp; \text{if observation is from category 1} \\
0  &amp; \text{if observation is from category 2} \\
-1 &amp; \text{otherwise}
\end{cases}
\]</span></p>
<p><span class="math display">\[
\text{EffectLevel2} = \begin{cases}
0  &amp; \text{if observation is from category 1} \\
1  &amp; \text{if observation is from category 2} \\
-1 &amp; \text{otherwise}
\end{cases}
\]</span></p>
<p>Schematically:</p>
<p><span class="math display">\[
\begin{matrix}
\textbf{Level}           &amp; \textbf{EffectLevel1} &amp; \textbf{EffectLevel2} \\
\hline
\text{None}              &amp; 1   &amp; 0    \\
\text{Pop}               &amp; 0   &amp; 1    \\
\text{Classical}         &amp; -1  &amp; -1
\end{matrix}
\]</span></p>
</div>
<p class="solution-end">
</p>
<p><br></p>
<div class="question-begin">
Question 8
</div>
<div class="question-body">
<p>Set the sum to zero constraint for the factor of background music.</p>
<p>Fit again the linear model, and assign the model the name ‘mdl_stz’.</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We can switch between side-constraints using the following code:</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#use dummy coding</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"contr.treatment"</span></span>
<span></span>
<span><span class="co">#use sum-to-zero coding</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"contr.sum"</span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-10" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-10', 'sol-start-10')"> Solution </span>
</div>
<div id="sol-body-10" class="solution-body" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"contr.sum"</span></span>
<span></span>
<span><span class="co">#check coding matches our table above:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2]
None         1    0
Pop          0    1
Classical   -1   -1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="va">mdl_stz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">amount</span> <span class="op">~</span> <span class="va">music</span>, data <span class="op">=</span> <span class="va">rest_spend</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mdl_stz</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = amount ~ music, data = rest_spend)

Residuals:
   Min     1Q Median     3Q    Max 
-8.433 -1.886  0.127  1.755 11.285 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  22.7382     0.1497 151.856  &lt; 2e-16 ***
music1       -0.5968     0.2118  -2.818   0.0051 ** 
music2       -0.8392     0.2118  -3.963 8.94e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.841 on 357 degrees of freedom
Multiple R-squared:  0.1151,    Adjusted R-squared:  0.1101 
F-statistic: 23.21 on 2 and 357 DF,  p-value: 3.335e-10</code></pre>
</div>
</div>
</div>
<p class="solution-end">
</p>
<p><br></p>
<div class="question-begin">
Question 9
</div>
<div class="question-body">
<p>Interpret your coefficients in the context of the study.</p>
<div class="callout-tip callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Recall that under this constraint the interpretation of the coefficients becomes:</p>
<ul>
<li>
<span class="math inline">\(\beta_0\)</span> represents the grand mean</li>
<li>
<span class="math inline">\(\beta_i\)</span> the effect due to group <span class="math inline">\(i\)</span> — that is, the mean response in group <span class="math inline">\(i\)</span> minus the grand mean</li>
</ul>
</div>
</div>
</div>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-11" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-11', 'sol-start-11')"> Solution </span>
</div>
<div id="sol-body-11" class="solution-body" style="display: none;">
<p>The interpretation is as follows:</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;">Coefficient</th>
<th style="text-align: center;">Estimate</th>
<th style="text-align: center;">Corresponds to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">(Intercept)</td>
<td style="text-align: center;">22.7382</td>
<td style="text-align: center;"><span class="math inline">\(\beta_0 = \frac{\mu_1 + \mu_2 + \mu_3}{3} = \mu\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">music1</td>
<td style="text-align: center;">-0.5968</td>
<td style="text-align: center;"><span class="math inline">\(\beta_1 = \mu_1 - \mu\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">music2</td>
<td style="text-align: center;">-0.8392</td>
<td style="text-align: center;"><span class="math inline">\(\beta_2 = \mu_2 - \mu\)</span></td>
</tr>
</tbody>
</table>
<p>The estimate corresponding to <code>(Intercept)</code> contains <span class="math inline">\(\beta_0 = \mu = 22.7382\)</span>. This value represents the grand mean of the data. The estimated average spending for customers across background music conditions is approximately £22.74.</p>
<p>The next estimate corresponds to <code>music1</code> and is <span class="math inline">\(\hat \beta_1 = -0.5968\)</span>. The difference in mean spending between <code>None</code> and the grand mean is estimated to be <span class="math inline">\(-0.5968\)</span>. In other words, people with no music playing in the background seem to spend approximately £0.60 less than average.</p>
<p>The estimate corresponding to <code>music2</code> is <span class="math inline">\(\hat \beta_2 = -0.8392\)</span>. The difference in mean spending between <code>Pop</code> and the grand mean is estimated to be <span class="math inline">\(-0.8392\)</span>. In other words, customers with Pop music playing in the background seem to spend approximately £0.84 less than average.</p>
<p>The estimate for <code>music3</code>, representing the difference of “Classical” to the grand mean is <em>not shown</em> by <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>. Because of the side-constraint, we know it must be <span class="math inline">\(\beta_3 = -(\beta_1 + \beta_2)\)</span>. The difference in mean spending between <code>Classical</code> and the grand mean is estimated to be <span class="math inline">\(-(-0.5968 + -0.8392) = 1.436\)</span>. In other words, customers with Classical music playing in the background seem to spend approximately £1.44 more than average.</p>
</div>
<p class="solution-end">
</p>
</section><section id="comparing-approaches" class="level2"><h2 class="anchored" data-anchor-id="comparing-approaches">Comparing Approaches</h2>
<div class="question-begin">
Question 10
</div>
<div class="question-body">
<p>Compare the the predicted group means across both contrast approaches - do they match?</p>
<p>Is the model utility <span class="math inline">\(F\)</span>-test still the same across both approaches? Why do you think it’s the case?</p>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-12" class="fa-solid fa-circle-arrow-right solution-icon clickable" onclick="toggle_visibility('sol-body-12', 'sol-start-12')"> Solution </span>
</div>
<div id="sol-body-12" class="solution-body" style="display: none;">
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#note that the below two models and dataset have already been created above, so you can jump straight to adding the predicted values from the two models if you'd prefer </span></span>
<span></span>
<span><span class="co">#model with dummy coding</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">contr.treatment</span></span>
<span><span class="va">mdl_rg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">amount</span> <span class="op">~</span> <span class="va">music</span>, data <span class="op">=</span> <span class="va">rest_spend</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># model with sum-to-zero coding</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/contrasts.html">contrasts</a></span><span class="op">(</span><span class="va">rest_spend</span><span class="op">$</span><span class="va">music</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">contr.sum</span></span>
<span><span class="va">mdl_stz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">amount</span> <span class="op">~</span> <span class="va">music</span>, data <span class="op">=</span> <span class="va">rest_spend</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#create dataset</span></span>
<span><span class="va">music_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>music <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"None"</span>, <span class="st">"Pop"</span>, <span class="st">"Classical"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">music_groups</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  music    
  &lt;chr&gt;    
1 None     
2 Pop      
3 Classical</code></pre>
</div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#add predicted values from our two models - mdl_rg &amp; mdl_stz - values are the same</span></span>
<span><span class="va">music_groups</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    pred_dummy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">mdl_rg</span>, newdata <span class="op">=</span> <span class="va">.</span><span class="op">)</span>,</span>
<span>    pred_sum_to_zero <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">mdl_stz</span>, newdata <span class="op">=</span> <span class="va">.</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  music     pred_dummy pred_sum_to_zero
  &lt;chr&gt;          &lt;dbl&gt;            &lt;dbl&gt;
1 None            22.1             22.1
2 Pop             21.9             21.9
3 Classical       24.2             24.2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="co">#compare anova() outputs - values are the same</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">mdl_rg</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: amount
           Df Sum Sq Mean Sq F value    Pr(&gt;F)    
music       2  374.7 187.348  23.211 3.335e-10 ***
Residuals 357 2881.5   8.071                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">mdl_stz</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: amount
           Df Sum Sq Mean Sq F value    Pr(&gt;F)    
music       2  374.7 187.348  23.211 3.335e-10 ***
Residuals 357 2881.5   8.071                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>Yes, the values from both the dummy coding and sum-to-zero approaches give the same values. This is because, regardless of the coding matrix scheme we use to compare groups, we are still modelling the same group means from our data set. Thus, neither the predicted means nor the model utility <span class="math inline">\(F\)</span>-test depend on the side-constraint that we employ. However, the side-constraint affects the meaning of the parameters in the model.</p>
</div>
<p class="solution-end">
</p>



</section></section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-North2003" class="csl-entry" role="doc-biblioentry">
North, A., A. Shilcock, and D. Hargreaves. 2003. <span>“The Effect of Musical Style on Restaurant Customers’ Spending.”</span> <em>Environment and Behavior</em> 35: 712–18.
</div>
</div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
      <div class="nav-footer-center">© Copyright 2019-2022 <a href="https://www.ed.ac.uk/">The University of Edinburgh</a>. Site licensed under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">GNU AGPLv3</a> license.</div>
  </div>
</footer>


</body></html>