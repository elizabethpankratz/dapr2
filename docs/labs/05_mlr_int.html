<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Interactions</title>

<script src="site_libs/header-attrs-2.8/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);
e.style.display = ((e.style.display!='none') ? 'none' : 'block');
if(f.classList.contains('fa-plus')) {
    f.classList.add('fa-minus')
    f.classList.remove('fa-plus')
} else {
    f.classList.add('fa-plus')
    f.classList.remove('fa-minus')
}
}
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="assets/style-labs.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><strong>DAPR2</strong></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Intro to Linear Models
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01_models.html">1/1: Functions and models</a>
    </li>
    <li>
      <a href="02_slr.html">1/2: Intro to Linear Regression</a>
    </li>
    <li class="dropdown-header">1/3: More Linear Regression</li>
    <li class="dropdown-header">1/4: Multiple Predictors</li>
    <li class="dropdown-header">1/5: Interactions</li>
    <li class="dropdown-header">1/6: Break week</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More Linear Models
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">1/7: More Interactions</li>
    <li class="dropdown-header">1/8: Categorical Interactions</li>
    <li class="dropdown-header">1/9: Assumptions &amp; Diagnostics</li>
    <li class="dropdown-header">1/10: Bootstrap &amp; Troubleshooting</li>
    <li class="dropdown-header">1/11: Writing-up</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Analyzing Experimental Studies
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">2/1: </li>
    <li class="dropdown-header">2/2: </li>
    <li class="dropdown-header">2/3: </li>
    <li class="dropdown-header">2/4: </li>
    <li class="dropdown-header">2/5: </li>
    <li class="dropdown-header">2/6: Break week</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced Topics for LM
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">2/7: </li>
    <li class="dropdown-header">2/8: </li>
    <li class="dropdown-header">2/9: </li>
    <li class="dropdown-header">2/10: </li>
    <li class="dropdown-header">2/11: </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro_r_rstudio.html">Getting started with R &amp; RStudio</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Interactions</h1>

</div>


<div class="green">
<p><strong>Information about solutions</strong></p>
<p>Solutions for these exercises are available immediately below each question.<br />
We would like to emphasise that much evidence suggests that testing enhances learning, and we <strong>strongly</strong> encourage you to make a concerted attempt at answering each question <em>before</em> looking at the solutions. Immediately looking at the solutions and then copying the code into your work will lead to poorer learning.<br />
We would also like to note that there are always many different ways to achieve the same thing in R, and the solutions provided are simply <em>one</em> approach.</p>
<p>Be sure to check the <a href="04_mlr.html"><strong>solutions to last week’s exercises</strong></a>.<br>You can still ask any questions about previous weeks’ materials if things aren’t clear!</p>
</div>
<div class="lo">
<p><strong>LEARNING OBJECTIVES</strong></p>
<ol style="list-style-type: decimal">
<li>Understand the concept of an interaction.</li>
<li>Interpret the meaning of a numeric <span class="math inline">\(\times\)</span> categorical interaction.<br />
</li>
<li>Understand the principle of marginality and why this impacts modelling choices with interactions.</li>
<li>Visualize and probe interactions.</li>
</ol>
</div>
<div class="question-begin">
Question 1
</div>
<div class="question-body">
<p>Reseachers have become interested in how the number of social interactions might influence mental health and wellbeing differently for those living in rural communities compared to those in cities and suburbs. They want to assess whether the effect of social interactions on wellbeing <em>is moderated by</em> (depends upon) whether or not a person lives in a rural area.</p>
<p>Create a new RMarkdown, load the <strong>tidyverse</strong> package read in the wellbeing data into R.<br />
The data is available at <a href="https://uoepsy.github.io/data/wellbeing.csv" class="uri">https://uoepsy.github.io/data/wellbeing.csv</a>".</p>
<p>Count the number of respondents in each location (City/Location/Rural).</p>
<p><strong>Open-ended:</strong> Do you think there is enough data to answer this question?</p>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-79" class="fa fa-chevron-circle-right solution-icon clickable" onclick="toggle_visibility(&#39;sol-body-79&#39;, &#39;sol-start-79&#39;)"> Solution </span>
</div>
<div id="sol-body-79" class="solution-body" style="display: none;">
<pre class="r"><code>library(tidyverse)
mwdata &lt;- read_csv(&quot;https://uoepsy.github.io/data/wellbeing.csv&quot;)

mwdata %&gt;% count(location)</code></pre>
<pre><code>## # A tibble: 3 × 2
##   location     n
##   &lt;chr&gt;    &lt;int&gt;
## 1 City        15
## 2 Rural        7
## 3 Suburb      10</code></pre>
<ul>
<li>We have only 7 respondents who are from a rural location, and 25 from the city &amp; suburbs. Intuitively, this doesn’t seem very many to rely on as representative of the population of those living in rural areas in Edinburgh &amp; Lothians. Another thing to think about is that we probably don’t expect <em>large</em> differences between rural and city dwellers in the effect of social interaction on wellbeing (i.e., we might not expect differences in these sub-groups to be stronger than the overall relationship between social interaction and wellbeing).</li>
</ul>
</div>
<p class="solution-end">
</p>
<blockquote>
<p><strong>Research Question:</strong>
Does the relationship between number of social interactions and mental wellbeing differ between rural and non-rural residents?</p>
</blockquote>
<p>To investigate how the relationship between the number of social interactions and mental wellbeing might be different for those living in rural communities, the researchers conduct a new study, collecting data from 200 randomly selected residents of the Edinburgh &amp; Lothian postcodes.</p>
<div class="optional-begin">
<span id="opt-start-80" class="fa fa-chevron-circle-right optional-icon clickable" onclick="toggle_visibility(&#39;opt-body-80&#39;, &#39;opt-start-80&#39;)"> Wellbeing/Rurality data codebook.</span>
</div>
<div id="opt-body-80" class="optional-body" style="display: none;">
<p><strong>Download link</strong></p>
<p>The data is available at <a href="https://uoepsy.github.io/data/wellbeing_rural.csv" class="uri">https://uoepsy.github.io/data/wellbeing_rural.csv</a>.</p>
<p><strong>Description</strong></p>
<p>From the Edinburgh &amp; Lothians, 100 city/suburb residences and 100 rural residences were chosen at random and contacted to participate in the study. The Warwick-Edinburgh Mental Wellbeing Scale (WEMWBS), was used to measure mental health and well-being.
Participants filled out a questionnaire including items concerning: estimated average number of hours spent outdoors each week, estimated average number of social interactions each week (whether on-line or in-person), whether a daily routine is followed (yes/no). For those respondents who had an activity tracker app or smart watch, they were asked to provide their average weekly number of steps.</p>
<p>The data in <code>wellbeing_rural.csv</code> contain seven attributes collected from a random sample of <span class="math inline">\(n=200\)</span> hypothetical residents over Edinburgh &amp; Lothians, and include:</p>
<ul>
<li><code>wellbeing</code>: Warwick-Edinburgh Mental Wellbeing Scale (WEMWBS), a self-report measure of mental health and well-being. The scale is scored by summing responses to each item, with items answered on a 1 to 5 Likert scale. The minimum scale score is 14 and the maximum is 70.<br />
</li>
<li><code>outdoor_time</code>: Self report estimated number of hours per week spent outdoors<br />
</li>
<li><code>social_int</code>: Self report estimated number of social interactions per week (both online and in-person)</li>
<li><code>routine</code>: Binary 1=Yes/0=No response to the question “Do you follow a daily routine throughout the week?”</li>
<li><code>location</code>: Location of primary residence (City, Suburb, Rural)</li>
<li><code>steps_k</code>: Average weekly number of steps in thousands (as given by activity tracker if available)</li>
<li><code>age</code>: Age in years of respondent</li>
</ul>
<p><strong>Preview</strong></p>
<p>The first six rows of the data are:</p>
<div id="xpqxkbfqhg" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#xpqxkbfqhg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xpqxkbfqhg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xpqxkbfqhg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xpqxkbfqhg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xpqxkbfqhg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xpqxkbfqhg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xpqxkbfqhg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xpqxkbfqhg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xpqxkbfqhg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xpqxkbfqhg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xpqxkbfqhg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xpqxkbfqhg .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#xpqxkbfqhg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xpqxkbfqhg .gt_from_md > :first-child {
  margin-top: 0;
}

#xpqxkbfqhg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xpqxkbfqhg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xpqxkbfqhg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#xpqxkbfqhg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xpqxkbfqhg .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#xpqxkbfqhg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xpqxkbfqhg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xpqxkbfqhg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xpqxkbfqhg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xpqxkbfqhg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xpqxkbfqhg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#xpqxkbfqhg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xpqxkbfqhg .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#xpqxkbfqhg .gt_left {
  text-align: left;
}

#xpqxkbfqhg .gt_center {
  text-align: center;
}

#xpqxkbfqhg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xpqxkbfqhg .gt_font_normal {
  font-weight: normal;
}

#xpqxkbfqhg .gt_font_bold {
  font-weight: bold;
}

#xpqxkbfqhg .gt_font_italic {
  font-style: italic;
}

#xpqxkbfqhg .gt_super {
  font-size: 65%;
}

#xpqxkbfqhg .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">outdoor_time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">social_int</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">routine</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">wellbeing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">location</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">steps_k</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">28</td>
<td class="gt_row gt_right">12</td>
<td class="gt_row gt_right">13</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">36</td>
<td class="gt_row gt_left">rural</td>
<td class="gt_row gt_right">21.6</td></tr>
    <tr><td class="gt_row gt_right">56</td>
<td class="gt_row gt_right">5</td>
<td class="gt_row gt_right">15</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">41</td>
<td class="gt_row gt_left">rural</td>
<td class="gt_row gt_right">12.3</td></tr>
    <tr><td class="gt_row gt_right">25</td>
<td class="gt_row gt_right">19</td>
<td class="gt_row gt_right">11</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">35</td>
<td class="gt_row gt_left">rural</td>
<td class="gt_row gt_right">49.8</td></tr>
    <tr><td class="gt_row gt_right">60</td>
<td class="gt_row gt_right">25</td>
<td class="gt_row gt_right">15</td>
<td class="gt_row gt_right">0</td>
<td class="gt_row gt_right">35</td>
<td class="gt_row gt_left">rural</td>
<td class="gt_row gt_right">NA</td></tr>
    <tr><td class="gt_row gt_right">19</td>
<td class="gt_row gt_right">9</td>
<td class="gt_row gt_right">18</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">32</td>
<td class="gt_row gt_left">rural</td>
<td class="gt_row gt_right">48.1</td></tr>
    <tr><td class="gt_row gt_right">34</td>
<td class="gt_row gt_right">18</td>
<td class="gt_row gt_right">13</td>
<td class="gt_row gt_right">1</td>
<td class="gt_row gt_right">34</td>
<td class="gt_row gt_left">rural</td>
<td class="gt_row gt_right">67.3</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
<p class="optional-end">
</p>
<div class="question-begin">
Question 2
</div>
<div class="question-body">
<p>Specify a multiple regression model to answer the research question.<br />
Read in the data, and assign it the name “mwdata2.” Then fully explore the variables and relationships which are going to be used in your analysis.</p>
<blockquote>
<p>“Except in special circumstances, a model including a product term for interaction between two explanatory variables should also include terms with each of the explanatory variables individually, even though their coefficients may not be significantly different from zero. Following this rule avoids the logical inconsistency of saying that the effect of <span class="math inline">\(X_1\)</span> depends on the level of <span class="math inline">\(X_2\)</span> but that there is no effect of <span class="math inline">\(X_1\)</span>.”<br />
<span class="citation"><a href="#ref-Ramsey2012" role="doc-biblioref">Ramsey and Schafer</a> (<a href="#ref-Ramsey2012" role="doc-biblioref">2012</a>)</span></p>
</blockquote>
<hr />
<ul>
<li><strong>Tip 1:</strong> Install the <code>psych</code> package (remember to use the console, not your script to install packages), and then load it (load it in your script). The <code>pairs.panels()</code> function will plot all variables in a dataset against one another. This will save you the time you would have spent creating individual plots.<br />
</li>
<li><strong>Tip 2:</strong> Check the “location” variable. It currently has three levels (Rural/Suburb/City), but we only want two (Rural/Not Rural). You’ll need to fix this. One way to do this would be to use <code>ifelse()</code> to define a variable which takes one value (“Rural”) if the observation meets from some condition, or another value (“Not Rural”) if it does not. Type <code>?ifelse</code> in the <strong>console</strong> if you want to see the help function. You can use it to add a new variable either inside <code>mutate()</code>, or using <code>data$new_variable_name &lt;- ifelse(test, x, y)</code> syntax.</li>
</ul>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-81" class="fa fa-chevron-circle-right solution-icon clickable" onclick="toggle_visibility(&#39;sol-body-81&#39;, &#39;sol-start-81&#39;)"> Solution </span>
</div>
<div id="sol-body-81" class="solution-body" style="display: none;">
<p>To address the research question, we are going to fit the following model, where <span class="math inline">\(y\)</span> = wellbeing; <span class="math inline">\(x_1\)</span> = weekly outdoor time; and <span class="math inline">\(x_2\)</span> = whether or not the respondent lives in a rural location or not.
<span class="math display">\[
y = \beta_0 + \beta_1 \cdot x_1 + \beta_2 \cdot x_2 + \beta_3 \cdot x_1 \cdot x_2 + \epsilon \\ 
\quad \\ \text{where} \quad \epsilon \sim N(0, \sigma) \text{ independently}
\]</span></p>
<p>First we read in the data, and take a quick look at our variables:</p>
<pre class="r"><code>mwdata2 &lt;- read_csv(&quot;https://uoepsy.github.io/data/wellbeing_rural.csv&quot;)
summary(mwdata2)</code></pre>
<pre><code>##       age         outdoor_time     social_int       routine        wellbeing   
##  Min.   :18.00   Min.   : 1.00   Min.   : 3.00   Min.   :0.000   Min.   :22.0  
##  1st Qu.:30.00   1st Qu.:12.75   1st Qu.: 9.00   1st Qu.:0.000   1st Qu.:33.0  
##  Median :42.00   Median :18.00   Median :12.00   Median :1.000   Median :35.0  
##  Mean   :42.30   Mean   :18.25   Mean   :12.06   Mean   :0.565   Mean   :36.3  
##  3rd Qu.:54.25   3rd Qu.:23.00   3rd Qu.:15.00   3rd Qu.:1.000   3rd Qu.:40.0  
##  Max.   :70.00   Max.   :35.00   Max.   :24.00   Max.   :1.000   Max.   :59.0  
##                                                                                
##    location            steps_k      
##  Length:200         Min.   :  0.00  
##  Class :character   1st Qu.: 24.00  
##  Mode  :character   Median : 42.45  
##                     Mean   : 44.93  
##                     3rd Qu.: 65.28  
##                     Max.   :111.30  
##                     NA&#39;s   :66</code></pre>
<p>First let’s create a new variable for Rural/Not Rural</p>
<pre class="r"><code>mwdata2 &lt;- 
  mwdata2 %&gt;% 
  mutate(
    isRural = ifelse(location == &quot;rural&quot;, &quot;rural&quot;,&quot;not rural&quot;)
  )</code></pre>
<p>Now let’s use <code>psych::pairs.panels()</code> function.<br />
We could use it on the whole dataset, but for now we’ll just do it on the variables we’re interested in:</p>
<pre class="r"><code>library(psych)
pairs.panels(mwdata2 %&gt;% select(wellbeing, social_int, isRural))</code></pre>
<p><img src="05_mlr_int_files/figure-html/unnamed-chunk-5-1.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<p class="solution-end">
</p>
<div class="question-begin">
Question 3
</div>
<div class="question-body">
<p>Produce a visualisation of the relationship between weekly number of social interactions and well-being, with separate <em>facets</em> for rural vs non-rural respondents.</p>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-82" class="fa fa-chevron-circle-right solution-icon clickable" onclick="toggle_visibility(&#39;sol-body-82&#39;, &#39;sol-start-82&#39;)"> Solution </span>
</div>
<div id="sol-body-82" class="solution-body" style="display: none;">
<pre class="r"><code>ggplot(data = mwdata2, aes(x = social_int, y = wellbeing)) + 
  geom_point() + 
  facet_wrap(~isRural)</code></pre>
<p><img src="05_mlr_int_files/figure-html/unnamed-chunk-6-1.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<p class="solution-end">
</p>
<div class="question-begin">
Question 4
</div>
<div class="question-body">
<p>Fit your model using <code>lm()</code>, and assign it as an object with the name “rural_mod.”</p>
<p><strong>Hint:</strong> When fitting a regression model in R with two explanatory variables A and B, and their interaction, these two are equivalent:</p>
<ul>
<li>y ~ A + B + A:B</li>
<li>y ~ A*B</li>
</ul>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-83" class="fa fa-chevron-circle-right solution-icon clickable" onclick="toggle_visibility(&#39;sol-body-83&#39;, &#39;sol-start-83&#39;)"> Solution </span>
</div>
<div id="sol-body-83" class="solution-body" style="display: none;">
<pre class="r"><code>rural_mod &lt;- lm(wellbeing ~ 1 + social_int * isRural, data = mwdata2)</code></pre>
</div>
<p class="solution-end">
</p>
<div class="statbox">
<p><strong>Interpreting coefficients for A and B in the presence of an interaction A:B</strong></p>
<p>When you include an interaction between <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span> in a regression model, you are estimating the extent to which the effect of <span class="math inline">\(x_1\)</span> on <span class="math inline">\(y\)</span> is different across the values of <span class="math inline">\(x_2\)</span>.</p>
<p>What this means is that the effect of <span class="math inline">\(x_1\)</span> on <span class="math inline">\(y\)</span> <em>depends on/is conditional upon</em> the value of <span class="math inline">\(x_2\)</span>.<br />
(and vice versa, the effect of <span class="math inline">\(x_2\)</span> on <span class="math inline">\(y\)</span> is different across the values of <span class="math inline">\(x_1\)</span>).<br />
This means that we can no longer talk about the “effect of <span class="math inline">\(x_1\)</span> <em>holding <span class="math inline">\(x_2\)</span> constant</em>.” Instead we can talk about a <em>marginal effect</em> of <span class="math inline">\(x_1\)</span> on <span class="math inline">\(y\)</span> at a specific value of <span class="math inline">\(x_2\)</span>.</p>
<div class="frame">
<p>When we fit the model <span class="math inline">\(y = \beta_0 + \beta_1\cdot x_1 + \beta_2 \cdot x_2 + \beta_3 \cdot x_1 \cdot x_2 + \epsilon\)</span> using <code>lm()</code>:</p>
<ul>
<li>the parameter estimate <span class="math inline">\(\hat \beta_1\)</span> is the <em>marginal effect</em> of <span class="math inline">\(x_1\)</span> on <span class="math inline">\(y\)</span> where <span class="math inline">\(x_2 = 0\)</span><br />
</li>
<li>the parameter estimate <span class="math inline">\(\hat \beta_2\)</span> is the <em>marginal effect</em> of <span class="math inline">\(x_2\)</span> on <span class="math inline">\(y\)</span> where <span class="math inline">\(x_1 = 0\)</span><br />
</li>
</ul>
</div>
<div style="margin-left: 15px">
<p><small>
<strong>side note:</strong> Regardless of whether or not there is an interaction term in our model, all parameter estimates in multiple regression are “conditional” in the sense that they are dependent upon the inclusion of other variables in the model. For instance, in <span class="math inline">\(y = \beta_0 + \beta_1 x_1 + \beta_2 x_2 + \epsilon\)</span> the coefficient <span class="math inline">\(\hat \beta_1\)</span> is conditional upon holding <span class="math inline">\(x_2\)</span> constant.
</small></p>
</div>
</div>
<div class="statbox">
<p><strong>Interpreting the interaction term A:B</strong></p>
<p>The coefficient for an interaction term can be thought of as providing an <em>adjustment to the slope.</em></p>
<p>In our model: <span class="math inline">\(\text{wellbeing} = \beta_0 + \beta_1\cdot\text{social-interactions} + \beta_2\cdot\text{isRural} + \beta_3\cdot\text{social-interactions}\cdot\text{isRural} + \epsilon\)</span>, we have a numeric*categorical interaction.<br />
The estimate <span class="math inline">\(\hat \beta_3\)</span> is the adjustment to the slope <span class="math inline">\(\hat \beta_1\)</span> to be made for the individuals in the <span class="math inline">\(\text{isRural}=1\)</span> group.</p>
</div>
<div class="question-begin">
Question 5
</div>
<div class="question-body">
<p>Look at the parameter estimates from your model, and write a description of what each one corresponds to on the plot shown in Figure <a href="#fig:plot-annotate-int">1</a> (it may help to sketch out the plot yourself and annotate it).</p>
<blockquote>
<p>“The best method of communicating findings about the presence of significant interaction may be to present a table of graph of the estimated means at various combinations of the interacting variables.”<br />
<span class="citation"><a href="#ref-Ramsey2012" role="doc-biblioref">Ramsey and Schafer</a> (<a href="#ref-Ramsey2012" role="doc-biblioref">2012</a>)</span></p>
</blockquote>
<div class="figure" style="text-align: center"><span id="fig:plot-annotate-int"></span>
<img src="05_mlr_int_files/figure-html/plot-annotate-int-1.png" alt="Multiple regression model: Wellbeing ~ Social Interactions * is Rural&lt;br&gt;&lt;small&gt;Note that the dashed lines represent predicted values below the minimum observed number of social interactions, to ensure that zero on the x-axis is visible&lt;/small&gt;" width="60%" />
<p class="caption">
Figure 1: Multiple regression model: Wellbeing ~ Social Interactions * is Rural<br><small>Note that the dashed lines represent predicted values below the minimum observed number of social interactions, to ensure that zero on the x-axis is visible</small>
</p>
</div>
<div class="optional-begin">
<span id="opt-start-84" class="fa fa-chevron-circle-right optional-icon clickable" onclick="toggle_visibility(&#39;opt-body-84&#39;, &#39;opt-start-84&#39;)"> Hints.</span>
</div>
<div id="opt-body-84" class="optional-body" style="display: none;">
<p>Here are some options to choose from:</p>
<ul>
<li>The point at which the blue line cuts the y-axis (where social_int = 0)</li>
<li>The point at which the red line cuts the y-axis (where social_int = 0)</li>
<li>The average vertical distance between the red and blue lines.</li>
<li>The vertical distance from the blue to the red line <em>at the y-axis</em> (where social_int = 0)</li>
<li>The vertical distance from the red to the blue line <em>at the y-axis</em> (where social_int = 0)</li>
<li>The vertical distance from the blue to the red line <em>at the center of the plot</em></li>
<li>The vertical distance from the red to the blue line <em>at the center of the plot</em></li>
<li>The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the blue line</li>
<li>The slope of the red line</li>
<li>How the slope of the line changes when you move from the blue to the red line</li>
<li>How the slope of the line changes when you move from the red to the blue line</li>
</ul>
</div>
<p class="optional-end">
</p>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-85" class="fa fa-chevron-circle-right solution-icon clickable" onclick="toggle_visibility(&#39;sol-body-85&#39;, &#39;sol-start-85&#39;)"> Solution </span>
</div>
<div id="sol-body-85" class="solution-body" style="display: none;">
<p>We can obtain our parameter estimates using various functions such as <code>summary(rural_mod)</code>,<code>coef(rural_mod)</code>, <code>coefficients(rural_mod)</code> etc.</p>
<pre class="r"><code>coefficients(rural_mod)</code></pre>
<pre><code>##             (Intercept)              social_int            isRuralrural 
##              30.9985688               0.6487945               1.3865688 
## social_int:isRuralrural 
##              -0.5175856</code></pre>
<ul>
<li><span class="math inline">\(\hat \beta_0\)</span> = <code>(Intercept)</code> = 31: The point at which the blue line cuts the y-axis (where social_int = 0).<br />
</li>
<li><span class="math inline">\(\hat \beta_1\)</span> = <code>social_int</code> = 0.65: The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the blue line.</li>
<li><span class="math inline">\(\hat \beta_2\)</span> = <code>isRuralrural</code> = 1.39: The vertical distance from the blue to the red line <em>at the y-axis</em> (where social_int = 0).<br />
</li>
<li><span class="math inline">\(\hat \beta_3\)</span> = <code>social_int:isRuralrural</code> = -0.52: How the slope of the line changes when you move from the blue to the red line.</li>
</ul>
</div>
<p class="solution-end">
</p>
<div class="question-begin">
Question 6
</div>
<div class="question-body">
<p>Load the <strong>sjPlot</strong> package and try using the function <code>plot_model()</code>.<br />
The default behaviour of <code>plot_model()</code> is to plot the parameter estimates and their confidence intervals. This is where <code>type = "est"</code>.
Try to create a plot like Figure <a href="#fig:plot-annotate-int">1</a>, which shows the two lines (<strong>Hint:</strong> what are this weeks’ exercises all about? <code>type = ???</code>.)</p>
</div>
<p class="question-end">
</p>
<div class="solution-begin">
<span id="sol-start-86" class="fa fa-chevron-circle-right solution-icon clickable" onclick="toggle_visibility(&#39;sol-body-86&#39;, &#39;sol-start-86&#39;)"> Solution </span>
</div>
<div id="sol-body-86" class="solution-body" style="display: none;">
<pre class="r"><code>library(sjPlot)
plot_model(rural_mod, type=&quot;int&quot;)</code></pre>
<p><img src="05_mlr_int_files/figure-html/unnamed-chunk-9-1.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<p class="solution-end">
</p>
<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;">

</div>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Ramsey2012" class="csl-entry">
Ramsey, Fred, and Daniel Schafer. 2012. <em>The Statistical Sleuth: A Course in Methods of Data Analysis</em>. Cengage Learning.
</div>
</div>

<link rel="stylesheet" href="https://uoepsy.github.io/assets/css/ccfooter.css" />
<div class="ccfooter"></div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
