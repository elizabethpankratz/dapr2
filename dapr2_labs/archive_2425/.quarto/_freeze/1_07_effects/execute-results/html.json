{
  "hash": "bf3a904aad986bf8e2734c953231e059",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Effects Coding\"\nlink-citations: TRUE\nparams: \n    SHOW_SOLS: TRUE\n    TOGGLE: TRUE\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n\n\n:::lo\n\n### <i class=\"fa fa-graduation-cap\"></i> Learning Objectives\nAt the end of this lab, you will:\n\n1. Understand how to specify sum-to-zero coding\n2. Interpret the output from a model using sum-to-zero coding\n3. Understand how to specify contrasts to test specific effects\n\n### <i class=\"fa fa-check-square-o fa-2\"></i> What You Need\n\n1. Be up to date with lectures\n2. Have completed [Week 7](https://uoepsy.github.io/dapr2/2425/labs/1_06_dummy.html) lab exercises\n\n### <i class=\"fab fa-r-project\"></i> Required R Packages\nRemember to load all packages within a code chunk at the start of your RMarkdown file using `library()`. If you do not have a package and need to install, do so within the console using `install.packages(\" \")`. For further guidance on installing/updating packages, see Section C [here](https://uoepsy.github.io/files/install-update-r#update-pkgs). \n\nFor this lab, you will need to load the following package(s):\n\n* **tidyverse** \n* **psych** \n* **kableExtra**\n* **emmeans**\n\n### <i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i> Presenting Results\nAll results should be presented following [APA guidelines](https://apastyle.apa.org/instructional-aids/numbers-statistics-guide.pdf).If you need a reminder on how to hide code, format tables/plots, etc., make sure to review the [rmd bootcamp](https://uoepsy.github.io/scs/rmd-bootcamp/).\n\nThe example write-up sections included as part of the solutions are **not perfect** - they instead should give you a good example of what information you should include and how to structure this. Note that you must **not** copy any of the write-ups included below for future reports - if you do, you will be committing plagiarism, and this type of academic misconduct is taken very seriously by the University. You can find out more [here](https://www.ed.ac.uk/academic-services/students/conduct/academic-misconduct).\n\n### <i class=\"fa fa-file\"></i> Lab Data\nYou can download the data required for this lab [here](https://uoepsy.github.io/data/RestaurantSpending.csv) or read it in via this link https://uoepsy.github.io/data/RestaurantSpending.csv\n\n:::\n\n# Study Overview\n\n> **Research Question** \n>\n> Does background music in a restaurant influence the amount of money that diners spend on their meal?\n\nA group of researchers wanted to test the claims reported in [North, Shilcock, & Hargreaves (2003)](https://doi.org/10.1177/0013916503254749) on whether background music playing in a restaurant influences the amount of money diners spent on their meal.\n\nThe group of researchers got in touch with a local restaurant and asked them to alternate silence, popular music, and classical music on successive nights over 18 days. On those nights they recorded the average spend per person for each table.\n\nIn addition to the above research question, the researchers were also interested in the following:\n\n> **Comparisons** \n>\n> + Whether having some kind of music as opposed to no music (i.e., silence), resulted in a difference in the average amount of money spent by diners on their meal.\n\n\n\n<div class=\"optional-begin\"><span id='opt-start-1' class=\"fa-solid fa-circle-right optional-icon clickable\" onclick=\"toggle_visibility('opt-body-1', 'opt-start-1')\"> <span class=\"olab\">Restaurant Spending Codebook</span></span></div><div class=\"optional-body\" id = \"opt-body-1\" style=\"display: none;\">\n\n \n\n__Data Dictionary__\n\nThe data in `RestaurantSpending.csv` contained three attributes collected from $n=360$ participants:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"lgdzhkhtjw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#lgdzhkhtjw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#lgdzhkhtjw thead, #lgdzhkhtjw tbody, #lgdzhkhtjw tfoot, #lgdzhkhtjw tr, #lgdzhkhtjw td, #lgdzhkhtjw th {\n  border-style: none;\n}\n\n#lgdzhkhtjw p {\n  margin: 0;\n  padding: 0;\n}\n\n#lgdzhkhtjw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#lgdzhkhtjw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lgdzhkhtjw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lgdzhkhtjw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lgdzhkhtjw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lgdzhkhtjw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lgdzhkhtjw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lgdzhkhtjw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lgdzhkhtjw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#lgdzhkhtjw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#lgdzhkhtjw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lgdzhkhtjw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lgdzhkhtjw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lgdzhkhtjw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lgdzhkhtjw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lgdzhkhtjw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#lgdzhkhtjw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#lgdzhkhtjw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#lgdzhkhtjw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lgdzhkhtjw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#lgdzhkhtjw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lgdzhkhtjw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lgdzhkhtjw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lgdzhkhtjw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lgdzhkhtjw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lgdzhkhtjw .gt_left {\n  text-align: left;\n}\n\n#lgdzhkhtjw .gt_center {\n  text-align: center;\n}\n\n#lgdzhkhtjw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lgdzhkhtjw .gt_font_normal {\n  font-weight: normal;\n}\n\n#lgdzhkhtjw .gt_font_bold {\n  font-weight: bold;\n}\n\n#lgdzhkhtjw .gt_font_italic {\n  font-style: italic;\n}\n\n#lgdzhkhtjw .gt_super {\n  font-size: 65%;\n}\n\n#lgdzhkhtjw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#lgdzhkhtjw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#lgdzhkhtjw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#lgdzhkhtjw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#lgdzhkhtjw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#lgdzhkhtjw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#lgdzhkhtjw .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#lgdzhkhtjw .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#lgdzhkhtjw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"variable\">variable</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"description\">description</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"variable\" class=\"gt_row gt_left\">id</td>\n<td headers=\"description\" class=\"gt_row gt_left\">identifier for each diner</td></tr>\n    <tr><td headers=\"variable\" class=\"gt_row gt_left\">type</td>\n<td headers=\"description\" class=\"gt_row gt_left\">which one of three types of music was played (classical, pop, or none)</td></tr>\n    <tr><td headers=\"variable\" class=\"gt_row gt_left\">amount</td>\n<td headers=\"description\" class=\"gt_row gt_left\">average restaurant spending per person (in pounds - £)</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n__Preview__\n\nThe first six rows of the data are:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"hphheblmeh\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hphheblmeh table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hphheblmeh thead, #hphheblmeh tbody, #hphheblmeh tfoot, #hphheblmeh tr, #hphheblmeh td, #hphheblmeh th {\n  border-style: none;\n}\n\n#hphheblmeh p {\n  margin: 0;\n  padding: 0;\n}\n\n#hphheblmeh .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hphheblmeh .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hphheblmeh .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hphheblmeh .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hphheblmeh .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hphheblmeh .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hphheblmeh .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hphheblmeh .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hphheblmeh .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hphheblmeh .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hphheblmeh .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hphheblmeh .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hphheblmeh .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hphheblmeh .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hphheblmeh .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hphheblmeh .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hphheblmeh .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hphheblmeh .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hphheblmeh .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hphheblmeh .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hphheblmeh .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hphheblmeh .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hphheblmeh .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hphheblmeh .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hphheblmeh .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hphheblmeh .gt_left {\n  text-align: left;\n}\n\n#hphheblmeh .gt_center {\n  text-align: center;\n}\n\n#hphheblmeh .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hphheblmeh .gt_font_normal {\n  font-weight: normal;\n}\n\n#hphheblmeh .gt_font_bold {\n  font-weight: bold;\n}\n\n#hphheblmeh .gt_font_italic {\n  font-style: italic;\n}\n\n#hphheblmeh .gt_super {\n  font-size: 65%;\n}\n\n#hphheblmeh .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hphheblmeh .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hphheblmeh .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hphheblmeh .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hphheblmeh .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hphheblmeh .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hphheblmeh .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#hphheblmeh .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#hphheblmeh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"id\">id</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"type\">type</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"amount\">amount</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"id\" class=\"gt_row gt_right\">1</td>\n<td headers=\"type\" class=\"gt_row gt_left\">No Music</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">23.14891</td></tr>\n    <tr><td headers=\"id\" class=\"gt_row gt_right\">2</td>\n<td headers=\"type\" class=\"gt_row gt_left\">Pop Music</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">20.59492</td></tr>\n    <tr><td headers=\"id\" class=\"gt_row gt_right\">3</td>\n<td headers=\"type\" class=\"gt_row gt_left\">Pop Music</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">19.18172</td></tr>\n    <tr><td headers=\"id\" class=\"gt_row gt_right\">4</td>\n<td headers=\"type\" class=\"gt_row gt_left\">Pop Music</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">16.70237</td></tr>\n    <tr><td headers=\"id\" class=\"gt_row gt_right\">5</td>\n<td headers=\"type\" class=\"gt_row gt_left\">Classical Music</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">25.91041</td></tr>\n    <tr><td headers=\"id\" class=\"gt_row gt_right\">6</td>\n<td headers=\"type\" class=\"gt_row gt_left\">Pop Music</td>\n<td headers=\"amount\" class=\"gt_row gt_right\">19.27888</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n</div><p class=\"optional-end\"></p>\n\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Setup\n\n\n\n<div class='question-begin'>Setup</div><div class='question-body'>\n\n \n\n1. Create a new RMarkdown file\n2. Load the required package(s)\n3. Read the Restaurant Spending dataset into R, assigning it to an object named `rest_spend` \n \n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-2' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-2', 'sol-start-2')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-2\" style=\"display: none;\">\n\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#Loading the required package(s)\nlibrary(tidyverse)\nlibrary(psych)\nlibrary(kableExtra)\nlibrary(emmeans)\n\n#Reading in data and storing in object named 'rest_spend'\nrest_spend <- read_csv('https://uoepsy.github.io/data/RestaurantSpending.csv')\n```\n:::\n\n\n\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Exercises \n\n## Study & Analysis Plan Overview \n\n\n\n<div class='question-begin'>Question 1</div><div class='question-body'>\n\n\n\nExamine the dataset, and perform any necessary and appropriate data management steps.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n- The `str()` function will return the overall structure of the dataset, this can be quite handy to look at  \n- Convert categorical variables to factors, and if needed, provide better variable names*\n- Label factors appropriately to aid with your model interpretations if required*    \n- Check that the dataset is complete (i.e., are there any `NA` values?). We can check this using `is.na()`  \n- Are scores within possible ranges (e.g., if we recorded people's age, it would be impossible to have someone aged -31!)  \n\n*See the [Overview (numeric outcomes & categorical predictors) flashcard](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#numeric-outcomes-categorical-predictors).\n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-3' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-3', 'sol-start-3')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-3\" style=\"display: none;\">\n\n\n\nLet's have a look at the data to see what we're working with:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#first look at dataset structure\nstr(rest_spend)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nspc_tbl_ [360 × 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ id    : num [1:360] 1 2 3 4 5 6 7 8 9 10 ...\n $ type  : chr [1:360] \"No Music\" \"Pop Music\" \"Pop Music\" \"Pop Music\" ...\n $ amount: num [1:360] 23.1 20.6 19.2 16.7 25.9 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   id = col_double(),\n  ..   type = col_character(),\n  ..   amount = col_double()\n  .. )\n - attr(*, \"problems\")=<externalptr> \n```\n\n\n:::\n\n```{.r .cell-code}\n#now lets look at top 6 rows (or the head) of the dataset\nhead(rest_spend)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n     id type            amount\n  <dbl> <chr>            <dbl>\n1     1 No Music          23.1\n2     2 Pop Music         20.6\n3     3 Pop Music         19.2\n4     4 Pop Music         16.7\n5     5 Classical Music   25.9\n6     6 Pop Music         19.3\n```\n\n\n:::\n\n```{.r .cell-code}\n#check for NAs - there are none - all FALSE\ntable(is.na(rest_spend))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nFALSE \n 1080 \n```\n\n\n:::\n:::\n\n\n\n\nLet's start with the music 'type' variable. This should be coded as factor (`<fctr>`), but can see from above it is currently coded as a character (`<chr>`). Let's fix this, and rename 'type' to 'music' and remove the word 'music' form the labels of the levels of the factor to avoid repetition whilst we're at it:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrest_spend <- rest_spend %>%\n    mutate(\n        type = factor(type, \n                           levels = c(\"No Music\", \"Pop Music\", \"Classical Music\"),\n                           labels = c(\"None\", \"Pop\", \"Classical\"))) %>%\n        rename(music = type)\n```\n:::\n\n\n\n\nNext, let's look at the 'amount' variable. Here we want to check for impossible values - i.e., cannot have a negative £ per head.\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# all looks ok - min and max both positive values\ndescribe(rest_spend$amount)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   vars   n  mean   sd median trimmed  mad   min   max range  skew kurtosis\nX1    1 360 22.74 3.01  22.88   22.81 3.06 13.71 33.43 19.72 -0.19      0.2\n     se\nX1 0.16\n```\n\n\n:::\n:::\n\n\n\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nAll participant data was complete (no missing values), with restaurant spending per person within possible ranges. Music type was coded as a factor with three levels (none, pop, and classical).\n\n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<br>\n\n\n\n<div class='question-begin'>Question 2</div><div class='question-body'>\n\n\n\nProvide a brief overview of the study design and data, before detailing your analysis plan to address the research question.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\n- Give the reader some background on the context of the study\n- State what type of analysis you will conduct in order to address the research question\n- Specify the model to be fitted to address the research question (note that you will need to specify the reference level of your categorical variable)\n- Specify your chosen significance ($\\alpha$) level\n- State your hypotheses\n\nMuch of the information required can be found in the [Study Overview] codebook. The [statistical models](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#statistical-models) flashcards may also be useful to refer to. \n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-4' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-4', 'sol-start-4')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-4\" style=\"display: none;\">\n\n\n\nThe `rest_spend` dataset contained information on 360 hypothetical participants who took part in an experiment examining the effect of music on customer spending in a restaurant setting. Using a between-subjects design, the researchers had one of three types of music - classical, pop, or silence - played in a restaurant over 18 successive evenings. As well as recording the type of music played during the meal, the researchers also recorded the average spend per person (in £). \n\nAll participant data was complete (no missing values), with restaurant spending per person within possible ranges. Music type was coded as a factor with three levels (none, pop, and classical).\n\nBoxplots will be used to visualise the associations among spend per person and background music conditions. To address the research question of whether spend per person differs by background music condition, we can specify our model and coding scheme as follows:\n\n$$\n\\text{Restaurant Spending} = \\beta_0 + \\beta_1 \\cdot \\text{Effect Level 1} + \\beta_2 \\cdot \\text{Effect Level 2} + \\epsilon\n$$\n\nwhere:\n\n$$\n\\text{Effect Level 1} = \\begin{cases}\n1  & \\text{if observation is from category 1} \\\\\n0  & \\text{if observation is from category 2} \\\\\n-1 & \\text{otherwise}\n\\end{cases}\n$$\n\n$$\n\\text{Effect Level 2} = \\begin{cases}\n0  & \\text{if observation is from category 1} \\\\\n1  & \\text{if observation is from category 2} \\\\\n-1 & \\text{otherwise}\n\\end{cases}\n$$\n\nSchematically:\n\n$$\n\\begin{matrix}\n\\textbf{Level}           & \\textbf{Effect Level 1} & \\textbf{Effect Level 2} \\\\\n\\hline\n\\text{None}              & 1   & 0    \\\\\n\\text{Pop}               & 0   & 1    \\\\\n\\text{Classical}         & -1  & -1\n\\end{matrix}\n$$\n\nEffects will be considered statistically significant at $\\alpha=.05$\n\nOur hypotheses are:\n\n$H_0:$ All $\\beta_j = 0$ (for $j = 1, 2$)\n\nThere are no differences in average spend per person based on background music conditions.\n\n$H_1:$ At least one $\\beta_j \\neq  0$ (for $j = 1, 2$)\n\nThere are differences in average spend per person based on background music conditions. \n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Descriptive Statistics & Visualisations\n\n\n\n<div class='question-begin'>Question 3</div><div class='question-body'>\n\n\n\nProvide a table of descriptive statistics and visualise your data.\n\nRemember to interpret your plot in the context of the study (i.e., comment on any observed differences among treatment groups). \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nReview the many ways to numerically and visually explore your data by reading over the [data exploration flashcards](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#data-exploration).\n\nFor examples, see flashcards on [descriptives statistics tables - categorical and numeric values examples](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#data-exploration) and [data visualisation - bivariate examples](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#visual-exploration), paying particular attention to the type of data that you're working with. \n\nA nice additional step you could take with your data visialisation would be to add a line representing the grand mean (the mean of all the observations). You can do this by specifying `geom_hline()`. Within this argument, you will need to specify where the horizontal line should cut the y-axis via `yintercept = `. You might want to specify line: type (via `lty = `), width (via `lwd = `), and colour (via `colour = `). Make sure to comment on any observed differences among the conditions in comparison to the grand mean.\n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-5' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-5', 'sol-start-5')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-5\" style=\"display: none;\">\n\n\n\n::: {.panel-tabset}\n\n## Numeric\n\nDescriptive statistics presented in a well formatted table, grouped by music condition:\n\n\n\n\n::: {#tbl-music-descript .cell layout-align=\"center\" tbl-cap='Restaurant Spending & Music Type Descriptive Statistics'}\n\n```{.r .cell-code}\nrest_spend %>% \n            group_by(music) %>%\n            summarise(n = n(),\n                      Mean = mean(amount),\n                      SD = sd(amount),\n                      Min = min(amount),\n                      Max = max(amount)) %>% \n            kable(caption = \"Restaurant Spending & Music Type Descriptive Statistics\", digits = 2) %>%\n            kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n<caption>Restaurant Spending &amp; Music Type Descriptive Statistics</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> music </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> Mean </th>\n   <th style=\"text-align:right;\"> SD </th>\n   <th style=\"text-align:right;\"> Min </th>\n   <th style=\"text-align:right;\"> Max </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> None </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 22.14 </td>\n   <td style=\"text-align:right;\"> 3.44 </td>\n   <td style=\"text-align:right;\"> 13.71 </td>\n   <td style=\"text-align:right;\"> 33.43 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Pop </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 21.90 </td>\n   <td style=\"text-align:right;\"> 2.97 </td>\n   <td style=\"text-align:right;\"> 15.60 </td>\n   <td style=\"text-align:right;\"> 28.94 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Classical </td>\n   <td style=\"text-align:right;\"> 120 </td>\n   <td style=\"text-align:right;\"> 24.17 </td>\n   <td style=\"text-align:right;\"> 1.89 </td>\n   <td style=\"text-align:right;\"> 19.05 </td>\n   <td style=\"text-align:right;\"> 28.02 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n## Visual \n\nSince we have a continuous outcome and a categorical predictor - a boxplot would be most appropriate for visualisations:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = rest_spend, aes(x = music, y = amount, fill = music)) +\n  geom_boxplot() +\n    geom_hline(yintercept = mean(rest_spend$amount), lty = 2, lwd = 1, colour = \"darkgrey\") +\n  labs(x = 'Background Music Type', y = 'Restaurant Spending (in GBP)')\n```\n\n::: {.cell-output-display}\n![Associations between Restaurant Spending and Music Type](1_07_effects_files/figure-html/fig-music-desc-1.png){#fig-music-desc fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n:::\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\n+ There are three types of music groups ($g = 3$), where there is one group for each music type: “Classical,” “None,” “Pop\". Each group has 120 observations. \n+ It seems that customers in the None and Pop music conditions had a similar average restaurant spending\n+ The average restaurant spending seems to be higher for those who had in the Classical music condition in comparison to customers in both the None and Pop music type conditions. \n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Model Fitting & Interpretation \n\n\n\n<div class='question-begin'>Question 4</div><div class='question-body'>\n\n\n\nSet the sum to zero constraint for the factor of background music.\n\nFit the specified model, and assign it the name \"mdl_stz\".\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nWe can switch between side-constraints using the following code:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#use dummy coding\ncontrasts(rest_spend$music) <- \"contr.treatment\"\n\n#use sum-to-zero coding\ncontrasts(rest_spend$music) <- \"contr.sum\"\n```\n:::\n\n\n\n\nFor more information, see the [dummy vs effects coding flashcard](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#numeric-outcomes-categorical-predictors).\n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-6' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-6', 'sol-start-6')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-6\" style=\"display: none;\">\n\n\n\n::: {.panel-tabset}\n\n## Sum to Zero Constraint\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncontrasts(rest_spend$music) <- \"contr.sum\"\n\n#check coding matches our table above:\ncontrasts(rest_spend$music)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n          [,1] [,2]\nNone         1    0\nPop          0    1\nClassical   -1   -1\n```\n\n\n:::\n:::\n\n\n\n\n\n## Fit Model \n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmdl_stz <- lm(amount ~ music, data = rest_spend)\n\n#check summary\nsummary(mdl_stz)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = amount ~ music, data = rest_spend)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-8.433 -1.886  0.127  1.755 11.285 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  22.7382     0.1497 151.856  < 2e-16 ***\nmusic1       -0.5968     0.2118  -2.818   0.0051 ** \nmusic2       -0.8392     0.2118  -3.963 8.94e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.841 on 357 degrees of freedom\nMultiple R-squared:  0.1151,\tAdjusted R-squared:  0.1101 \nF-statistic: 23.21 on 2 and 357 DF,  p-value: 3.335e-10\n```\n\n\n:::\n:::\n\n\n\n\n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<br> \n\n\n\n<div class='question-begin'>Question 5</div><div class='question-body'>\n\n\n\nInterpret your coefficients in the context of the study.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nRecall that under this constraint the interpretation of the coefficients becomes:\n\n- $\\beta_0$ represents the grand mean\n- $\\beta_i$ the effect due to group $i$ --- that is, the mean response in group $i$ minus the grand mean\n\nFor more information, see the [numeric outcomes & categorical predictors flashcards](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#numeric-outcomes-categorical-predictors).\n\n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-7' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-7', 'sol-start-7')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-7\" style=\"display: none;\">\n\n\n\nLet's first map our coefficients and estimates:\n\n| Coefficient | Estimate | Relation between $\\beta$ and $\\mu$ |\n|:-:|:-:|:-:|\n| (Intercept)   |  22.7382 | $\\beta_0 = \\frac{\\mu_1 + \\mu_2 + \\mu_3}{3} = \\mu$\n| music1        | -0.5968  | $\\beta_1 = \\mu_1 - \\mu$|\n| music2        | -0.8392  | $\\beta_2 = \\mu_2 - \\mu$ |\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\n+ The estimate corresponding to `(Intercept)` contains $\\beta_0 = \\mu = 22.7382$. This value represents the grand mean of the data. The estimated average spending for customers across background music conditions is approximately £22.74.\n\n+ The next estimate corresponds to `music1` and is $\\hat \\beta_1 = -0.5968$. The difference in mean spending between `None` $(\\hat \\mu_1)$ and the grand mean $(\\hat \\mu_0)$ was estimated to be $-0.5968$. In other words, people with no music playing in the background seem to spend approximately £0.60 less than average, and spent $22.7382 + (-0.5968) = £22.14$ in total.  \n\n+ The estimate corresponding to `music2` is $\\hat \\beta_2 = -0.8392$. The difference in mean spending between `Pop` $(\\hat \\mu_2)$ and the grand mean $(\\hat \\mu_0)$ was estimated to be $-0.8392$.  In other words, customers with Pop music playing in the background seem to spend approximately £0.84 less than average, and spent $22.7382 + (-0.8392) = £21.90$ in total. \n\n+ The estimate for `music3`, representing the difference of “Classical” to the grand mean is *not shown* by `summary()`. Because of the side-constraint, we know that $\\mu_3 = \\beta_0 - (\\beta_1 + \\beta_2)$. The difference in mean spending between `Classical` and the grand mean was estimated to be $-(-0.5968 + -0.8392) = 1.436$. In other words, customers with Classical music playing in the background seem to spend approximately £1.44 more than average, and spent $22.7382 - (-0.5968 + -0.8392) = £24.17$ in total.\n\n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<br>\n\n\n\n<div class='question-begin'>Question 6</div><div class='question-body'>\n\n\n\nObtain the estimated (or predicted) group means for the “None,” “Pop,” and “Classical” background music conditions by using the `predict()` function.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nStep 1: Define a data frame via `tibble()` with a column having the same name as the factor in the fitted model (i.e., music). Then, specify all the groups (i.e., levels) for which you would like the predicted mean.\n\nStep 2: Pass the data frame to the predict function using the `newdata = ` argument. The `predict()` function will match the column named type with the predictor called type in the fitted model 'mdl_stz'.\n\nIf you're still not sure, it might be helpful to review the [predicted values flashcards](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#model-predicted-values-residuals).\n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-8' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-8', 'sol-start-8')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-8\" style=\"display: none;\">\n\n\n\nStep 1:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nquery_groups <- tibble(music = c(\"None\", \"Pop\", \"Classical\"))\nquery_groups\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 1\n  music    \n  <chr>    \n1 None     \n2 Pop      \n3 Classical\n```\n\n\n:::\n:::\n\n\n\n\nStep 2:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npredict(mdl_stz, newdata = query_groups)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       1        2        3 \n22.14139 21.89894 24.17414 \n```\n\n\n:::\n:::\n\n\n\n\n+ Predicted mean of \"None\" = $\\hat \\mu_\\text{None}$ = 22.14\n+ Predicted mean of \"Pop\" = $\\hat \\mu_\\text{Pop}$ = 21.90\n+ Predicted mean of \"Classical\" = $\\hat \\mu_\\text{Classical}$ = 24.17\n\nWe can see that these predicted means match our model estimates in Q5. \n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Planned Comparisons / Contrasts\n\n\n\n<div class='question-begin'>Question 7</div><div class='question-body'>\n\n\n\nFormally state the planned comparison that the researchers were interested in as a testable hypothesis. \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nSee the [manual contrasts flashcards](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#manual-contrasts). \n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-9' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-9', 'sol-start-9')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-9\" style=\"display: none;\">\n\n\n\nRecall that the researchers were also interested in addressing the following question:\n\n> Whether having some kind of music playing (i.e., pop or classical), rather than no music (i.e., none), resulted in a difference in spending\n\nWe can specify the hypothesis as follows:\n\n$$\n\\begin{aligned}\n    \\quad H_0 &: \\mu_\\text{No Music} = \\mu_\\text{Music} \\\\\n    \\quad H_0 &: \\mu_\\text{None} = \\frac{1}{2} (\\mu_\\text{Pop} + \\mu_\\text{Classical}) \\\\\n\\\\\n    \\quad H_1 &: \\mu_\\text{No Music} \\neq \\mu_\\text{Music} \\\\\n    \\quad H_1 &: \\mu_\\text{No Music} \\neq \\frac{1}{2} (\\mu_\\text{Pop} + \\mu_\\text{Classical}) \\\\\n\\\\ \n\\end{aligned}\n$$\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<br> \n\n\n\n<div class='question-begin'>Question 8</div><div class='question-body'>\n\n\n\nAfter checking the levels of the factor `music`, use `emmeans()` to obtain the estimated treatment means and uncertainties for your factor. \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nSee the [manual contrasts flashcards](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#manual-contrasts). \n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-10' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-10', 'sol-start-10')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-10\" style=\"display: none;\">\n\n\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlevels(rest_spend$music)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"None\"      \"Pop\"       \"Classical\"\n```\n\n\n:::\n:::\n\n\n\n\nUse the `emmeans()` to get the estimated means of our groups:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmusic_mean <- emmeans(mdl_stz, ~ music)\nmusic_mean\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n music     emmean    SE  df lower.CL upper.CL\n None        22.1 0.259 357     21.6     22.7\n Pop         21.9 0.259 357     21.4     22.4\n Classical   24.2 0.259 357     23.7     24.7\n\nConfidence level used: 0.95 \n```\n\n\n:::\n\n```{.r .cell-code}\nplot(music_mean)\n```\n\n::: {.cell-output-display}\n![](1_07_effects_files/figure-html/unnamed-chunk-15-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<br>\n\n\n\n<div class='question-begin'>Question 9</div><div class='question-body'>\n\n\n\nSpecify the coefficients of the comparisons and run the contrast analysis, obtaining 95% confidence intervals. \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nSee the [manual contrasts flashcards](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#manual-contrasts).\n\nRemember that ordering matters here - look again at the output of `levels(rest_spend$music)` as this will help you when assigning your weights. \n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-11' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-11', 'sol-start-11')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-11\" style=\"display: none;\">\n\n\n\nAs shown above via `levels()`, the ordering of the treatment factor is:\n\n1. None (no music)\n2. Pop (music)\n3. Classical (music)\n\nFrom this ordering, we can specify our weights - based on the hypothesis, lets assign positive values to the music conditions:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmusic_comp <- list(\"No Music - Music\" = c(-1, 1/2, 1/2))\n```\n:::\n\n\n\n\nNow lets run our contrast analysis and get confidence intervals:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#run contrast analysis\nmusic_comp_test <- contrast(music_mean, method = music_comp)\n\n#examine output\nmusic_comp_test\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n contrast         estimate    SE  df t.ratio p.value\n No Music - Music    0.895 0.318 357   2.818  0.0051\n```\n\n\n:::\n\n```{.r .cell-code}\n#obtain confidence intervals\nconfint(music_comp_test)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n contrast         estimate    SE  df lower.CL upper.CL\n No Music - Music    0.895 0.318 357     0.27     1.52\n\nConfidence level used: 0.95 \n```\n\n\n:::\n:::\n\n\n\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<br>\n\n\n\n<div class='question-begin'>Question 10</div><div class='question-body'>\n\n\n\nInterpret the results of the contrast analysis in the context of the researchers hypotheses.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nSee the [manual contrasts flashcards](https://uoepsy.github.io/dapr2/2425/labs/1_b4_reading.html#manual-contrasts).\n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-12' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-12', 'sol-start-12')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-12\" style=\"display: none;\">\n\n\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nWe performed a test against $H_0: \\mu_1 - \\frac{1}{2}(\\mu_2 + \\mu_3) = 0$. At the 5\\% significance level, there was evidence that restaurant spending per person for those who were in the no music condition was significantly different from those in a music condition ($t(357) = 2.82, p = .005, \\text{two-sided})$, and this difference was estimated to be 0.90. We are 95\\% confident that those who heard some form of background music spent on average, between £0.27 and £1.52 more per person on their meal than those who heard no background music $(CI_{95}[0.27, 1.52])$.\n\n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Compile Report\n\n\n\n<div class='question-begin'>Compile Report</div><div class='question-body'>\n\n  \n\nKnit your report to PDF, and check over your work. To do so, you should make sure:\n\n- Only the output you want your reader to see is visible (e.g., do you want to hide your code?)\n- Check that the **tinytex** package is installed\n- Ensure that the ‘yaml’ (bit at the very top of your document) looks something like this:\n\n```{}\n---\ntitle: \"this is my report title\"\nauthor: \"B1234506\"\ndate: \"07/09/2024\"\noutput: bookdown::pdf_document2\n---\n```\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# What to do if you cannot knit to PDF\nIf you are having issues knitting directly to PDF, try the following:  \n\n- Knit to HTML file  \n- Open your HTML in a web-browser (e.g. Chrome, Firefox)  \n- Print to PDF (Ctrl+P, then choose to save to PDF)  \n- Open file to check formatting\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# Hiding Code and/or Output\n\n:::{.panel-tabset}\n## Hiding R Code\n\nTo not show the code of an R code chunk, and only show the output, write:\n\n````\n```{{r, echo=FALSE}}\n# code goes here\n```\n````\n\n## Hiding R Output\n\nTo show the code of an R code chunk, but hide the output, write:\n\n````\n```{{r, results='hide'}}\n# code goes here\n```\n````\n\n## Hiding R Code and Output\n\nTo hide both code and output of an R code chunk, write:\n\n````\n```{{r, include=FALSE}}\n# code goes here\n```\n````\n:::\n\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Tinytex\nYou must make sure you have **tinytex** installed in R so that you can “Knit” your Rmd document to a PDF file:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ninstall.packages(\"tinytex\")\ntinytex::install_tinytex()\n```\n:::\n\n\n\n\n:::\n\n\n\n</div><p class=\"question-end\"></p>\n\n\n\n\n\n<div class=\"solution-begin\"><span id='sol-start-13' class=\"fa-solid fa-circle-right solution-icon clickable\" onclick=\"toggle_visibility('sol-body-13', 'sol-start-13')\">  Solution </span></div><div class=\"solution-body\" id = \"sol-body-13\" style=\"display: none;\">\n\n\n\nYou should end up with a PDF file. If you have followed the above instructions and still have issues with knitting, speak with a Tutor. \n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n",
    "supporting": [
      "1_07_effects_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}