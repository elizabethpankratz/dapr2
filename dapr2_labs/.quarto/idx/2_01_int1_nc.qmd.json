{"title":"Interactions I: Num x Cat","markdown":{"yaml":{"title":"Interactions I: Num x Cat","link-citations":true,"params":{"SHOW_SOLS":true,"TOGGLE":true},"editor_options":{"chunk_output_type":"console"}},"headingText":"<i class=\"fa fa-graduation-cap\"></i> Learning Objectives","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nsource('assets/setup.R')\nlibrary(tidyverse)\nlibrary(psych)\nlibrary(sjPlot)\nlibrary(patchwork)\nlibrary(kableExtra) \nlibrary(plotly)\nlibrary(pander)\nset.seed(953)\n```\n\n:::lo\nAt the end of this lab, you will:\n\n1. Understand the concept of an interaction\n2. Be able to interpret the meaning of a numeric $\\times$ categorical interaction\n3. Be able to visualize and probe interactions\n\n### <i class=\"fa fa-check-square-o fa-2\"></i> What You Need\n\n1. Be up to date with lectures\n2. Have completed all labs from Semester 1\n\n### <i class=\"fab fa-r-project\"></i> Required R Packages\nRemember to load all packages within a code chunk at the start of your RMarkdown file using `library()`. If you do not have a package and need to install, do so within the console using `install.packages(\" \")`. For further guidance on installing/updating packages, see Section C [here](https://uoepsy.github.io/files/install-update-r#update-pkgs). \n\nFor this lab, you will need to load the following package(s):\n\n* **tidyverse** \n* **kableExtra**\n* **psych** \n* **sjPlot**\n* **patchwork** \n* **sandwich**\n* **interactions**\n\n### <i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i> Presenting Results\nAll results should be presented following [APA guidelines](https://apastyle.apa.org/instructional-aids/numbers-statistics-guide.pdf). If you need a reminder on how to hide code, format tables/plots, etc., make sure to review the [rmd bootcamp](https://uoepsy.github.io//rmd-bootcamp/).\n\nThe example write-up sections included as part of the solutions are **not perfect** - they instead should give you a good example of what information you should include and how to structure this. Note that you must **not** copy any of the write-ups included below for future reports - if you do, you will be committing plagiarism, and this type of academic misconduct is taken very seriously by the University. You can find out more [here](https://www.ed.ac.uk/academic-services/students/conduct/academic-misconduct).\n\n### <i class=\"fa fa-file\"></i> Lab Data\nYou can download the data required for this lab [here](https://uoepsy.github.io/data/wellbeing_rural.csv) or read it in via this link https://uoepsy.github.io/data/wellbeing_rural.csv \n\n:::\n\n# Study Overview {#sec-studyview} \n\n> **Research Question** \n>\n> Does the association between wellbeing and the number of social interactions differ between rural and non-rural residents?  \n\n`r optbegin(\"Wellbeing/Rurality data codebook.\", olabel=FALSE, toggle=params$TOGGLE)` \n\n__Background__\n\nResearchers were specifically interested in how the number of social interactions influenced mental health and wellbeing differently for those living in rural communities compared to those in cities and suburbs. They wanted to assess whether the effect of social interactions on wellbeing _was moderated by_ (depends upon) whether or not a person lived in a rural area.\n\n\n__Description__\n\nFrom the Edinburgh & Lothians, 100 city/suburb residences and 100 rural residences were chosen at random and contacted to participate in the study. The Warwick-Edinburgh Mental Wellbeing Scale (WEMWBS), was used to measure mental health and well-being. \n\nParticipants filled out a questionnaire including items concerning: estimated average number of hours spent outdoors each week, estimated average number of social interactions each week (whether on-line or in-person), whether a daily routine is followed (yes/no). For those respondents who had an activity tracker app or smart watch, they were asked to provide their average weekly number of steps.  \n  \n  \n__Data Dictionary__\n\nThe data in `wellbeing_rural.csv` contain seven attributes collected from a random sample of $n=200$ hypothetical residents over Edinburgh & Lothians, and include: \n\n```{r echo=FALSE, message=FALSE, warning=FALSE}\nmwdata  <- read_csv(\"https://uoepsy.github.io/data/wellbeing_rural.csv\")\ntibble(\nvariable = names(mwdata),\ndescription = c(\"Age in years of respondent\",\"Self report estimated number of hours per week spent outdoors\", \"Self report estimated number of social interactions per week (both online and in-person)\", \"Binary 1=Yes/0=No response to the question 'Do you follow a daily routine throughout the week?'\", \"Warwick-Edinburgh Mental Wellbeing Scale (WEMWBS), a self-report measure of mental health and well-being. The scale is scored by summing responses to each item, with items answered on a 1 to 5 Likert scale. The minimum scale score is 14 and the maximum is 70\", \"Location of primary residence (City, Suburb, Rural)\", \"Average weekly number of steps in thousands (as given by activity tracker if available)\")\n) %>% gt::gt()\n```\n  \n  \n__Preview__\n\nThe first six rows of the data are:\n\n```{r echo=FALSE, message=FALSE}\nread_csv('https://uoepsy.github.io/data/wellbeing_rural.csv') %>% head %>% gt::gt()\n```\n  \n`r optend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Setup\n\n`r qbegin(\"Setup\", qlabel = FALSE)`  \n\n1. Create a new RMarkdown file\n2. Load the required package(s)\n3. Read the wellbeing_rural dataset into R, assigning it to an object named `mwdata`\n \n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n```{r message=FALSE}\n#Loading the required package(s)\nlibrary(tidyverse)\nlibrary(kableExtra)\nlibrary(psych)\nlibrary(sjPlot)\nlibrary(patchwork)\nlibrary(sandwich)\nlibrary(interactions)\n\n#Reading in data and storing in object named 'mwdata'\nmwdata <- read_csv(\"https://uoepsy.github.io/data/wellbeing_rural.csv\")\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>  \n\n\n# Exercises \n\n## Study & Analysis Plan Overview \n\n`r qbegin(1)`\n\nProvide a brief overview of the study design and data, before detailing your analysis plan to address the research question.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\n- State what type of analysis you will conduct in order to address the research question\n- Specify the model to be fitted to address the research question (note that you will need to specify the reference level of your categorical variable)\n- Specify your chosen significance ($\\alpha$) level\n- State your hypotheses\n\nMuch of the information required can be found in the [Study Overview] codebook.\n\n:::\n\n:::frame\n\nIf we fit the interaction `x1:x2`, we almost always want to also fit the separate effects `x1` and `x2`:\n\n:::quote\n\"Except in special circumstances, a model including a product term for interaction between two explanatory variables should also include terms with each of the explanatory variables individually, even though their coefficients may not be significantly different from zero. Following this rule avoids the logical inconsistency of saying that the effect of $X_1$ depends on the level of $X_2$ but that there is no effect of $X_1$.\"  \n--- @Ramsey2012\n:::\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nThe `mwdata` dataset contained information on 200 hypothetical participants who lived in Edinburgh & Lothians area. Using a between-subjects design, the researchers collected information on participants' wellbeing (measured via WEMWBS), outdoor time (hours per week), social interactions (number per week), routine (whether or not one was followed), location of residence (City, Suburb, or Rural), average weekly steps (in thousands), and age (in years).\n\nDensity plots and histograms will be used to visualise the marginal distributions of wellbeing and social interactions, and the strength of association between the two variables estimated via the correlation coefficient. To understand how these associations differ between rural and non-rural locations, scatterplots will be used. \n\nTo address the research question of whether the association between the number of social interactions and wellbeing differs between rural and non-rural residents, we are going to fit the following interaction model (where not rural will be specified as the reference group for location). \n\n$$\n\\begin{align}\n\\text{Wellbeing} ~=~ & \\beta_0 + \\beta_1 \\cdot Social~Interactions + \\beta_2 \\cdot Location_{Rural} \\\\\n& + \\beta_3 \\cdot (Social~Interactions \\cdot Location_{Rural}) + \\epsilon \\\\\n\\end{align}\n\\quad \n$$\n\nEffects will be considered statistically significant at $\\alpha=.05$\n\nOur hypotheses are:\n\n$H_0: \\beta_3 = 0$\n\nThe association between wellbeing and social interactions is not moderated by whether or not a person lives in a rural area. \n\n$H_1: \\beta_3 \\neq 0$\n\nThe association between wellbeing and social interactions is moderated by whether or not a person lives in a rural area. \n\n`r solend()`\n\n<br>\n\n`r qbegin(2)`\n\nCheck coding of variables (e.g., that categorical variables are coded as factors). \n\nNote that the \"location\" variable currently has three levels (Rural/Suburb/City). In order to address the research question, we only want two (Rural/Not Rural) locations - you will need to fix this.\n\nAs specified in Q1, we want 'not rural' as the reference group, so make sure to specify this.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\nOne way to do this would be to use `ifelse()` to define a variable which takes one value (\"Rural\") if the observation meets from some condition, or another value (\"Not Rural\") if it does not. \n\nType `?ifelse` in the *console* if you want to see the help function. You can use it to add a new variable either inside `mutate()`, or using `data$new_variable_name <- ifelse(test, x, y)` syntax.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nCreate a new variable for Rural/Not Rural, and then assign as a factor:\n```{r}\n#if location is rural, assign name 'rural'. If another value (i.e., city or suburb) assign name 'not rural'.\n# In other words, if location = rural assign name rural; if location != rural then assign name not rural.\nmwdata <- mwdata %>% \n  mutate(\n    isRural = ifelse(location == \"rural\", \"rural\", \"not rural\"),\n    isRural = as_factor(isRural)\n  )\n```\n\nCheck coding of variables within `mwdata` and ensure `isRural` is a factor with two levels, 'rural' and 'not rural':\n```{r}\n# check structure of dataset (alternatively run is.factor() for specific variable)\nstr(mwdata) \n\n#check that isRural is now a factor\nis.factor(mwdata$isRural) \n```\n\n```{r}\n#specify 'not rural' as reference group\nmwdata$isRural <- relevel(mwdata$isRural, 'not rural')\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Descriptive Statistics & Visualisations\n\n`r qbegin(3)`\n\nProvide a table of descriptive statistics and visualise your data.\n\nIn particular:\n\n1. Explore the associations among the variables included in your analysis\n2. Produce a visualisation of the association between weekly number of social interactions and well-being, with separate _facets_ for rural vs non-rural respondents **OR** with _different colours_ for each level of the `isRural` variable.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\n1. For your table of descriptive statistics, both the `group_by()` and `summarise()` functions will come in handy here.\n2. If you use the `select()` function and get an error along the lines of `Error in select...unused arguments...`, you will need to specify `dplyr::select()` (this just tells R which package to use the select function from).\n3. The `pairs.panels()` function from the `psych` package can plot all variables in a dataset against one another. This will save you the time you would have spent creating individual plots, but is only useful for *continuous* variables.  \n4. To include facets, within your `ggplot()` argument you will need to specify `+ facet_wrap()` in order to produce facets for each location. It would also be useful to specify `geom_smooth(method=\"lm\")`.\n5. To include different colours for each location, you will need to specify `colour = isRural` within your `ggplot()` argument, as well as `+ scale_colour_discrete()` to state the `name =` of your legend and the `labels =` associated with each coloured line.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.panel-tabset}\n\n## Numeric\nWe can present our summary statistics for wellbeing and social interactions grouped by location in a well formatted table using `kable()`: \n\n```{r}\n#| label: tbl-w1-desc\n#| tbl-cap: Wellbeing, Social Interactions, and Location Descriptive Statistics\nmwdata %>%\n    select(isRural, wellbeing, social_int) %>%\n    group_by(isRural) %>%\n    summarise(Wellbeing_M = mean(wellbeing),\n              Wellbeing_SD = sd(wellbeing),\n              SocialInt_M = mean(social_int),\n              SocialInt_SD = sd(social_int)) %>%\n    kable(caption = \"Wellbeing, Social Interactions, and Location Descriptive Statistics\", align = \"c\", digits = 2, booktabs = TRUE) %>%\n    kable_styling(full_width = FALSE)\n```\n\n\n::: {.callout-important icon=false collapse=true}\n# A quick non-APA style table - i.e., not for use in reports\nFor a quick overview of several summary statistics at once for all columns of our dataframe, but separately for each level of location (i.e.,rural and non-rural), you can use `describeBy()` from the **psych** package:\n\n```{r}\ndescribeBy(mwdata, mwdata$isRural)\n```\n\n:::\n\n## Visual \n\n::: {.panel-tabset}\n\n### Wellbeing & Social Interactions\n\nLet's first plot the continuous variables included within our model (note that we could use this for the whole dataset, but we don't want to include irrelevant / non-continuous variables):\n\n```{r}\nmwdata %>% \n  select(wellbeing, social_int) %>%\n  pairs.panels()\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nWellbeing and social interactions appear to follow unimodal distributions. There was a weak, positive association between wellbeing and social interactions $(r = .24)$. \n\n::: \n\n### Wellbeing & Location\n\nNow lets look at wellbeing scores by location:\n\n```{r}\nggplot(data = mwdata, aes(x = isRural, y = wellbeing)) +\n  geom_boxplot() + \n  labs(x = \"Location\", y = \"Wellbeing (WEMWBS Scores)\")\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThose in rural locations appear to have lower wellbeing scores in comparison to those in non-rural locations.\n\n::: \n\n### Wellbeing, Social Interactions & Location\n\nNext, lets produce our plots with a facet for rural vs non-rural residents: \n\n```{r message=FALSE, warning = FALSE}\nggplot(data = mwdata, aes(x = social_int, y = wellbeing)) +\n  geom_point() +\n  geom_smooth(method=\"lm\", se=FALSE) +\n  facet_wrap(~isRural, labeller = \"label_both\") + \n  labs(x = \"Social Interactions (number per week)\", y = \"Wellbeing (WEMWBS Scores)\")\n```\n\nOr instead of facets, we could use different colors for each location (rural vs non-rural):\n\n```{r message=FALSE, warning = FALSE}\nggplot(data = mwdata, aes(x = social_int, y = wellbeing, colour = isRural)) +\n  geom_point() + \n  geom_smooth(method=\"lm\", se=FALSE) +\n    scale_colour_discrete(\n    name =\"Location\",\n    labels=c(\"Not Rural\", \"Rural\")) + \n    labs(x = \"Social Interactions (number per week)\", y = \"Wellbeing (WEMWBS Scores)\")\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThose in non-rural locations appear to have higher wellbeing scores across almost all levels of social interactions. The slopes appear to be different for each location, where the greatest difference in wellbeing scores by location is most visible the highest number of social interactions. This suggests that there may be an interaction. \n\n::: \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### How do we know there might be an interaction? \n\nThe lines in the two plots above do not run in *parallel* - this suggested the presence of an interaction. Specifically in our example, the non-parallel lines suggested an interaction effect based on location, as the number of social interactions did not appear to have the same influence on rural and non-rural residents' wellbeing scores. \n\nHowever, the only way we can determine whether there is actually an interaction is by including an interaction term in our model, and testing this. \n\n:::\n\n:::\n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Model Fitting & Interpretation \n\n`r qbegin(4)`\n\nFit your model using `lm()`, and assign it as an object with the name \"rural_mod\".   \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nWhen fitting a regression model in `R` with two explanatory variables A and B, and their interaction, these three are equivalent:  \n\n+ y ~ A + B + A:B\n+ y ~ A + B + A*B\n+ y ~ A*B  \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#fit model including interaction between social_int and isRural\nrural_mod <- lm(wellbeing ~  social_int * isRural, data = mwdata)\n\n#check model output\nsummary(rural_mod)\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(5)`  \n\nLook at the parameter estimates from your model, and write a description of what each one corresponds to on the plot shown in @fig-annotate-int (it may help to sketch out the plot yourself and annotate it, and refer to the drop down options below).  \n\n```{r fig-annotate-int, echo=FALSE, message = FALSE, fig.cap=\"Multiple regression model: Wellbeing ~ Social Interactions * is Rural<br><small>Note that the dashed lines represent predicted values below the minimum observed number of social interactions, to ensure that zero on the x-axis is visible</small>\"}\n#| label: fig-annotate-int\n#| fig-cap: \"Multiple regression model: Wellbeing ~ Social Interactions * is Rural\"\nnd = expand_grid(social_int=0:13,isRural=c(\"rural\",\"not rural\"))\nnd = nd %>% mutate(wellbeing = predict(rural_mod, newdata = .))\nsjPlot::plot_model(rural_mod, type=\"int\")+\n  scale_fill_manual(NULL, values=c(NA,NA))+xlim(0,28)+\n  geom_line(inherit.aes=FALSE,data=nd,aes(x=social_int,col=isRural,y=wellbeing), lty=\"longdash\")+\n  scale_x_continuous(expand = c(0, 0)) + scale_y_continuous(expand = c(0, 1))\n```\n\n`r optbegin(\"Options for Mapping Parameter Estimates to Plot\", olabel=FALSE, toggle=params$TOGGLE)`\n\nHere are some options to choose from:\n\n+ The point at which the red line cuts the y-axis (where social_int = 0)\n+ The point at which the blue line cuts the y-axis (where social_int = 0)\n+ The vertical distance from the red to the blue line _at the y-axis_ (where social_int = 0)\n+ The vertical distance from the blue to the red line _at the y-axis_ (where social_int = 0)\n+ The vertical distance from the blue to the red line _at the center of the plot_\n+ The vertical distance from the red to the blue line _at the center of the plot_\n+ The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the red line\n+ The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the blue line\n+ How the slope of the line changes when you move from the red to the blue line\n\n`r optend()`\n\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nRecall that we can obtain our parameter estimates using various functions such as `summary()`,`coef()`, `coefficients()`, etc. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nObtain parameter estimates:\n\n```{r}\ncoefficients(rural_mod)\n```\n\n::: {.panel-tabset}\n## `(Intercept)`   \n\n$\\beta_0$ = `(Intercept)` = `r round(coef(rural_mod)[1],2)`  \n\n+ On plot: The point at which the red line cuts the y-axis.    \n+ Interpretation: The intercept, or predicted wellbeing score when the number of social interactions per week was 0, and when location was not rural.  \n    - A non-rural resident who had zero social interactions per week was expected to have a wellbeing score of `r round(coef(rural_mod)[1],2)`.  \n    \n## `social_int`   \n\n$\\beta_1$ = `social_int` = `r round(coef(rural_mod)[2],2)`  \n\n+ On plot: The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the red line.  \n+ Interpretation: The simple slope of social interactions (number per week) for location reference group (not rural).   \n    - For someone who lives in a non-rural location, every 1 additional social interaction per week was associated with a `r round(coef(rural_mod)[2],2)` point change in their wellbeing score.\n\n## `isRuralrural`   \n\n$\\beta_2$ = `isRuralrural` = `r round(coef(rural_mod)[3],2)`  \n\n+ On plot: The vertical distance from the red to the blue line _at the y-axis_ (where social_int = 0).  \n+ Interpretation: The simple effect of location (or the difference in wellbeing scores between rural and non rural residents) when number of social interactions was 0.  \n    - For residents who had zero social interactions per week, living in a rural location was associated with wellbeing scores `r round(coef(rural_mod)[3],2)` points higher than living in non-rural locations (note that this difference was not significantly different from zero).  \n\n## `social_int:isRuralrural`   \n\n$\\beta_3$ = `social_int:isRuralrural` = `r round(coef(rural_mod)[4],2)`  \n\n+ On plot: How the slope of the line differs when you move from the red to the blue line.    \n+ Interpretation: The interaction between social interactions (number per week) and location (rural/not rural). This is the estimated difference in simple slopes of social interactions for rural vs non-rural residents.   \n    - Compared to living in non-rural locations, living in a rural location was associated with a `r round(abs(coef(rural_mod)[4]),2)` lesser increase in wellbeing scores for every every 1 additional social interaction per week.\n\n:::\n\n`r solend()`\n\n<br>\n\n`r qbegin(6)`\n\nNo participants in our dataset had zero hours of social interactions per week (the lowest was 3), and we're likely not interested in differences between rural and non-rural residents who have never interacted with others.\n\nMean center the continuous IV(s), and re-run your model with mean centered variable(s).\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nThere are a couple of different ways that we can re-centre. We could either create a new variable, named say `mc_social_int` which is `social_int - mean(social_int)` (which would therefore make everyone who had 12.06 social interactions per week be given a value of `0` in the variable), or we could do it _in_ the model:  \n\n::: {.panel-tabset}\n\n#### Creating Mean Centred Variable\n\n```{r}\n#| eval: false\nmwdata <-\n mwdata %>%\n  mutate(\n   mc_social_int = social_int - mean(social_int)\n    )\n```\n\n#### Mean Centre in Model\n\n```{r}\n#| eval: false\nrural_mod_mc <- lm(wellbeing ~ I(social_int-12.06) * isRural, data = mwdata)\n```\n\n\n::: {.callout-important icon=false collapse=true}\n##### What does the `I` do? \nWhen we specify the `I()` notation in the formula syntax of `lm()` in R, the notation simply means 'as is'. In other words, in our example, we are specifying that we want to include as a predictor variable the product of `social_int - 12.06` in our model.\n:::\n\n:::\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nCreate mean centered variable for 'social_int', named 'mc_social_int':\n\n```{r}\nmwdata <-\n mwdata %>%\n  mutate(\n   mc_social_int = social_int - mean(social_int)\n    )\n```\n\nRe-run model with 'mc_social_int':\n\n```{r}\n#fit model including interaction between social_int and isRural\nrural_mod1 <- lm(wellbeing ~  mc_social_int * isRural, data = mwdata)\n\n#check model output\nsummary(rural_mod1)\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(7)`\n\nNote any differences between the `summary()` output between the original (\"rural_mod\") and mean centred (\"rural_mod1\") models. Pay particular attention to your coefficients and their significance values. How have your coefficients changed? Why do you think these differences have been observed?\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nThese plots illustrate the difference between the \"rural_mod\" and \"rural_mod1\" models. \n\n```{r echo = FALSE, message=FALSE, warning=FALSE}\n#| label: fig-mc_difference\n#| fig-cap: \"Difference when social interactions is not vs is mean centered.<br><small>Note that the lines without SE intervals on the left plot represent \\npredicted values below the minimum observed number of social \\ninteractions, to ensure that zero on the x-axis is visible</small>\"\nnd = expand_grid(social_int=-1:13,isRural=c(\"rural\",\"not rural\"))\nnd = nd %>% mutate(wellbeing = predict(rural_mod, newdata = .))\n\np1 <- ggplot(data = mwdata, aes(x = social_int, y = wellbeing, colour = isRural)) +\n    geom_point() +\n    geom_smooth(method=\"lm\", se=TRUE) +\n    geom_smooth(method=\"lm\", se=FALSE, fullrange=TRUE) +\n    geom_point(aes(x=0, y=30.9986), colour=\"#F8766D\", size = 7) +\n    geom_point(aes(x=0, y=32.3852), colour=\"#00BFC4\", size = 7) +\n    geom_vline(xintercept = 0, colour=\"black\", linetype = \"longdash\", size = 0.5) +\n    scale_fill_manual(NULL, values=c(NA,NA))+xlim(-5,30)+\n    geom_line(inherit.aes=FALSE,data=nd,aes(x=social_int,col=isRural,y=wellbeing), lty=\"solid\", lwd=1) + \n    scale_x_continuous(expand = c(0, 0)) + scale_y_continuous(expand = c(0, 1)) +\n    labs(x = \"Social Interactions \\n(n per week)\", y = \"Wellbeing (WEMWBS Scores)\", caption = \"\") +\n    theme(plot.caption = element_text(size = 8, hjust = 0, face = \"italic\"), legend.position=\"none\") +\n    scale_colour_discrete(\n    name =\"Location\",\n    labels=c(\"Not Rural\", \"Rural\"))\n\np2 <- ggplot(data = mwdata, aes(x = mc_social_int, y = wellbeing, colour = isRural)) +\n    geom_point() +\n    geom_smooth(method=\"lm\", se=TRUE) +\n    geom_smooth(method=\"lm\", se=FALSE, fullrange=TRUE) +\n    geom_point(aes(x=0, y=38.8263), colour=\"#F8766D\", size = 7) +\n    geom_point(aes(x=0, y=34), colour=\"#00BFC4\", size = 7) +\n    geom_vline(xintercept = 0, colour=\"black\", linetype = \"longdash\", size = 0.5) +\n    scale_x_continuous(expand = c(0, 0)) + scale_y_continuous(expand = c(0, 1)) +\n    labs(x = \"Mean Centred Social \\nInteractions (n per week)\", y = \"Wellbeing (WEMWBS Scores)\") +\n    scale_colour_discrete(\n    name =\"Location\",\n    labels=c(\"Not Rural\", \"Rural\"))+\n    guides(fill=\"none\")\n\n\n(p1 | p2) + plot_layout(guides = \"collect\")\n```\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nBy comparing the `summary()` outputs, you should see that the coefficients for `(Intercept)` and `isRuralrural` differed between the two models, whilst the coefficients for `social_int` and `mc_social_int` were the same, as were the interaction estimates `social_int:isRuralrural`.\n\n::: {.callout-important icon=false collapse=true}\n## Compare Model Estimates\n\nOriginal Model - `rural_mod`:\n\n```\nCall:\nlm(formula = wellbeing ~ social_int * isRural, data = mwdata)\n\nCoefficients:\n                        Estimate Std. Error t value Pr(>|t|)    \n(Intercept)              30.9986     1.4284  21.702  < 2e-16 ***\nsocial_int                0.6488     0.1160   5.593 7.42e-08 ***\nisRuralrural              1.3866     2.0510   0.676  0.49981    \nsocial_int:isRuralrural  -0.5176     0.1615  -3.206  0.00157 ** \n```\nModel with mean centered social interactions - `rural_mod1`:\n\n```\nCall:\nlm(formula = wellbeing ~ mc_social_int * isRural, data = mwdata)\n\nCoefficients:\n                           Estimate Std. Error t value Pr(>|t|)    \n(Intercept)                 38.8263     0.4581  84.754  < 2e-16 ***\nmc_social_int                0.6488     0.1160   5.593 7.42e-08 ***\nisRuralrural                -4.8581     0.6478  -7.500 2.17e-12 ***\nmc_social_int:isRuralrural  -0.5176     0.1615  -3.206  0.00157 ** \n```\n:::\n\nRecall that when there is an interaction A$\\times$B, the coefficients A and B are no longer *main effects*. Instead, they are *conditional effects* upon the other being zero. \n\nIf we have the interaction `y ~ x1 + x2 + x1:x2` (where  $y$ = wellbeing; $x_1$ = social interactions; and $x_2$ = whether or not the respondent lives in a rural location.), then:   \n\n+ In our \"rural_mod\", the coefficient for `x2` represents the the association between $y$ and $x_2$ for someone with a score of 0 on $x_1$  \n+ In our \"rural_mod1\", where `x1` is mean centered, this will now make the coefficient for `x2` represent the the association between $y$ and $x_2$ for someone at the average of $x_1$ (i.e., in our current example, 12.06)  \n\nWhilst the difference in rural vs non-rural may not have been significantly different when the number of weekly social interactions is zero, there did appear to be a significant difference at the average number of social interactions (as you can see from the plot below - note that this is the same plot as in the hint). Note that we can see that the model doesn’t change, it is just extracting different information (the distance to move from the blue dot to the red dot is different):\n\n```{r echo = FALSE, message=FALSE, warning=FALSE}\n#| label: fig-mc_difference-2\n#| fig-cap: \"Difference when social interactions is not vs is mean centered\" \n(p1 | p2) + plot_layout(guides = \"collect\")\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Visualise Interaction Model\n\n`r qbegin(8)`\n\nUsing the `probe_interaction()` function from the **interactions** package, visualise the interaction effects from your model.\n\nTry to summarise the interaction effects in a short and concise sentence. \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nIn terms of specification, it might be useful to look up the helper function via `?probe_interaction`. As a quick guide:\n\n+ `model` = name model to be used\n+ `pred` = The predictor variable\n+ `modx` = The moderator variable\n+ `interval` = If we say `TRUE`, then confidence/prediction intervals will be plotted around the line\n\nMake sure to give your plot informative titles/labels. You, for example, likely want to give your plot:\n\n- a clear and concise title (specify `main.title = `)\n- axis labels with units or scale included (specify `x.label = ` and `y.label = `)\n- a legend title (specify `legend.main = `)\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r warning=FALSE, message=FALSE}\nplt_rural_mod <- probe_interaction(model = rural_mod1, \n                  pred = mc_social_int, \n                  modx = isRural, \n                  interval = T,\n                  main.title = \"Predicted Wellbeing Scores across \\n Social Interactions by Location\",\n                  x.label = \"Number of Social Interactions per Week (Mean Centred)\",\n                  y.label = \"Wellbeing (WEMWBS Scores)\",\n                  legend.main = \"Location\")\n```\n\nLet's look at our plot:\n\n```{r}\n#| label: fig-int\n#| fig-cap: \"Predicted Wellbeing Scores across Social Interactions by Location\"\nplt_rural_mod$interactplot\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThis suggested that for individuals living in rural locations, wellbeing scores increased at a slower rate across the number of weekly social interactions in comparison to those in rural locations. In other words, for each additional social interaction per week, wellbeing scores of those living in non-rural locations increased at a greater rate than those in rural. \n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Writing Up & Presenting Results\n\n`r qbegin(9)`\n\nProvide key model results (from \"rural_mod1\") in a formatted table.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nUse `tab_model()` from the __sjPlot__ package. \n\nYou can rename your DV and IV labels by specifying `dv.labels` and `pred.labels`. To do so, specify your variable name on the left, and what you would like this to be named in the table on the right. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#| label: tbl-rural-mc-modresults\n#| tbl-cap: Regression Table for Wellbeing Model\n#create table for results\ntab_model(rural_mod1,\n          dv.labels = \"Wellbeing (WEMWBS Scores)\",\n          pred.labels = c(\"mc_social_int\" = \"Social Interactions (number per week; mean centred)\",\n                          \"isRuralrural\" = \"Location - Rural\",\n                          \"mc_social_int:isRuralrural\" = \"Social Interactions (number per week; mean centred) * Location - Rural\"),\n          title = \"Regression Table for Wellbeing Model\")\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(10)`\n\nInterpret your results (from \"rural_mod1\") in the context of the research question and report your model in full.\n\nMake reference to the interaction plot and regression table.\n\n:::frame\n\n:::quote\n\"The best method of communicating findings about the presence of a significant interaction may be to present a table or graph of the estimated means at various combinations of the interacting variables.\"    \n--- @Ramsey2012  \n:::\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nFull regression results including 95% Confidence Intervals are shown in @tbl-rural-mc-modresults. The $F$-test for model utility was significant $(F(3,196) = 27.49, p < .001)$, and the model explained approximately 28.54% of the variability in wellbeing (WEMWBS Scores).\n\nThere was a significant conditional association between wellbeing (WEMWBS Scores) and the number of weekly social interactions $(\\beta = 0.65,~ SE = 0.12,~ t(196) = 5.59,~ p < .001)$, which suggested that for those living in non-rural locations, wellbeing scores increased by 0.65 for every additional social interaction per week. A significant conditional association was also evident between wellbeing and location $(\\beta = -4.86,~ SE = 0.65,~ t(196) = -7.50,~ p < .001)$, which suggested that for those who have the average number of social interactions per week $(M = 12.06)$, wellbeing scores were 4.86 points lower for those in rural areas in comparison to those in non-rural.\n\nThe association between wellbeing (WEMWBS Scores) and social interactions was found to be dependent upon location (rural/non-rural), and this was significant $(\\beta = -0.52,~ SE = 0.16,~ t(196) = -3.21, ~p = .002)$. The expected increase in wellbeing (WEMWBS Scores) for every additional social interaction per week was 0.52 points less for those living in rural locations in comparison to those in non-rural. This interaction is visually presented in @fig-int. Therefore, we have evidence to reject the null hypothesis (that the association between wellbeing and social interactions is not moderated by whether or not a person lives in a rural area).\n\n:::\n\n`r solend()`\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Compile Report\n\n`r qbegin(\"Compile Report\", qlabel = FALSE)`  \n\nKnit your report to PDF, and check over your work. To do so, you should make sure:\n\n- Only the output you want your reader to see is visible (e.g., do you want to hide your code?)\n- Check that the **tinytex** package is installed\n- Ensure that the ‘yaml’ (bit at the very top of your document) looks something like this:\n\n```{}\n---\ntitle: \"this is my report title\"\nauthor: \"B1234506\"\ndate: \"07/09/2024\"\noutput: bookdown::pdf_document2\n---\n```\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# What to do if you cannot knit to PDF\nIf you are having issues knitting directly to PDF, try the following:  \n\n- Knit to HTML file  \n- Open your HTML in a web-browser (e.g. Chrome, Firefox)  \n- Print to PDF (Ctrl+P, then choose to save to PDF)  \n- Open file to check formatting\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# Hiding Code and/or Output\n\n:::{.panel-tabset}\n## Hiding R Code\n\nTo not show the code of an R code chunk, and only show the output, write:\n\n````\n```{{r, echo=FALSE}}\n# code goes here\n```\n````\n\n## Hiding R Output\n\nTo show the code of an R code chunk, but hide the output, write:\n\n````\n```{{r, results='hide'}}\n# code goes here\n```\n````\n\n## Hiding R Code and Output\n\nTo hide both code and output of an R code chunk, write:\n\n````\n```{{r, include=FALSE}}\n# code goes here\n```\n````\n:::\n\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Tinytex\nYou must make sure you have **tinytex** installed in R so that you can “Knit” your Rmd document to a PDF file:\n\n```{r eval = FALSE}\ninstall.packages(\"tinytex\")\ntinytex::install_tinytex()\n```\n\n:::\n\n`r qend()`\n\n`r solbegin(show = params$SHOW_SOLS, toggle = params$TOGGLE)`\n\nYou should end up with a PDF file. If you have followed the above instructions and still have issues with knitting, speak with a Tutor. \n\n`r solend()`\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nsource('assets/setup.R')\nlibrary(tidyverse)\nlibrary(psych)\nlibrary(sjPlot)\nlibrary(patchwork)\nlibrary(kableExtra) \nlibrary(plotly)\nlibrary(pander)\nset.seed(953)\n```\n\n:::lo\n### <i class=\"fa fa-graduation-cap\"></i> Learning Objectives\nAt the end of this lab, you will:\n\n1. Understand the concept of an interaction\n2. Be able to interpret the meaning of a numeric $\\times$ categorical interaction\n3. Be able to visualize and probe interactions\n\n### <i class=\"fa fa-check-square-o fa-2\"></i> What You Need\n\n1. Be up to date with lectures\n2. Have completed all labs from Semester 1\n\n### <i class=\"fab fa-r-project\"></i> Required R Packages\nRemember to load all packages within a code chunk at the start of your RMarkdown file using `library()`. If you do not have a package and need to install, do so within the console using `install.packages(\" \")`. For further guidance on installing/updating packages, see Section C [here](https://uoepsy.github.io/files/install-update-r#update-pkgs). \n\nFor this lab, you will need to load the following package(s):\n\n* **tidyverse** \n* **kableExtra**\n* **psych** \n* **sjPlot**\n* **patchwork** \n* **sandwich**\n* **interactions**\n\n### <i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i> Presenting Results\nAll results should be presented following [APA guidelines](https://apastyle.apa.org/instructional-aids/numbers-statistics-guide.pdf). If you need a reminder on how to hide code, format tables/plots, etc., make sure to review the [rmd bootcamp](https://uoepsy.github.io//rmd-bootcamp/).\n\nThe example write-up sections included as part of the solutions are **not perfect** - they instead should give you a good example of what information you should include and how to structure this. Note that you must **not** copy any of the write-ups included below for future reports - if you do, you will be committing plagiarism, and this type of academic misconduct is taken very seriously by the University. You can find out more [here](https://www.ed.ac.uk/academic-services/students/conduct/academic-misconduct).\n\n### <i class=\"fa fa-file\"></i> Lab Data\nYou can download the data required for this lab [here](https://uoepsy.github.io/data/wellbeing_rural.csv) or read it in via this link https://uoepsy.github.io/data/wellbeing_rural.csv \n\n:::\n\n# Study Overview {#sec-studyview} \n\n> **Research Question** \n>\n> Does the association between wellbeing and the number of social interactions differ between rural and non-rural residents?  \n\n`r optbegin(\"Wellbeing/Rurality data codebook.\", olabel=FALSE, toggle=params$TOGGLE)` \n\n__Background__\n\nResearchers were specifically interested in how the number of social interactions influenced mental health and wellbeing differently for those living in rural communities compared to those in cities and suburbs. They wanted to assess whether the effect of social interactions on wellbeing _was moderated by_ (depends upon) whether or not a person lived in a rural area.\n\n\n__Description__\n\nFrom the Edinburgh & Lothians, 100 city/suburb residences and 100 rural residences were chosen at random and contacted to participate in the study. The Warwick-Edinburgh Mental Wellbeing Scale (WEMWBS), was used to measure mental health and well-being. \n\nParticipants filled out a questionnaire including items concerning: estimated average number of hours spent outdoors each week, estimated average number of social interactions each week (whether on-line or in-person), whether a daily routine is followed (yes/no). For those respondents who had an activity tracker app or smart watch, they were asked to provide their average weekly number of steps.  \n  \n  \n__Data Dictionary__\n\nThe data in `wellbeing_rural.csv` contain seven attributes collected from a random sample of $n=200$ hypothetical residents over Edinburgh & Lothians, and include: \n\n```{r echo=FALSE, message=FALSE, warning=FALSE}\nmwdata  <- read_csv(\"https://uoepsy.github.io/data/wellbeing_rural.csv\")\ntibble(\nvariable = names(mwdata),\ndescription = c(\"Age in years of respondent\",\"Self report estimated number of hours per week spent outdoors\", \"Self report estimated number of social interactions per week (both online and in-person)\", \"Binary 1=Yes/0=No response to the question 'Do you follow a daily routine throughout the week?'\", \"Warwick-Edinburgh Mental Wellbeing Scale (WEMWBS), a self-report measure of mental health and well-being. The scale is scored by summing responses to each item, with items answered on a 1 to 5 Likert scale. The minimum scale score is 14 and the maximum is 70\", \"Location of primary residence (City, Suburb, Rural)\", \"Average weekly number of steps in thousands (as given by activity tracker if available)\")\n) %>% gt::gt()\n```\n  \n  \n__Preview__\n\nThe first six rows of the data are:\n\n```{r echo=FALSE, message=FALSE}\nread_csv('https://uoepsy.github.io/data/wellbeing_rural.csv') %>% head %>% gt::gt()\n```\n  \n`r optend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Setup\n\n`r qbegin(\"Setup\", qlabel = FALSE)`  \n\n1. Create a new RMarkdown file\n2. Load the required package(s)\n3. Read the wellbeing_rural dataset into R, assigning it to an object named `mwdata`\n \n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n```{r message=FALSE}\n#Loading the required package(s)\nlibrary(tidyverse)\nlibrary(kableExtra)\nlibrary(psych)\nlibrary(sjPlot)\nlibrary(patchwork)\nlibrary(sandwich)\nlibrary(interactions)\n\n#Reading in data and storing in object named 'mwdata'\nmwdata <- read_csv(\"https://uoepsy.github.io/data/wellbeing_rural.csv\")\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>  \n\n\n# Exercises \n\n## Study & Analysis Plan Overview \n\n`r qbegin(1)`\n\nProvide a brief overview of the study design and data, before detailing your analysis plan to address the research question.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\n- State what type of analysis you will conduct in order to address the research question\n- Specify the model to be fitted to address the research question (note that you will need to specify the reference level of your categorical variable)\n- Specify your chosen significance ($\\alpha$) level\n- State your hypotheses\n\nMuch of the information required can be found in the [Study Overview] codebook.\n\n:::\n\n:::frame\n\nIf we fit the interaction `x1:x2`, we almost always want to also fit the separate effects `x1` and `x2`:\n\n:::quote\n\"Except in special circumstances, a model including a product term for interaction between two explanatory variables should also include terms with each of the explanatory variables individually, even though their coefficients may not be significantly different from zero. Following this rule avoids the logical inconsistency of saying that the effect of $X_1$ depends on the level of $X_2$ but that there is no effect of $X_1$.\"  \n--- @Ramsey2012\n:::\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nThe `mwdata` dataset contained information on 200 hypothetical participants who lived in Edinburgh & Lothians area. Using a between-subjects design, the researchers collected information on participants' wellbeing (measured via WEMWBS), outdoor time (hours per week), social interactions (number per week), routine (whether or not one was followed), location of residence (City, Suburb, or Rural), average weekly steps (in thousands), and age (in years).\n\nDensity plots and histograms will be used to visualise the marginal distributions of wellbeing and social interactions, and the strength of association between the two variables estimated via the correlation coefficient. To understand how these associations differ between rural and non-rural locations, scatterplots will be used. \n\nTo address the research question of whether the association between the number of social interactions and wellbeing differs between rural and non-rural residents, we are going to fit the following interaction model (where not rural will be specified as the reference group for location). \n\n$$\n\\begin{align}\n\\text{Wellbeing} ~=~ & \\beta_0 + \\beta_1 \\cdot Social~Interactions + \\beta_2 \\cdot Location_{Rural} \\\\\n& + \\beta_3 \\cdot (Social~Interactions \\cdot Location_{Rural}) + \\epsilon \\\\\n\\end{align}\n\\quad \n$$\n\nEffects will be considered statistically significant at $\\alpha=.05$\n\nOur hypotheses are:\n\n$H_0: \\beta_3 = 0$\n\nThe association between wellbeing and social interactions is not moderated by whether or not a person lives in a rural area. \n\n$H_1: \\beta_3 \\neq 0$\n\nThe association between wellbeing and social interactions is moderated by whether or not a person lives in a rural area. \n\n`r solend()`\n\n<br>\n\n`r qbegin(2)`\n\nCheck coding of variables (e.g., that categorical variables are coded as factors). \n\nNote that the \"location\" variable currently has three levels (Rural/Suburb/City). In order to address the research question, we only want two (Rural/Not Rural) locations - you will need to fix this.\n\nAs specified in Q1, we want 'not rural' as the reference group, so make sure to specify this.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\nOne way to do this would be to use `ifelse()` to define a variable which takes one value (\"Rural\") if the observation meets from some condition, or another value (\"Not Rural\") if it does not. \n\nType `?ifelse` in the *console* if you want to see the help function. You can use it to add a new variable either inside `mutate()`, or using `data$new_variable_name <- ifelse(test, x, y)` syntax.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nCreate a new variable for Rural/Not Rural, and then assign as a factor:\n```{r}\n#if location is rural, assign name 'rural'. If another value (i.e., city or suburb) assign name 'not rural'.\n# In other words, if location = rural assign name rural; if location != rural then assign name not rural.\nmwdata <- mwdata %>% \n  mutate(\n    isRural = ifelse(location == \"rural\", \"rural\", \"not rural\"),\n    isRural = as_factor(isRural)\n  )\n```\n\nCheck coding of variables within `mwdata` and ensure `isRural` is a factor with two levels, 'rural' and 'not rural':\n```{r}\n# check structure of dataset (alternatively run is.factor() for specific variable)\nstr(mwdata) \n\n#check that isRural is now a factor\nis.factor(mwdata$isRural) \n```\n\n```{r}\n#specify 'not rural' as reference group\nmwdata$isRural <- relevel(mwdata$isRural, 'not rural')\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Descriptive Statistics & Visualisations\n\n`r qbegin(3)`\n\nProvide a table of descriptive statistics and visualise your data.\n\nIn particular:\n\n1. Explore the associations among the variables included in your analysis\n2. Produce a visualisation of the association between weekly number of social interactions and well-being, with separate _facets_ for rural vs non-rural respondents **OR** with _different colours_ for each level of the `isRural` variable.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\n1. For your table of descriptive statistics, both the `group_by()` and `summarise()` functions will come in handy here.\n2. If you use the `select()` function and get an error along the lines of `Error in select...unused arguments...`, you will need to specify `dplyr::select()` (this just tells R which package to use the select function from).\n3. The `pairs.panels()` function from the `psych` package can plot all variables in a dataset against one another. This will save you the time you would have spent creating individual plots, but is only useful for *continuous* variables.  \n4. To include facets, within your `ggplot()` argument you will need to specify `+ facet_wrap()` in order to produce facets for each location. It would also be useful to specify `geom_smooth(method=\"lm\")`.\n5. To include different colours for each location, you will need to specify `colour = isRural` within your `ggplot()` argument, as well as `+ scale_colour_discrete()` to state the `name =` of your legend and the `labels =` associated with each coloured line.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.panel-tabset}\n\n## Numeric\nWe can present our summary statistics for wellbeing and social interactions grouped by location in a well formatted table using `kable()`: \n\n```{r}\n#| label: tbl-w1-desc\n#| tbl-cap: Wellbeing, Social Interactions, and Location Descriptive Statistics\nmwdata %>%\n    select(isRural, wellbeing, social_int) %>%\n    group_by(isRural) %>%\n    summarise(Wellbeing_M = mean(wellbeing),\n              Wellbeing_SD = sd(wellbeing),\n              SocialInt_M = mean(social_int),\n              SocialInt_SD = sd(social_int)) %>%\n    kable(caption = \"Wellbeing, Social Interactions, and Location Descriptive Statistics\", align = \"c\", digits = 2, booktabs = TRUE) %>%\n    kable_styling(full_width = FALSE)\n```\n\n\n::: {.callout-important icon=false collapse=true}\n# A quick non-APA style table - i.e., not for use in reports\nFor a quick overview of several summary statistics at once for all columns of our dataframe, but separately for each level of location (i.e.,rural and non-rural), you can use `describeBy()` from the **psych** package:\n\n```{r}\ndescribeBy(mwdata, mwdata$isRural)\n```\n\n:::\n\n## Visual \n\n::: {.panel-tabset}\n\n### Wellbeing & Social Interactions\n\nLet's first plot the continuous variables included within our model (note that we could use this for the whole dataset, but we don't want to include irrelevant / non-continuous variables):\n\n```{r}\nmwdata %>% \n  select(wellbeing, social_int) %>%\n  pairs.panels()\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nWellbeing and social interactions appear to follow unimodal distributions. There was a weak, positive association between wellbeing and social interactions $(r = .24)$. \n\n::: \n\n### Wellbeing & Location\n\nNow lets look at wellbeing scores by location:\n\n```{r}\nggplot(data = mwdata, aes(x = isRural, y = wellbeing)) +\n  geom_boxplot() + \n  labs(x = \"Location\", y = \"Wellbeing (WEMWBS Scores)\")\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThose in rural locations appear to have lower wellbeing scores in comparison to those in non-rural locations.\n\n::: \n\n### Wellbeing, Social Interactions & Location\n\nNext, lets produce our plots with a facet for rural vs non-rural residents: \n\n```{r message=FALSE, warning = FALSE}\nggplot(data = mwdata, aes(x = social_int, y = wellbeing)) +\n  geom_point() +\n  geom_smooth(method=\"lm\", se=FALSE) +\n  facet_wrap(~isRural, labeller = \"label_both\") + \n  labs(x = \"Social Interactions (number per week)\", y = \"Wellbeing (WEMWBS Scores)\")\n```\n\nOr instead of facets, we could use different colors for each location (rural vs non-rural):\n\n```{r message=FALSE, warning = FALSE}\nggplot(data = mwdata, aes(x = social_int, y = wellbeing, colour = isRural)) +\n  geom_point() + \n  geom_smooth(method=\"lm\", se=FALSE) +\n    scale_colour_discrete(\n    name =\"Location\",\n    labels=c(\"Not Rural\", \"Rural\")) + \n    labs(x = \"Social Interactions (number per week)\", y = \"Wellbeing (WEMWBS Scores)\")\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThose in non-rural locations appear to have higher wellbeing scores across almost all levels of social interactions. The slopes appear to be different for each location, where the greatest difference in wellbeing scores by location is most visible the highest number of social interactions. This suggests that there may be an interaction. \n\n::: \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### How do we know there might be an interaction? \n\nThe lines in the two plots above do not run in *parallel* - this suggested the presence of an interaction. Specifically in our example, the non-parallel lines suggested an interaction effect based on location, as the number of social interactions did not appear to have the same influence on rural and non-rural residents' wellbeing scores. \n\nHowever, the only way we can determine whether there is actually an interaction is by including an interaction term in our model, and testing this. \n\n:::\n\n:::\n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Model Fitting & Interpretation \n\n`r qbegin(4)`\n\nFit your model using `lm()`, and assign it as an object with the name \"rural_mod\".   \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nWhen fitting a regression model in `R` with two explanatory variables A and B, and their interaction, these three are equivalent:  \n\n+ y ~ A + B + A:B\n+ y ~ A + B + A*B\n+ y ~ A*B  \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#fit model including interaction between social_int and isRural\nrural_mod <- lm(wellbeing ~  social_int * isRural, data = mwdata)\n\n#check model output\nsummary(rural_mod)\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(5)`  \n\nLook at the parameter estimates from your model, and write a description of what each one corresponds to on the plot shown in @fig-annotate-int (it may help to sketch out the plot yourself and annotate it, and refer to the drop down options below).  \n\n```{r fig-annotate-int, echo=FALSE, message = FALSE, fig.cap=\"Multiple regression model: Wellbeing ~ Social Interactions * is Rural<br><small>Note that the dashed lines represent predicted values below the minimum observed number of social interactions, to ensure that zero on the x-axis is visible</small>\"}\n#| label: fig-annotate-int\n#| fig-cap: \"Multiple regression model: Wellbeing ~ Social Interactions * is Rural\"\nnd = expand_grid(social_int=0:13,isRural=c(\"rural\",\"not rural\"))\nnd = nd %>% mutate(wellbeing = predict(rural_mod, newdata = .))\nsjPlot::plot_model(rural_mod, type=\"int\")+\n  scale_fill_manual(NULL, values=c(NA,NA))+xlim(0,28)+\n  geom_line(inherit.aes=FALSE,data=nd,aes(x=social_int,col=isRural,y=wellbeing), lty=\"longdash\")+\n  scale_x_continuous(expand = c(0, 0)) + scale_y_continuous(expand = c(0, 1))\n```\n\n`r optbegin(\"Options for Mapping Parameter Estimates to Plot\", olabel=FALSE, toggle=params$TOGGLE)`\n\nHere are some options to choose from:\n\n+ The point at which the red line cuts the y-axis (where social_int = 0)\n+ The point at which the blue line cuts the y-axis (where social_int = 0)\n+ The vertical distance from the red to the blue line _at the y-axis_ (where social_int = 0)\n+ The vertical distance from the blue to the red line _at the y-axis_ (where social_int = 0)\n+ The vertical distance from the blue to the red line _at the center of the plot_\n+ The vertical distance from the red to the blue line _at the center of the plot_\n+ The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the red line\n+ The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the blue line\n+ How the slope of the line changes when you move from the red to the blue line\n\n`r optend()`\n\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nRecall that we can obtain our parameter estimates using various functions such as `summary()`,`coef()`, `coefficients()`, etc. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nObtain parameter estimates:\n\n```{r}\ncoefficients(rural_mod)\n```\n\n::: {.panel-tabset}\n## `(Intercept)`   \n\n$\\beta_0$ = `(Intercept)` = `r round(coef(rural_mod)[1],2)`  \n\n+ On plot: The point at which the red line cuts the y-axis.    \n+ Interpretation: The intercept, or predicted wellbeing score when the number of social interactions per week was 0, and when location was not rural.  \n    - A non-rural resident who had zero social interactions per week was expected to have a wellbeing score of `r round(coef(rural_mod)[1],2)`.  \n    \n## `social_int`   \n\n$\\beta_1$ = `social_int` = `r round(coef(rural_mod)[2],2)`  \n\n+ On plot: The slope (vertical increase on the y-axis associated with a 1 unit increase on the x-axis) of the red line.  \n+ Interpretation: The simple slope of social interactions (number per week) for location reference group (not rural).   \n    - For someone who lives in a non-rural location, every 1 additional social interaction per week was associated with a `r round(coef(rural_mod)[2],2)` point change in their wellbeing score.\n\n## `isRuralrural`   \n\n$\\beta_2$ = `isRuralrural` = `r round(coef(rural_mod)[3],2)`  \n\n+ On plot: The vertical distance from the red to the blue line _at the y-axis_ (where social_int = 0).  \n+ Interpretation: The simple effect of location (or the difference in wellbeing scores between rural and non rural residents) when number of social interactions was 0.  \n    - For residents who had zero social interactions per week, living in a rural location was associated with wellbeing scores `r round(coef(rural_mod)[3],2)` points higher than living in non-rural locations (note that this difference was not significantly different from zero).  \n\n## `social_int:isRuralrural`   \n\n$\\beta_3$ = `social_int:isRuralrural` = `r round(coef(rural_mod)[4],2)`  \n\n+ On plot: How the slope of the line differs when you move from the red to the blue line.    \n+ Interpretation: The interaction between social interactions (number per week) and location (rural/not rural). This is the estimated difference in simple slopes of social interactions for rural vs non-rural residents.   \n    - Compared to living in non-rural locations, living in a rural location was associated with a `r round(abs(coef(rural_mod)[4]),2)` lesser increase in wellbeing scores for every every 1 additional social interaction per week.\n\n:::\n\n`r solend()`\n\n<br>\n\n`r qbegin(6)`\n\nNo participants in our dataset had zero hours of social interactions per week (the lowest was 3), and we're likely not interested in differences between rural and non-rural residents who have never interacted with others.\n\nMean center the continuous IV(s), and re-run your model with mean centered variable(s).\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nThere are a couple of different ways that we can re-centre. We could either create a new variable, named say `mc_social_int` which is `social_int - mean(social_int)` (which would therefore make everyone who had 12.06 social interactions per week be given a value of `0` in the variable), or we could do it _in_ the model:  \n\n::: {.panel-tabset}\n\n#### Creating Mean Centred Variable\n\n```{r}\n#| eval: false\nmwdata <-\n mwdata %>%\n  mutate(\n   mc_social_int = social_int - mean(social_int)\n    )\n```\n\n#### Mean Centre in Model\n\n```{r}\n#| eval: false\nrural_mod_mc <- lm(wellbeing ~ I(social_int-12.06) * isRural, data = mwdata)\n```\n\n\n::: {.callout-important icon=false collapse=true}\n##### What does the `I` do? \nWhen we specify the `I()` notation in the formula syntax of `lm()` in R, the notation simply means 'as is'. In other words, in our example, we are specifying that we want to include as a predictor variable the product of `social_int - 12.06` in our model.\n:::\n\n:::\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nCreate mean centered variable for 'social_int', named 'mc_social_int':\n\n```{r}\nmwdata <-\n mwdata %>%\n  mutate(\n   mc_social_int = social_int - mean(social_int)\n    )\n```\n\nRe-run model with 'mc_social_int':\n\n```{r}\n#fit model including interaction between social_int and isRural\nrural_mod1 <- lm(wellbeing ~  mc_social_int * isRural, data = mwdata)\n\n#check model output\nsummary(rural_mod1)\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(7)`\n\nNote any differences between the `summary()` output between the original (\"rural_mod\") and mean centred (\"rural_mod1\") models. Pay particular attention to your coefficients and their significance values. How have your coefficients changed? Why do you think these differences have been observed?\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nThese plots illustrate the difference between the \"rural_mod\" and \"rural_mod1\" models. \n\n```{r echo = FALSE, message=FALSE, warning=FALSE}\n#| label: fig-mc_difference\n#| fig-cap: \"Difference when social interactions is not vs is mean centered.<br><small>Note that the lines without SE intervals on the left plot represent \\npredicted values below the minimum observed number of social \\ninteractions, to ensure that zero on the x-axis is visible</small>\"\nnd = expand_grid(social_int=-1:13,isRural=c(\"rural\",\"not rural\"))\nnd = nd %>% mutate(wellbeing = predict(rural_mod, newdata = .))\n\np1 <- ggplot(data = mwdata, aes(x = social_int, y = wellbeing, colour = isRural)) +\n    geom_point() +\n    geom_smooth(method=\"lm\", se=TRUE) +\n    geom_smooth(method=\"lm\", se=FALSE, fullrange=TRUE) +\n    geom_point(aes(x=0, y=30.9986), colour=\"#F8766D\", size = 7) +\n    geom_point(aes(x=0, y=32.3852), colour=\"#00BFC4\", size = 7) +\n    geom_vline(xintercept = 0, colour=\"black\", linetype = \"longdash\", size = 0.5) +\n    scale_fill_manual(NULL, values=c(NA,NA))+xlim(-5,30)+\n    geom_line(inherit.aes=FALSE,data=nd,aes(x=social_int,col=isRural,y=wellbeing), lty=\"solid\", lwd=1) + \n    scale_x_continuous(expand = c(0, 0)) + scale_y_continuous(expand = c(0, 1)) +\n    labs(x = \"Social Interactions \\n(n per week)\", y = \"Wellbeing (WEMWBS Scores)\", caption = \"\") +\n    theme(plot.caption = element_text(size = 8, hjust = 0, face = \"italic\"), legend.position=\"none\") +\n    scale_colour_discrete(\n    name =\"Location\",\n    labels=c(\"Not Rural\", \"Rural\"))\n\np2 <- ggplot(data = mwdata, aes(x = mc_social_int, y = wellbeing, colour = isRural)) +\n    geom_point() +\n    geom_smooth(method=\"lm\", se=TRUE) +\n    geom_smooth(method=\"lm\", se=FALSE, fullrange=TRUE) +\n    geom_point(aes(x=0, y=38.8263), colour=\"#F8766D\", size = 7) +\n    geom_point(aes(x=0, y=34), colour=\"#00BFC4\", size = 7) +\n    geom_vline(xintercept = 0, colour=\"black\", linetype = \"longdash\", size = 0.5) +\n    scale_x_continuous(expand = c(0, 0)) + scale_y_continuous(expand = c(0, 1)) +\n    labs(x = \"Mean Centred Social \\nInteractions (n per week)\", y = \"Wellbeing (WEMWBS Scores)\") +\n    scale_colour_discrete(\n    name =\"Location\",\n    labels=c(\"Not Rural\", \"Rural\"))+\n    guides(fill=\"none\")\n\n\n(p1 | p2) + plot_layout(guides = \"collect\")\n```\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nBy comparing the `summary()` outputs, you should see that the coefficients for `(Intercept)` and `isRuralrural` differed between the two models, whilst the coefficients for `social_int` and `mc_social_int` were the same, as were the interaction estimates `social_int:isRuralrural`.\n\n::: {.callout-important icon=false collapse=true}\n## Compare Model Estimates\n\nOriginal Model - `rural_mod`:\n\n```\nCall:\nlm(formula = wellbeing ~ social_int * isRural, data = mwdata)\n\nCoefficients:\n                        Estimate Std. Error t value Pr(>|t|)    \n(Intercept)              30.9986     1.4284  21.702  < 2e-16 ***\nsocial_int                0.6488     0.1160   5.593 7.42e-08 ***\nisRuralrural              1.3866     2.0510   0.676  0.49981    \nsocial_int:isRuralrural  -0.5176     0.1615  -3.206  0.00157 ** \n```\nModel with mean centered social interactions - `rural_mod1`:\n\n```\nCall:\nlm(formula = wellbeing ~ mc_social_int * isRural, data = mwdata)\n\nCoefficients:\n                           Estimate Std. Error t value Pr(>|t|)    \n(Intercept)                 38.8263     0.4581  84.754  < 2e-16 ***\nmc_social_int                0.6488     0.1160   5.593 7.42e-08 ***\nisRuralrural                -4.8581     0.6478  -7.500 2.17e-12 ***\nmc_social_int:isRuralrural  -0.5176     0.1615  -3.206  0.00157 ** \n```\n:::\n\nRecall that when there is an interaction A$\\times$B, the coefficients A and B are no longer *main effects*. Instead, they are *conditional effects* upon the other being zero. \n\nIf we have the interaction `y ~ x1 + x2 + x1:x2` (where  $y$ = wellbeing; $x_1$ = social interactions; and $x_2$ = whether or not the respondent lives in a rural location.), then:   \n\n+ In our \"rural_mod\", the coefficient for `x2` represents the the association between $y$ and $x_2$ for someone with a score of 0 on $x_1$  \n+ In our \"rural_mod1\", where `x1` is mean centered, this will now make the coefficient for `x2` represent the the association between $y$ and $x_2$ for someone at the average of $x_1$ (i.e., in our current example, 12.06)  \n\nWhilst the difference in rural vs non-rural may not have been significantly different when the number of weekly social interactions is zero, there did appear to be a significant difference at the average number of social interactions (as you can see from the plot below - note that this is the same plot as in the hint). Note that we can see that the model doesn’t change, it is just extracting different information (the distance to move from the blue dot to the red dot is different):\n\n```{r echo = FALSE, message=FALSE, warning=FALSE}\n#| label: fig-mc_difference-2\n#| fig-cap: \"Difference when social interactions is not vs is mean centered\" \n(p1 | p2) + plot_layout(guides = \"collect\")\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Visualise Interaction Model\n\n`r qbegin(8)`\n\nUsing the `probe_interaction()` function from the **interactions** package, visualise the interaction effects from your model.\n\nTry to summarise the interaction effects in a short and concise sentence. \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nIn terms of specification, it might be useful to look up the helper function via `?probe_interaction`. As a quick guide:\n\n+ `model` = name model to be used\n+ `pred` = The predictor variable\n+ `modx` = The moderator variable\n+ `interval` = If we say `TRUE`, then confidence/prediction intervals will be plotted around the line\n\nMake sure to give your plot informative titles/labels. You, for example, likely want to give your plot:\n\n- a clear and concise title (specify `main.title = `)\n- axis labels with units or scale included (specify `x.label = ` and `y.label = `)\n- a legend title (specify `legend.main = `)\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r warning=FALSE, message=FALSE}\nplt_rural_mod <- probe_interaction(model = rural_mod1, \n                  pred = mc_social_int, \n                  modx = isRural, \n                  interval = T,\n                  main.title = \"Predicted Wellbeing Scores across \\n Social Interactions by Location\",\n                  x.label = \"Number of Social Interactions per Week (Mean Centred)\",\n                  y.label = \"Wellbeing (WEMWBS Scores)\",\n                  legend.main = \"Location\")\n```\n\nLet's look at our plot:\n\n```{r}\n#| label: fig-int\n#| fig-cap: \"Predicted Wellbeing Scores across Social Interactions by Location\"\nplt_rural_mod$interactplot\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThis suggested that for individuals living in rural locations, wellbeing scores increased at a slower rate across the number of weekly social interactions in comparison to those in rural locations. In other words, for each additional social interaction per week, wellbeing scores of those living in non-rural locations increased at a greater rate than those in rural. \n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Writing Up & Presenting Results\n\n`r qbegin(9)`\n\nProvide key model results (from \"rural_mod1\") in a formatted table.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nUse `tab_model()` from the __sjPlot__ package. \n\nYou can rename your DV and IV labels by specifying `dv.labels` and `pred.labels`. To do so, specify your variable name on the left, and what you would like this to be named in the table on the right. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#| label: tbl-rural-mc-modresults\n#| tbl-cap: Regression Table for Wellbeing Model\n#create table for results\ntab_model(rural_mod1,\n          dv.labels = \"Wellbeing (WEMWBS Scores)\",\n          pred.labels = c(\"mc_social_int\" = \"Social Interactions (number per week; mean centred)\",\n                          \"isRuralrural\" = \"Location - Rural\",\n                          \"mc_social_int:isRuralrural\" = \"Social Interactions (number per week; mean centred) * Location - Rural\"),\n          title = \"Regression Table for Wellbeing Model\")\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(10)`\n\nInterpret your results (from \"rural_mod1\") in the context of the research question and report your model in full.\n\nMake reference to the interaction plot and regression table.\n\n:::frame\n\n:::quote\n\"The best method of communicating findings about the presence of a significant interaction may be to present a table or graph of the estimated means at various combinations of the interacting variables.\"    \n--- @Ramsey2012  \n:::\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nFull regression results including 95% Confidence Intervals are shown in @tbl-rural-mc-modresults. The $F$-test for model utility was significant $(F(3,196) = 27.49, p < .001)$, and the model explained approximately 28.54% of the variability in wellbeing (WEMWBS Scores).\n\nThere was a significant conditional association between wellbeing (WEMWBS Scores) and the number of weekly social interactions $(\\beta = 0.65,~ SE = 0.12,~ t(196) = 5.59,~ p < .001)$, which suggested that for those living in non-rural locations, wellbeing scores increased by 0.65 for every additional social interaction per week. A significant conditional association was also evident between wellbeing and location $(\\beta = -4.86,~ SE = 0.65,~ t(196) = -7.50,~ p < .001)$, which suggested that for those who have the average number of social interactions per week $(M = 12.06)$, wellbeing scores were 4.86 points lower for those in rural areas in comparison to those in non-rural.\n\nThe association between wellbeing (WEMWBS Scores) and social interactions was found to be dependent upon location (rural/non-rural), and this was significant $(\\beta = -0.52,~ SE = 0.16,~ t(196) = -3.21, ~p = .002)$. The expected increase in wellbeing (WEMWBS Scores) for every additional social interaction per week was 0.52 points less for those living in rural locations in comparison to those in non-rural. This interaction is visually presented in @fig-int. Therefore, we have evidence to reject the null hypothesis (that the association between wellbeing and social interactions is not moderated by whether or not a person lives in a rural area).\n\n:::\n\n`r solend()`\n\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Compile Report\n\n`r qbegin(\"Compile Report\", qlabel = FALSE)`  \n\nKnit your report to PDF, and check over your work. To do so, you should make sure:\n\n- Only the output you want your reader to see is visible (e.g., do you want to hide your code?)\n- Check that the **tinytex** package is installed\n- Ensure that the ‘yaml’ (bit at the very top of your document) looks something like this:\n\n```{}\n---\ntitle: \"this is my report title\"\nauthor: \"B1234506\"\ndate: \"07/09/2024\"\noutput: bookdown::pdf_document2\n---\n```\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# What to do if you cannot knit to PDF\nIf you are having issues knitting directly to PDF, try the following:  \n\n- Knit to HTML file  \n- Open your HTML in a web-browser (e.g. Chrome, Firefox)  \n- Print to PDF (Ctrl+P, then choose to save to PDF)  \n- Open file to check formatting\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# Hiding Code and/or Output\n\n:::{.panel-tabset}\n## Hiding R Code\n\nTo not show the code of an R code chunk, and only show the output, write:\n\n````\n```{{r, echo=FALSE}}\n# code goes here\n```\n````\n\n## Hiding R Output\n\nTo show the code of an R code chunk, but hide the output, write:\n\n````\n```{{r, results='hide'}}\n# code goes here\n```\n````\n\n## Hiding R Code and Output\n\nTo hide both code and output of an R code chunk, write:\n\n````\n```{{r, include=FALSE}}\n# code goes here\n```\n````\n:::\n\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Tinytex\nYou must make sure you have **tinytex** installed in R so that you can “Knit” your Rmd document to a PDF file:\n\n```{r eval = FALSE}\ninstall.packages(\"tinytex\")\ntinytex::install_tinytex()\n```\n\n:::\n\n`r qend()`\n\n`r solbegin(show = params$SHOW_SOLS, toggle = params$TOGGLE)`\n\nYou should end up with a PDF file. If you have followed the above instructions and still have issues with knitting, speak with a Tutor. \n\n`r solend()`\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":true,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"include-in-header":["assets/toggling.html"],"number-sections":false,"output-file":"2_01_int1_nc.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.340","bibliography":["biblio.bib"],"toc_float":true,"code-annotations":"hover","link-citations":true,"theme":["united","assets/style-labs.scss"],"code-copy":false,"title":"Interactions I: Num x Cat","params":{"SHOW_SOLS":true,"TOGGLE":true},"editor_options":{"chunk_output_type":"console"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}