{"title":"Interactions II: Num x Num","markdown":{"yaml":{"title":"Interactions II: Num x Num","link-citations":true,"params":{"SHOW_SOLS":true,"TOGGLE":true},"editor_options":{"chunk_output_type":"console"}},"headingText":"<i class=\"fa fa-graduation-cap\"></i> Learning Objectives","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nsource('assets/setup.R')\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(patchwork)\nlibrary(pander)\nset.seed(953)\n```\n\n:::lo\nAt the end of this lab, you will:\n\n1. Understand the concept of an interaction\n2. Be able to interpret the meaning of a numeric $\\times$ numeric interaction\n3. Understand the principle of marginality and why this impacts modelling choices with interactions\n4. Be able to visualize and probe interactions\n\n### <i class=\"fa fa-check-square-o fa-2\"></i> What You Need\n\n1. Be up to date with lectures\n2. Have completed previous lab exercises from [Week 1](https://uoepsy.github.io/dapr2/2324/labs/2_01_int1_nc.html)\n\n### <i class=\"fab fa-r-project\"></i> Required R Packages\nRemember to load all packages within a code chunk at the start of your RMarkdown file using `library()`. If you do not have a package and need to install, do so within the console using `install.packages(\" \")`. For further guidance on installing/updating packages, see Section C [here](https://uoepsy.github.io/files/install-update-r#update-pkgs). \n\nFor this lab, you will need to load the following package(s):\n\n* **tidyverse** \n* **psych** \n* **sjPlot**\n* **kableExtra**\n* **sandwich**\n* **interactions**\n\n### <i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i> Presenting Results\nAll results should be presented following [APA guidelines](https://apastyle.apa.org/instructional-aids/numbers-statistics-guide.pdf). If you need a reminder on how to hide code, format tables/plots, etc., make sure to review the [rmd bootcamp](https://uoepsy.github.io//rmd-bootcamp/).\n\nThe example write-up sections included as part of the solutions are **not perfect** - they instead should give you a good example of what information you should include and how to structure this. Note that you must **not** copy any of the write-ups included below for future reports - if you do, you will be committing plagiarism, and this type of academic misconduct is taken very seriously by the University. You can find out more [here](https://www.ed.ac.uk/academic-services/students/conduct/academic-misconduct).\n\n### <i class=\"fa fa-file\"></i> Lab Data\nYou can download the data required for this lab [here](https://uoepsy.github.io/data/scs_study.csv) or read it in via this link https://uoepsy.github.io/data/scs_study.csv\n\n:::\n\n# Study Overview {#sec-studyview} \n\n> **Research Question** \n>\n> Does the effect of social comparison on symptoms of depression, anxiety and stress vary depending on level of Neuroticism?\n\n`r optbegin(\"Social Comparison Study data codebook\", olabel=FALSE,toggle=params$TOGGLE)`  \n\n__Description__\n\nPrevious research has identified an association between an individual's perception of their social rank and symptoms of depression, anxiety and stress. We are interested in the individual differences in this association. \n\nBefore we think about fitting our model, it is important that we understand the data available - how many participants? What type (or class) of data will we be working with? What was the measurement scale? How were scales scored? Look at the social comparison study data codebook below. \n  \n__Data Dictionary__\n\nThe data in `scs_study.csv` contain seven attributes collected from a random sample of $n=656$ participants, and include: \n\n```{r echo=FALSE, message=FALSE, warning=FALSE}\nscs_study <- read_csv(\"https://uoepsy.github.io/data/scs_study.csv\")\ntibble(\nvariable = names(scs_study),\ndescription = c(\"Openness (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\",\"Conscientiousness (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Extraversion (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Agreeableness (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Neuroticism (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Social Comparison Scale (SCS): An 11-item scale that measures an individual’s perception of their social rank, attractiveness and belonging relative to others. The scale is scored as a sum of the 11 items (each measured on a 5-point scale), with higher scores indicating more favourable perceptions of social rank\", \"Depression Anxiety and Stress Scale (DASS-21): The DASS-21 includes 21 items, each measured on a 4-point scale. The score is derived from the sum of all 21 items, with higher scores indicating higher a severity of symptoms\")\n) %>% gt::gt()\n```\n  \n__Preview__\n\nThe first six rows of the data are:\n\n```{r echo=FALSE, message=FALSE}\nread_csv('https://uoepsy.github.io/data/scs_study.csv') %>%  head %>% round(2) %>% gt::gt()\n```\n\n`r optend()`\n\n# Setup\n\n`r qbegin(\"Setup\", qlabel = FALSE)`  \n\n1. Create a new RMarkdown file\n2. Load the required package(s)\n3. Read the scs_study dataset into R, assigning it to an object named `scs_study` \n \n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n```{r message=FALSE}\n#Loading the required package(s)\nlibrary(tidyverse)\nlibrary(psych)\nlibrary(sjPlot)\nlibrary(kableExtra) \nlibrary(sandwich)\nlibrary(interactions)\n\n#Reading in data and storing in object named 'scs_study'\nscs_study <- read_csv(\"https://uoepsy.github.io/data/scs_study.csv\")\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Exercises \n\n## Study & Analysis Plan Overview \n\n`r qbegin(1)`\n\nProvide a brief overview of the study design and data, before detailing your analysis plan to address the research question.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\n- Give the reader some background on the context of the study\n- State what type of analysis you will conduct in order to address the research question\n- Specify the model to be fitted to address the research question (note that you will need to specify the reference level of your categorical variables)\n- Specify your chosen significance ($\\alpha$) level\n- State your hypotheses\n\nMuch of the information required can be found in the [Study Overview] codebook.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nThe `scs_study` dataset contained information on `r nrow(scs_study)` participants, including $z$-scores on 5 personality traits assessed by the Big-Five Aspects Scale (BFAS; Openness, Conscientiousness, Extraversion, Agreeableness and Neuroticism). Participants were also assessed on the Social Comparison Scale (SCS), which is an 11-item scale measuring self-perception (relative to others) of social rank, attractiveness and belonging, and the Depression Anxiety and Stress Scale (DASS-21) - a 21 item measure with higher scores indicating higher severity of symptoms. For both of these measures, only total scores were available. Items in the SCS were measured on a 5-point scale, giving minimum and maximum possible scores of 11 and 55 respectively. Items in the DASS-21 were measured on a 4-point scale, meaning that scores could range from 21 to 84. \n\nDensity plots and histograms will be used to visualise the marginal distributions of DASS-21 Scores, SCS Scores, and Neuroticism. To understand the strength of association among the variables, we will estimate the the correlation coefficients; and to visualise these associations scatterplots will be used. To address the research question of whether Neuroticism moderated the effect of social comparison on depression and anxiety, we are going to fit the following interaction model: \n\n$$\n\\begin{align}\n\\text{DASS-21 Score} ~=~ & \\beta_0 + \\beta_1 \\cdot SCS~Score + \\beta_2 \\cdot Neuroticism \\\\  \n& + \\beta_3 \\cdot (SCS~Score \\cdot Neuroticism) + \\epsilon\n\\end{align}\n$$ \nEffects will be considered statistically significant at $\\alpha=.05$\n\nOur hypotheses are:\n\n$H_0: \\beta_3 = 0$\n\nThe effect of social comparison on symptoms of depression, anxiety and stress does not vary depending on level of Neuroticism\n\n$H_1: \\beta_3 \\neq 0$\n\nThe effect of social comparison on symptoms of depression, anxiety and stress does vary depending on level of Neuroticism\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Descriptive Statistics & Visualisations\n\n`r qbegin(2)`\n\nProvide a table of descriptive statistics and visualise your data. \n \nRemember to interpret these in the context of the study.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\n1. The `describe()` function is from the `psych` package; and `kable()` and `kable_styling()` (which are used to make a nice table) from `kableExtra` would be useful to present your descriptive statistics. \n2. The `pairs.panels()` function from the `psych` package will plot all variables in a dataset against one another. This will save you the time you would have spent creating individual plots.  \n\n:::\n \n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.panel-tabset}\n\n## Numeric\n\nDescriptive statistics presented in a well formatted table:\n\n```{r}\n#| label: tbl-descript\n#| tbl-cap: Descriptive Statistics - DASS-21, SCS, and Neuroticism (Z-Scored)\n# note that we are selecting only our three variables of interest (dass, scs, zn)\n\nscs_study %>%\n    select(dass, scs, zn) %>% \n    describe() %>%\n    kable(caption = \"Descriptive Statistics - DASS-21, SCS, and Neuroticism (Z-Scored)\", digits = 2) %>%\n    kable_styling()\n```\n\n\n## Visual\n\nVisualise associations among variables of interest:\n\n```{r}\nscs_study %>% \n  select(dass, scs, zn) %>%\n  pairs.panels()\n```\n\n:::\n\nDescription of individual variables:\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n+ The marginal distribution of scores on the Depression, Anxiety and Stress Scale (DASS-21) was unimodal with a mean of `r round(mean(scs_study$dass), 2)` and a standard deviation of `r round(sd(scs_study$dass), 2)`. \n+ The marginal distribution of score on the Social Comparison Scale (SCS) was unimodal with a mean of `r round(mean(scs_study$scs), 2)` and a standard deviation of `r round(sd(scs_study$scs), 2)`.\n+ The marginal distribution of Neuroticism (Z-scored) was positively skewed.\n:::\n\nDescription of correlations:\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n+ There was a weak, negative association between scores on the Depression Anxiety and Stress Scale and scores on the Social Comparison Scale for the participants in the sample $(r = -.23)$  \n    + Severity of symptoms measured on the DASS-21 were lower, on average, for those who more favorably perceived their social rank    \n+ There was a weak, positive association between DASS-21 Scores and levels of Neuroticism $(r = .20)$  \n    + Participants who were more neurotic tended to, on average, display a higher severity of symptoms of depression, anxiety and stress    \n:::\n\n`r solend()`\n\n<br> \n\n`r qbegin(3)`\nCopy and run the two code chunks below. It takes the dataset, and uses the `cut()` function to add a new variable called \"zn_group\", which is the \"zn\" variable split into 4 groups.  \n\n```{r}\nscs_study <-\n  scs_study %>%\n  mutate(\n    zn_group = cut(zn, 4)\n  )\n```\n\nWe can see how it has split the \"zn\" variable by plotting the two against one another (note that the levels of the new variable are named according to the cut-points):  \n\n```{r}\nggplot(data = scs_study, aes(x = zn_group, y = zn)) + \n  geom_point()\n```\n\nPlot the association between scores on the SCS and scores on the DASS-21, for each group of the variable we just created.  \n\nHow does the pattern differ across groups? Does it suggest an interaction?  \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\nRather than creating four separate plots, you might want to map some feature of the plot to the variable we created in the data, or make use of `facet_wrap()` / `facet_grid()`. \n\nRemember that you can specify `geom_smooth()` to add a trend line.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r message = FALSE, warning=FALSE, fig.width = 8, fig.height = 4, out.width = '90%'}\nggplot(data = scs_study, aes(x = scs, y = dass, col = zn_group)) + \n  geom_point() + \n  geom_smooth(method='lm', se = FALSE) +\n  facet_grid(~zn_group) +\n  labs(x = \"SCS Scores \", y = \"DASS-21 Scores\") +\n  theme(legend.position = \"none\") # removes the legend\n```\n\nThe association between DASS-21 scores and SCS scores appears to be different across these groups. For those with a relatively high Neuroticism score, the association seems stronger, while for those with a low Neuroticism score there is almost no discernible association. \n\nThis does suggest an interaction - the association of DASS-21 ~ SCS differed across the values of Neuroticism.\n\n`r solend()`\n\n<br>\n\n:::frame\n\n**Visualising Interaction Terms**\n\nCutting one of the explanatory variables up into groups essentially turns a numeric variable into a categorical one. We did this just to make it easier to visualise how an association differs across the values of another variable, because we can imagine a separate line for the association between SCS and DASS-21 scores for each of the groups of Neuroticism. However, in grouping a numeric variable like this we lose information. Neuroticism is measured on a continuous scale, and we want to capture how the association between SCS and DASS-21 differs across that continuum (rather than cutting it into chunks). \n\nWe could imagine cutting it into more and more chunks (see @fig-reglinescut), until what we end up with is an infinite number of lines - i.e., a three-dimensional plane/surface (recall that in for a multiple regression model with 2 explanatory variables, we can think of the model as having three-dimensions). The inclusion of the interaction term simply results in this surface no longer being necessarily flat. You can see this in @fig-3dint). \n \n```{r echo=FALSE, message=FALSE, warning=FALSE, out.width=\"80%\"}\n#| label: fig-reglinescut\n#| fig-cap: \"Separate regression lines DASS ~ SCS for Neuroticism when cut into 4 (left) or 6 (center) or 12 (right) groups.\"\n\np1 <- ggplot(data = scs_study, aes(x = scs, y = dass, col = zn_group)) + \n  geom_point(alpha=.1) + \n  stat_smooth(method=\"lm\",se=FALSE)+theme(legend.position = \"none\")\n\nscs_study %>%\n  mutate(\n    zn_group = cut(zn, 6)\n  ) %>% ggplot(data = ., aes(x = scs, y = dass, col = zn_group)) + \n  geom_point(alpha=.1) + \n  stat_smooth(method=\"lm\",se=FALSE)+theme(legend.position = \"none\") -> p2\n\nscs_study %>%\n  mutate(\n    zn_group = cut(zn, 12)\n  ) %>% ggplot(data = ., aes(x = scs, y = dass, col = zn_group)) + \n  geom_point(alpha=.1) + \n  stat_smooth(method=\"lm\",se=FALSE)+theme(legend.position = \"none\") -> p3\n\np1 | p2 | p3\n```\n\n\n```{r include=FALSE, echo=FALSE}\nfit<-lm(dass ~ scs*zn, data = scs_study)\nsteps=50\nscs <- with(scs_study, seq(min(scs),max(scs),length=steps))\nzn <- with(scs_study, seq(min(zn),max(zn),length=steps))\nnewdat <- expand.grid(scs=scs, zn=zn)\ndass <- matrix(predict(fit, newdat), steps, steps)\np <- persp(scs,zn,dass, theta = -25,phi=5, col = NA)\n```\n\n\n```{r echo=FALSE, fig.align = 'center', out.width = '90%'}\n#| label: fig-3dint\n#| fig-cap: \"3D plot of regression surface with interaction. You can explore the plot in the figure below from different angles by moving it around with your mouse.\"\n\nplot_ly(x=scs,y=zn,z=dass, type=\"surface\") %>% layout(\n    scene = list(\n      xaxis = list(title = \"SCS\"),\n      yaxis = list(title = \"Neuroticism\"),\n      zaxis = list(title = \"DASS-21\")\n    ))\n```\n\n:::\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Model Fitting & Interpretation \n\n`r qbegin(4)`\n\nConsider that Neuroticism has already been $z$-scored, but scs has not. To ensure that we can compare the effects of our estimates (and so they are both on meaningful scales), standardize the scs variable.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nRecall the formula for the $z$-score:\n$$\nz_x = \\frac{x - \\bar{x}}{s_x}, \\qquad z_y = \\frac{y - \\bar{y}}{s_y}\n$$\nYou might find it helpful to revisit Semester 1 [Week 2 lectures](https://uoepsy.github.io/dapr2/2324/lectures/dapr2_02_LM2.html#18) and/or [Week 3 lab](https://uoepsy.github.io/dapr2/2324/labs/1_03_mlr_stz.html#standardization) for a recap on standardization. \n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n# standardize scs score\nscs_study <- \n  scs_study %>% \n    mutate(\n      zscs = (scs-mean(scs))/sd(scs)\n    )\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(5)`\n\nFit your model (including the standardized predictor variables) using `lm()`, and assign it as an object with the name \"dass_mdl\".   \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nWhen fitting a regression model in `R` with two explanatory variables A and B, and their interaction, these three are equivalent:  \n\n+ y ~ A + B + A:B\n+ y ~ A + B + A*B\n+ y ~ A*B  \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#fit interaction model\ndass_mdl <- lm(dass ~  zscs*zn, data = scs_study)\n\n#check model output\nsummary(dass_mdl)\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(6)`\n\nInterpret your coefficients in the context of the study.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nRecall that we can obtain our parameter estimates using various functions such as `summary()`,`coef()`, `coefficients()`, etc. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nObtain parameter estimates:\n\n```{r}\ncoefficients(dass_mdl)\n```\n\n::: {.panel-tabset}\n## `(Intercept)`   \n\n$\\beta_0$ = `(Intercept)` = `r round(coef(dass_mdl)[1],2)`  \n\n+ The intercept, or predicted DASS-21 score for an SCS score of 0 ($Z$-scored) and Neuroticism score of 0 ($Z$-scored).  \n    - An individual with a Neuroticism score of 0 and an SCS score of 0 was expected to have a DASS-21 score of `r round(coef(dass_mdl)[1],2)`.  \n\n## `zscs`  \n\n$\\beta_1$ = `zscs` = `r round(coef(dass_mdl)[2],2)`  \n\n+ The simple slope of SCS scores on DASS-21 scores when Neuroticism scores were 0 ($Z$-scored).  \n    - For an individual with a Neuroticism score of 0, every 1 standard deviation increase in SCS score was associated with a `r round(abs(coef(dass_mdl)[2]),2)` decrease in DASS-21 scores.  \n\n## `zn`  \n$\\beta_2$ = `zn` = `r round(coef(dass_mdl)[3],2)`  \n\n+ The simple slope of Neuroticism on DASS-21 scores when SCS scores were 0 ($Z$-scored).  \n    - For an individual with a SCS scores of 0, every 1 standard deviation increase in Neuroticism score was associated with a `r round(abs(coef(dass_mdl)[3]),2)` point increase in DASS-21 scores.\n\n## `zscs:zn`\n$\\beta_3$ = `zscs:zn` = `r round(coef(dass_mdl)[4],2)`  \n\n+ The interaction between SCS score and Neuroticism on DASS-21 Scores - the change in the slope of Neuroticism as a function of SCS Scores.   \n    - For every 1 standard deviation increase in SCS scores, when Neuroticism scores increased by 1 standard deviation, the slope with DASS-21 scores was adjusted by `r round(coef(dass_mdl)[4],2)`.    \n    \n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Visualise Interaction Model\n\n`r qbegin(7)`\n\nUsing the `probe_interaction()` function from the interactions package, visualise the interaction effects from your model.\n\nTry to summarise the interaction effects in a short and concise sentence. \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nIn terms of of specification, it might be useful to look up the helper function via `?probe_interaction`. As a quick guide:\n\n+ `model` = name model to be used\n+ `pred` = The predictor variable\n+ `modx` = The moderator variable\n+ `interval` = If we say TRUE, then confidence/prediction intervals will be plotted around the line\n+ Because we are looking at a numeric x numeric interaction, we want to specify `jnplot = T` (see [this weeks lecture](https://uoepsy.github.io/dapr2/2324/lectures/dapr2_12_interactions2.html#1), slides 17-21 for a worked example).\n\nRemember to give your plot informative titles/labels. You, for example, likely want to give your plot:\n\n- a clear and concise title (specify `main.title = `)\n- axis labels with units or scale included (specify `x.label = ` and `y.label = `)\n- a legend title (specify `legend.main = `)\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r warning=FALSE, message=FALSE}\nplt_dass_mdl <- probe_interaction(model = dass_mdl, \n                  pred = zscs, \n                  modx = zn, \n                  cond.int = T,\n                  interval = T, \n                  jnplot = T,\n                  main.title = \"Neuroticism moderating the effect of\\nsocial comparison on depression and anxiety\",\n                  x.label = \"Social Comparison Scale (Z-scored)\",\n                  y.label = \"DASS-21 Scores\",\n                  legend.main = \"Neuroticism (Z-scored)\")\n```\n\nLet's look at the plot - to do so you need to call `interactplot` from your object `plt_dass_mdl`:\n\n```{r}\n#| label: fig-int-dass\n#| fig-cap: \"Simple Slopes for +/- 1 SD and Mean Neuroticism Scores\"\n\nplt_dass_mdl$interactplot\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\n\nRecall that higher DASS-21 scores indicate higher severity of symptoms. Based on this, we can state:\n\n+ For individuals 1 SD below the sample mean on Neuroticism, as their SCS Score increases, it appears that their DASS-21 scores remain flat / there is a *very* slight increase (i.e., their wellbeing do not change much)\n+ For individuals with average levels of Neuroticism, as their SCS Score increases, it appears that their DASS-21 scores decreases (i.e., their wellbeing increases)\n+ For individuals 1 SD above the sample mean on Neuroticism, as their SCS Score increases, it appears that their DASS-21 scores more steeply decreases (i.e., their wellbeing increases)\n\n:::\n\n`r solend()`\n\n<br>\n\n`r qbegin(8)`\n\nConduct a simple slopes and regions of significance analysis.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nFor full output, including the Johnson-Neyman interval, which tells you exactly where the predictor’s slope becomes significant/insignificant, you can use `$simslopes`. \n\nIf you wanted to see **only** the simple slopes or **only** the Johnson-Neyman plot, you could call `$simslopes$slopes` or `simslopes$jnplot` respectively from your object `plt_dass_mdl`. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#| label: fig-sim-slopes\n#| fig-cap: \"Johnson-Neyman Plot\"\nplt_dass_mdl$simslopes\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThe Johnson-Neyman technique (see @fig-sim-slopes) indicated that the association between DASS-21 scores and SCS was significant when Neuroticism scores were less than 1.28 standard deviations below the mean or greater than -0.55 standard deviations above the mean.\n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Writing Up & Presenting Results\n\n`r qbegin(9)`\n\nProvide key model results in a formatted table.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nUse `tab_model()` from the __sjPlot__ package. \n\nRemember that you can rename your DV and IV labels by specifying `dv.labels` and `pred.labels`.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#| label: tbl-dass-modresults\n#| tbl-cap: Regression table for DASS-21 model\n#create table for results\ntab_model(dass_mdl,\n          dv.labels = \"DASS-21 Scores\",\n          pred.labels = c(\"zscs\" = \"Social Comparison Scale (Z-scored)\",\n                          \"zn\" = \"Neuroticism (Z-scored)\",\n                          \"zscs:zn\" = \"Social Comparison Scale (Z-scored): Neutoricism (Z-scored)\"),\n          title = \"Regression Table for DASS-21 Model\")\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(10)`\n\nInterpret your results in the context of the research question and report your model in full.\n\nMake reference to the interaction plot and regression table.\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nFull regression results including 95% confidence intervals are shown in @tbl-dass-modresults. The $F$-test for model utility was significant $(F(3,652) = 48.50, p<.001)$, and the model explained approximately 17.87% of the variability in DASS-21 scores.\n\nThere was a significant conditional association between DASS-21 Scores and SCS scores ($Z$-scored) $(\\beta = -1.57, SE = 0.24, p < .001)$, suggesting that for those with Neuroticism scores of 0, DASS-21 scores decreased by 1.57 for every 1 standard deviation increase in SCS scores. \n\nA significant conditional association was also evident between DASS-21 Scores and Neuroticism ($Z$-scored) $(\\beta = 1.58, SE = 0.24, p <.001)$, suggesting that for those with SCS scores of 0, DASS-21 scores increased by 1.58 for every 1 standard deviation increase in Neuroticism. \n\nThe association between symptoms of depression and anxiety (DASS-21 scores) and social comparison was found to be dependent upon the level of Neuroticism, with a greater negative association between the two for those with higher levels of Neuroticism $(\\beta = -1.83, SE = 0.23, p <.001)$. For every standard deviation increase in SCS Scores, the change in DASS-21 scores associated with an increase of 1 SD in Neuroticism was adjusted by -1.83. Thus, Neuroticism buffered the association between DASS-21 scores and SCS - this is visually displayed in @fig-int-dass. We further used the Johnson-Neyman technique to probe the interaction, and to identify regions of significance. We identified that Neuroticism values (z-scored) outside the range of -1.28 to -0.55 were significant (see @fig-sim-slopes).\n\nTherefore, we have evidence to reject the null hypothesis (that the effect of social comparison on symptoms of depression, anxiety and stress does not vary depending on level of Neuroticism).\n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Compile Report\n\n`r qbegin(\"Compile Report\", qlabel = FALSE)`  \n\nKnit your report to PDF, and check over your work. To do so, you should make sure:\n\n- Only the output you want your reader to see is visible (e.g., do you want to hide your code?)\n- Check that the **tinytex** package is installed\n- Ensure that the ‘yaml’ (bit at the very top of your document) looks something like this:\n\n```{}\n---\ntitle: \"this is my report title\"\nauthor: \"B1234506\"\ndate: \"07/09/2024\"\noutput: bookdown::pdf_document2\n---\n```\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# What to do if you cannot knit to PDF\nIf you are having issues knitting directly to PDF, try the following:  \n\n- Knit to HTML file  \n- Open your HTML in a web-browser (e.g. Chrome, Firefox)  \n- Print to PDF (Ctrl+P, then choose to save to PDF)  \n- Open file to check formatting\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# Hiding Code and/or Output\n\n:::{.panel-tabset}\n## Hiding R Code\n\nTo not show the code of an R code chunk, and only show the output, write:\n\n````\n```{{r, echo=FALSE}}\n# code goes here\n```\n````\n\n## Hiding R Output\n\nTo show the code of an R code chunk, but hide the output, write:\n\n````\n```{{r, results='hide'}}\n# code goes here\n```\n````\n\n## Hiding R Code and Output\n\nTo hide both code and output of an R code chunk, write:\n\n````\n```{{r, include=FALSE}}\n# code goes here\n```\n````\n:::\n\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Tinytex\nYou must make sure you have **tinytex** installed in R so that you can “Knit” your Rmd document to a PDF file:\n\n```{r eval = FALSE}\ninstall.packages(\"tinytex\")\ntinytex::install_tinytex()\n```\n\n:::\n\n`r qend()`\n\n`r solbegin(show = params$SHOW_SOLS, toggle = params$TOGGLE)`\n\nYou should end up with a PDF file. If you have followed the above instructions and still have issues with knitting, speak with a Tutor. \n\n`r solend()`\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nsource('assets/setup.R')\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(patchwork)\nlibrary(pander)\nset.seed(953)\n```\n\n:::lo\n### <i class=\"fa fa-graduation-cap\"></i> Learning Objectives\nAt the end of this lab, you will:\n\n1. Understand the concept of an interaction\n2. Be able to interpret the meaning of a numeric $\\times$ numeric interaction\n3. Understand the principle of marginality and why this impacts modelling choices with interactions\n4. Be able to visualize and probe interactions\n\n### <i class=\"fa fa-check-square-o fa-2\"></i> What You Need\n\n1. Be up to date with lectures\n2. Have completed previous lab exercises from [Week 1](https://uoepsy.github.io/dapr2/2324/labs/2_01_int1_nc.html)\n\n### <i class=\"fab fa-r-project\"></i> Required R Packages\nRemember to load all packages within a code chunk at the start of your RMarkdown file using `library()`. If you do not have a package and need to install, do so within the console using `install.packages(\" \")`. For further guidance on installing/updating packages, see Section C [here](https://uoepsy.github.io/files/install-update-r#update-pkgs). \n\nFor this lab, you will need to load the following package(s):\n\n* **tidyverse** \n* **psych** \n* **sjPlot**\n* **kableExtra**\n* **sandwich**\n* **interactions**\n\n### <i class=\"fa fa-pencil-square-o\" aria-hidden=\"true\"></i> Presenting Results\nAll results should be presented following [APA guidelines](https://apastyle.apa.org/instructional-aids/numbers-statistics-guide.pdf). If you need a reminder on how to hide code, format tables/plots, etc., make sure to review the [rmd bootcamp](https://uoepsy.github.io//rmd-bootcamp/).\n\nThe example write-up sections included as part of the solutions are **not perfect** - they instead should give you a good example of what information you should include and how to structure this. Note that you must **not** copy any of the write-ups included below for future reports - if you do, you will be committing plagiarism, and this type of academic misconduct is taken very seriously by the University. You can find out more [here](https://www.ed.ac.uk/academic-services/students/conduct/academic-misconduct).\n\n### <i class=\"fa fa-file\"></i> Lab Data\nYou can download the data required for this lab [here](https://uoepsy.github.io/data/scs_study.csv) or read it in via this link https://uoepsy.github.io/data/scs_study.csv\n\n:::\n\n# Study Overview {#sec-studyview} \n\n> **Research Question** \n>\n> Does the effect of social comparison on symptoms of depression, anxiety and stress vary depending on level of Neuroticism?\n\n`r optbegin(\"Social Comparison Study data codebook\", olabel=FALSE,toggle=params$TOGGLE)`  \n\n__Description__\n\nPrevious research has identified an association between an individual's perception of their social rank and symptoms of depression, anxiety and stress. We are interested in the individual differences in this association. \n\nBefore we think about fitting our model, it is important that we understand the data available - how many participants? What type (or class) of data will we be working with? What was the measurement scale? How were scales scored? Look at the social comparison study data codebook below. \n  \n__Data Dictionary__\n\nThe data in `scs_study.csv` contain seven attributes collected from a random sample of $n=656$ participants, and include: \n\n```{r echo=FALSE, message=FALSE, warning=FALSE}\nscs_study <- read_csv(\"https://uoepsy.github.io/data/scs_study.csv\")\ntibble(\nvariable = names(scs_study),\ndescription = c(\"Openness (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\",\"Conscientiousness (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Extraversion (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Agreeableness (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Neuroticism (Z-scored), measured on the Big-5 Aspects Scale (BFAS)\", \"Social Comparison Scale (SCS): An 11-item scale that measures an individual’s perception of their social rank, attractiveness and belonging relative to others. The scale is scored as a sum of the 11 items (each measured on a 5-point scale), with higher scores indicating more favourable perceptions of social rank\", \"Depression Anxiety and Stress Scale (DASS-21): The DASS-21 includes 21 items, each measured on a 4-point scale. The score is derived from the sum of all 21 items, with higher scores indicating higher a severity of symptoms\")\n) %>% gt::gt()\n```\n  \n__Preview__\n\nThe first six rows of the data are:\n\n```{r echo=FALSE, message=FALSE}\nread_csv('https://uoepsy.github.io/data/scs_study.csv') %>%  head %>% round(2) %>% gt::gt()\n```\n\n`r optend()`\n\n# Setup\n\n`r qbegin(\"Setup\", qlabel = FALSE)`  \n\n1. Create a new RMarkdown file\n2. Load the required package(s)\n3. Read the scs_study dataset into R, assigning it to an object named `scs_study` \n \n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n```{r message=FALSE}\n#Loading the required package(s)\nlibrary(tidyverse)\nlibrary(psych)\nlibrary(sjPlot)\nlibrary(kableExtra) \nlibrary(sandwich)\nlibrary(interactions)\n\n#Reading in data and storing in object named 'scs_study'\nscs_study <- read_csv(\"https://uoepsy.github.io/data/scs_study.csv\")\n```\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Exercises \n\n## Study & Analysis Plan Overview \n\n`r qbegin(1)`\n\nProvide a brief overview of the study design and data, before detailing your analysis plan to address the research question.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\n- Give the reader some background on the context of the study\n- State what type of analysis you will conduct in order to address the research question\n- Specify the model to be fitted to address the research question (note that you will need to specify the reference level of your categorical variables)\n- Specify your chosen significance ($\\alpha$) level\n- State your hypotheses\n\nMuch of the information required can be found in the [Study Overview] codebook.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nThe `scs_study` dataset contained information on `r nrow(scs_study)` participants, including $z$-scores on 5 personality traits assessed by the Big-Five Aspects Scale (BFAS; Openness, Conscientiousness, Extraversion, Agreeableness and Neuroticism). Participants were also assessed on the Social Comparison Scale (SCS), which is an 11-item scale measuring self-perception (relative to others) of social rank, attractiveness and belonging, and the Depression Anxiety and Stress Scale (DASS-21) - a 21 item measure with higher scores indicating higher severity of symptoms. For both of these measures, only total scores were available. Items in the SCS were measured on a 5-point scale, giving minimum and maximum possible scores of 11 and 55 respectively. Items in the DASS-21 were measured on a 4-point scale, meaning that scores could range from 21 to 84. \n\nDensity plots and histograms will be used to visualise the marginal distributions of DASS-21 Scores, SCS Scores, and Neuroticism. To understand the strength of association among the variables, we will estimate the the correlation coefficients; and to visualise these associations scatterplots will be used. To address the research question of whether Neuroticism moderated the effect of social comparison on depression and anxiety, we are going to fit the following interaction model: \n\n$$\n\\begin{align}\n\\text{DASS-21 Score} ~=~ & \\beta_0 + \\beta_1 \\cdot SCS~Score + \\beta_2 \\cdot Neuroticism \\\\  \n& + \\beta_3 \\cdot (SCS~Score \\cdot Neuroticism) + \\epsilon\n\\end{align}\n$$ \nEffects will be considered statistically significant at $\\alpha=.05$\n\nOur hypotheses are:\n\n$H_0: \\beta_3 = 0$\n\nThe effect of social comparison on symptoms of depression, anxiety and stress does not vary depending on level of Neuroticism\n\n$H_1: \\beta_3 \\neq 0$\n\nThe effect of social comparison on symptoms of depression, anxiety and stress does vary depending on level of Neuroticism\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Descriptive Statistics & Visualisations\n\n`r qbegin(2)`\n\nProvide a table of descriptive statistics and visualise your data. \n \nRemember to interpret these in the context of the study.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\n1. The `describe()` function is from the `psych` package; and `kable()` and `kable_styling()` (which are used to make a nice table) from `kableExtra` would be useful to present your descriptive statistics. \n2. The `pairs.panels()` function from the `psych` package will plot all variables in a dataset against one another. This will save you the time you would have spent creating individual plots.  \n\n:::\n \n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.panel-tabset}\n\n## Numeric\n\nDescriptive statistics presented in a well formatted table:\n\n```{r}\n#| label: tbl-descript\n#| tbl-cap: Descriptive Statistics - DASS-21, SCS, and Neuroticism (Z-Scored)\n# note that we are selecting only our three variables of interest (dass, scs, zn)\n\nscs_study %>%\n    select(dass, scs, zn) %>% \n    describe() %>%\n    kable(caption = \"Descriptive Statistics - DASS-21, SCS, and Neuroticism (Z-Scored)\", digits = 2) %>%\n    kable_styling()\n```\n\n\n## Visual\n\nVisualise associations among variables of interest:\n\n```{r}\nscs_study %>% \n  select(dass, scs, zn) %>%\n  pairs.panels()\n```\n\n:::\n\nDescription of individual variables:\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n+ The marginal distribution of scores on the Depression, Anxiety and Stress Scale (DASS-21) was unimodal with a mean of `r round(mean(scs_study$dass), 2)` and a standard deviation of `r round(sd(scs_study$dass), 2)`. \n+ The marginal distribution of score on the Social Comparison Scale (SCS) was unimodal with a mean of `r round(mean(scs_study$scs), 2)` and a standard deviation of `r round(sd(scs_study$scs), 2)`.\n+ The marginal distribution of Neuroticism (Z-scored) was positively skewed.\n:::\n\nDescription of correlations:\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n+ There was a weak, negative association between scores on the Depression Anxiety and Stress Scale and scores on the Social Comparison Scale for the participants in the sample $(r = -.23)$  \n    + Severity of symptoms measured on the DASS-21 were lower, on average, for those who more favorably perceived their social rank    \n+ There was a weak, positive association between DASS-21 Scores and levels of Neuroticism $(r = .20)$  \n    + Participants who were more neurotic tended to, on average, display a higher severity of symptoms of depression, anxiety and stress    \n:::\n\n`r solend()`\n\n<br> \n\n`r qbegin(3)`\nCopy and run the two code chunks below. It takes the dataset, and uses the `cut()` function to add a new variable called \"zn_group\", which is the \"zn\" variable split into 4 groups.  \n\n```{r}\nscs_study <-\n  scs_study %>%\n  mutate(\n    zn_group = cut(zn, 4)\n  )\n```\n\nWe can see how it has split the \"zn\" variable by plotting the two against one another (note that the levels of the new variable are named according to the cut-points):  \n\n```{r}\nggplot(data = scs_study, aes(x = zn_group, y = zn)) + \n  geom_point()\n```\n\nPlot the association between scores on the SCS and scores on the DASS-21, for each group of the variable we just created.  \n\nHow does the pattern differ across groups? Does it suggest an interaction?  \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\nRather than creating four separate plots, you might want to map some feature of the plot to the variable we created in the data, or make use of `facet_wrap()` / `facet_grid()`. \n\nRemember that you can specify `geom_smooth()` to add a trend line.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r message = FALSE, warning=FALSE, fig.width = 8, fig.height = 4, out.width = '90%'}\nggplot(data = scs_study, aes(x = scs, y = dass, col = zn_group)) + \n  geom_point() + \n  geom_smooth(method='lm', se = FALSE) +\n  facet_grid(~zn_group) +\n  labs(x = \"SCS Scores \", y = \"DASS-21 Scores\") +\n  theme(legend.position = \"none\") # removes the legend\n```\n\nThe association between DASS-21 scores and SCS scores appears to be different across these groups. For those with a relatively high Neuroticism score, the association seems stronger, while for those with a low Neuroticism score there is almost no discernible association. \n\nThis does suggest an interaction - the association of DASS-21 ~ SCS differed across the values of Neuroticism.\n\n`r solend()`\n\n<br>\n\n:::frame\n\n**Visualising Interaction Terms**\n\nCutting one of the explanatory variables up into groups essentially turns a numeric variable into a categorical one. We did this just to make it easier to visualise how an association differs across the values of another variable, because we can imagine a separate line for the association between SCS and DASS-21 scores for each of the groups of Neuroticism. However, in grouping a numeric variable like this we lose information. Neuroticism is measured on a continuous scale, and we want to capture how the association between SCS and DASS-21 differs across that continuum (rather than cutting it into chunks). \n\nWe could imagine cutting it into more and more chunks (see @fig-reglinescut), until what we end up with is an infinite number of lines - i.e., a three-dimensional plane/surface (recall that in for a multiple regression model with 2 explanatory variables, we can think of the model as having three-dimensions). The inclusion of the interaction term simply results in this surface no longer being necessarily flat. You can see this in @fig-3dint). \n \n```{r echo=FALSE, message=FALSE, warning=FALSE, out.width=\"80%\"}\n#| label: fig-reglinescut\n#| fig-cap: \"Separate regression lines DASS ~ SCS for Neuroticism when cut into 4 (left) or 6 (center) or 12 (right) groups.\"\n\np1 <- ggplot(data = scs_study, aes(x = scs, y = dass, col = zn_group)) + \n  geom_point(alpha=.1) + \n  stat_smooth(method=\"lm\",se=FALSE)+theme(legend.position = \"none\")\n\nscs_study %>%\n  mutate(\n    zn_group = cut(zn, 6)\n  ) %>% ggplot(data = ., aes(x = scs, y = dass, col = zn_group)) + \n  geom_point(alpha=.1) + \n  stat_smooth(method=\"lm\",se=FALSE)+theme(legend.position = \"none\") -> p2\n\nscs_study %>%\n  mutate(\n    zn_group = cut(zn, 12)\n  ) %>% ggplot(data = ., aes(x = scs, y = dass, col = zn_group)) + \n  geom_point(alpha=.1) + \n  stat_smooth(method=\"lm\",se=FALSE)+theme(legend.position = \"none\") -> p3\n\np1 | p2 | p3\n```\n\n\n```{r include=FALSE, echo=FALSE}\nfit<-lm(dass ~ scs*zn, data = scs_study)\nsteps=50\nscs <- with(scs_study, seq(min(scs),max(scs),length=steps))\nzn <- with(scs_study, seq(min(zn),max(zn),length=steps))\nnewdat <- expand.grid(scs=scs, zn=zn)\ndass <- matrix(predict(fit, newdat), steps, steps)\np <- persp(scs,zn,dass, theta = -25,phi=5, col = NA)\n```\n\n\n```{r echo=FALSE, fig.align = 'center', out.width = '90%'}\n#| label: fig-3dint\n#| fig-cap: \"3D plot of regression surface with interaction. You can explore the plot in the figure below from different angles by moving it around with your mouse.\"\n\nplot_ly(x=scs,y=zn,z=dass, type=\"surface\") %>% layout(\n    scene = list(\n      xaxis = list(title = \"SCS\"),\n      yaxis = list(title = \"Neuroticism\"),\n      zaxis = list(title = \"DASS-21\")\n    ))\n```\n\n:::\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Model Fitting & Interpretation \n\n`r qbegin(4)`\n\nConsider that Neuroticism has already been $z$-scored, but scs has not. To ensure that we can compare the effects of our estimates (and so they are both on meaningful scales), standardize the scs variable.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nRecall the formula for the $z$-score:\n$$\nz_x = \\frac{x - \\bar{x}}{s_x}, \\qquad z_y = \\frac{y - \\bar{y}}{s_y}\n$$\nYou might find it helpful to revisit Semester 1 [Week 2 lectures](https://uoepsy.github.io/dapr2/2324/lectures/dapr2_02_LM2.html#18) and/or [Week 3 lab](https://uoepsy.github.io/dapr2/2324/labs/1_03_mlr_stz.html#standardization) for a recap on standardization. \n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n# standardize scs score\nscs_study <- \n  scs_study %>% \n    mutate(\n      zscs = (scs-mean(scs))/sd(scs)\n    )\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(5)`\n\nFit your model (including the standardized predictor variables) using `lm()`, and assign it as an object with the name \"dass_mdl\".   \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nWhen fitting a regression model in `R` with two explanatory variables A and B, and their interaction, these three are equivalent:  \n\n+ y ~ A + B + A:B\n+ y ~ A + B + A*B\n+ y ~ A*B  \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#fit interaction model\ndass_mdl <- lm(dass ~  zscs*zn, data = scs_study)\n\n#check model output\nsummary(dass_mdl)\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(6)`\n\nInterpret your coefficients in the context of the study.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nRecall that we can obtain our parameter estimates using various functions such as `summary()`,`coef()`, `coefficients()`, etc. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\nObtain parameter estimates:\n\n```{r}\ncoefficients(dass_mdl)\n```\n\n::: {.panel-tabset}\n## `(Intercept)`   \n\n$\\beta_0$ = `(Intercept)` = `r round(coef(dass_mdl)[1],2)`  \n\n+ The intercept, or predicted DASS-21 score for an SCS score of 0 ($Z$-scored) and Neuroticism score of 0 ($Z$-scored).  \n    - An individual with a Neuroticism score of 0 and an SCS score of 0 was expected to have a DASS-21 score of `r round(coef(dass_mdl)[1],2)`.  \n\n## `zscs`  \n\n$\\beta_1$ = `zscs` = `r round(coef(dass_mdl)[2],2)`  \n\n+ The simple slope of SCS scores on DASS-21 scores when Neuroticism scores were 0 ($Z$-scored).  \n    - For an individual with a Neuroticism score of 0, every 1 standard deviation increase in SCS score was associated with a `r round(abs(coef(dass_mdl)[2]),2)` decrease in DASS-21 scores.  \n\n## `zn`  \n$\\beta_2$ = `zn` = `r round(coef(dass_mdl)[3],2)`  \n\n+ The simple slope of Neuroticism on DASS-21 scores when SCS scores were 0 ($Z$-scored).  \n    - For an individual with a SCS scores of 0, every 1 standard deviation increase in Neuroticism score was associated with a `r round(abs(coef(dass_mdl)[3]),2)` point increase in DASS-21 scores.\n\n## `zscs:zn`\n$\\beta_3$ = `zscs:zn` = `r round(coef(dass_mdl)[4],2)`  \n\n+ The interaction between SCS score and Neuroticism on DASS-21 Scores - the change in the slope of Neuroticism as a function of SCS Scores.   \n    - For every 1 standard deviation increase in SCS scores, when Neuroticism scores increased by 1 standard deviation, the slope with DASS-21 scores was adjusted by `r round(coef(dass_mdl)[4],2)`.    \n    \n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Visualise Interaction Model\n\n`r qbegin(7)`\n\nUsing the `probe_interaction()` function from the interactions package, visualise the interaction effects from your model.\n\nTry to summarise the interaction effects in a short and concise sentence. \n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint\n\nIn terms of of specification, it might be useful to look up the helper function via `?probe_interaction`. As a quick guide:\n\n+ `model` = name model to be used\n+ `pred` = The predictor variable\n+ `modx` = The moderator variable\n+ `interval` = If we say TRUE, then confidence/prediction intervals will be plotted around the line\n+ Because we are looking at a numeric x numeric interaction, we want to specify `jnplot = T` (see [this weeks lecture](https://uoepsy.github.io/dapr2/2324/lectures/dapr2_12_interactions2.html#1), slides 17-21 for a worked example).\n\nRemember to give your plot informative titles/labels. You, for example, likely want to give your plot:\n\n- a clear and concise title (specify `main.title = `)\n- axis labels with units or scale included (specify `x.label = ` and `y.label = `)\n- a legend title (specify `legend.main = `)\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r warning=FALSE, message=FALSE}\nplt_dass_mdl <- probe_interaction(model = dass_mdl, \n                  pred = zscs, \n                  modx = zn, \n                  cond.int = T,\n                  interval = T, \n                  jnplot = T,\n                  main.title = \"Neuroticism moderating the effect of\\nsocial comparison on depression and anxiety\",\n                  x.label = \"Social Comparison Scale (Z-scored)\",\n                  y.label = \"DASS-21 Scores\",\n                  legend.main = \"Neuroticism (Z-scored)\")\n```\n\nLet's look at the plot - to do so you need to call `interactplot` from your object `plt_dass_mdl`:\n\n```{r}\n#| label: fig-int-dass\n#| fig-cap: \"Simple Slopes for +/- 1 SD and Mean Neuroticism Scores\"\n\nplt_dass_mdl$interactplot\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\n\nRecall that higher DASS-21 scores indicate higher severity of symptoms. Based on this, we can state:\n\n+ For individuals 1 SD below the sample mean on Neuroticism, as their SCS Score increases, it appears that their DASS-21 scores remain flat / there is a *very* slight increase (i.e., their wellbeing do not change much)\n+ For individuals with average levels of Neuroticism, as their SCS Score increases, it appears that their DASS-21 scores decreases (i.e., their wellbeing increases)\n+ For individuals 1 SD above the sample mean on Neuroticism, as their SCS Score increases, it appears that their DASS-21 scores more steeply decreases (i.e., their wellbeing increases)\n\n:::\n\n`r solend()`\n\n<br>\n\n`r qbegin(8)`\n\nConduct a simple slopes and regions of significance analysis.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nFor full output, including the Johnson-Neyman interval, which tells you exactly where the predictor’s slope becomes significant/insignificant, you can use `$simslopes`. \n\nIf you wanted to see **only** the simple slopes or **only** the Johnson-Neyman plot, you could call `$simslopes$slopes` or `simslopes$jnplot` respectively from your object `plt_dass_mdl`. \n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#| label: fig-sim-slopes\n#| fig-cap: \"Johnson-Neyman Plot\"\nplt_dass_mdl$simslopes\n```\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nThe Johnson-Neyman technique (see @fig-sim-slopes) indicated that the association between DASS-21 scores and SCS was significant when Neuroticism scores were less than 1.28 standard deviations below the mean or greater than -0.55 standard deviations above the mean.\n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n## Writing Up & Presenting Results\n\n`r qbegin(9)`\n\nProvide key model results in a formatted table.\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Hint \n\nUse `tab_model()` from the __sjPlot__ package. \n\nRemember that you can rename your DV and IV labels by specifying `dv.labels` and `pred.labels`.\n\n:::\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\n#| label: tbl-dass-modresults\n#| tbl-cap: Regression table for DASS-21 model\n#create table for results\ntab_model(dass_mdl,\n          dv.labels = \"DASS-21 Scores\",\n          pred.labels = c(\"zscs\" = \"Social Comparison Scale (Z-scored)\",\n                          \"zn\" = \"Neuroticism (Z-scored)\",\n                          \"zscs:zn\" = \"Social Comparison Scale (Z-scored): Neutoricism (Z-scored)\"),\n          title = \"Regression Table for DASS-21 Model\")\n```\n\n`r solend()`\n\n<br>\n\n`r qbegin(10)`\n\nInterpret your results in the context of the research question and report your model in full.\n\nMake reference to the interaction plot and regression table.\n\n`r qend()`\n\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n::: {.callout-important icon=false appearance=\"minimal\"}\n\nFull regression results including 95% confidence intervals are shown in @tbl-dass-modresults. The $F$-test for model utility was significant $(F(3,652) = 48.50, p<.001)$, and the model explained approximately 17.87% of the variability in DASS-21 scores.\n\nThere was a significant conditional association between DASS-21 Scores and SCS scores ($Z$-scored) $(\\beta = -1.57, SE = 0.24, p < .001)$, suggesting that for those with Neuroticism scores of 0, DASS-21 scores decreased by 1.57 for every 1 standard deviation increase in SCS scores. \n\nA significant conditional association was also evident between DASS-21 Scores and Neuroticism ($Z$-scored) $(\\beta = 1.58, SE = 0.24, p <.001)$, suggesting that for those with SCS scores of 0, DASS-21 scores increased by 1.58 for every 1 standard deviation increase in Neuroticism. \n\nThe association between symptoms of depression and anxiety (DASS-21 scores) and social comparison was found to be dependent upon the level of Neuroticism, with a greater negative association between the two for those with higher levels of Neuroticism $(\\beta = -1.83, SE = 0.23, p <.001)$. For every standard deviation increase in SCS Scores, the change in DASS-21 scores associated with an increase of 1 SD in Neuroticism was adjusted by -1.83. Thus, Neuroticism buffered the association between DASS-21 scores and SCS - this is visually displayed in @fig-int-dass. We further used the Johnson-Neyman technique to probe the interaction, and to identify regions of significance. We identified that Neuroticism values (z-scored) outside the range of -1.28 to -0.55 were significant (see @fig-sim-slopes).\n\nTherefore, we have evidence to reject the null hypothesis (that the effect of social comparison on symptoms of depression, anxiety and stress does not vary depending on level of Neuroticism).\n\n:::\n\n`r solend()`\n\n<div class=\"divider div-transparent div-dot\"></div>\n\n# Compile Report\n\n`r qbegin(\"Compile Report\", qlabel = FALSE)`  \n\nKnit your report to PDF, and check over your work. To do so, you should make sure:\n\n- Only the output you want your reader to see is visible (e.g., do you want to hide your code?)\n- Check that the **tinytex** package is installed\n- Ensure that the ‘yaml’ (bit at the very top of your document) looks something like this:\n\n```{}\n---\ntitle: \"this is my report title\"\nauthor: \"B1234506\"\ndate: \"07/09/2024\"\noutput: bookdown::pdf_document2\n---\n```\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# What to do if you cannot knit to PDF\nIf you are having issues knitting directly to PDF, try the following:  \n\n- Knit to HTML file  \n- Open your HTML in a web-browser (e.g. Chrome, Firefox)  \n- Print to PDF (Ctrl+P, then choose to save to PDF)  \n- Open file to check formatting\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n# Hiding Code and/or Output\n\n:::{.panel-tabset}\n## Hiding R Code\n\nTo not show the code of an R code chunk, and only show the output, write:\n\n````\n```{{r, echo=FALSE}}\n# code goes here\n```\n````\n\n## Hiding R Output\n\nTo show the code of an R code chunk, but hide the output, write:\n\n````\n```{{r, results='hide'}}\n# code goes here\n```\n````\n\n## Hiding R Code and Output\n\nTo hide both code and output of an R code chunk, write:\n\n````\n```{{r, include=FALSE}}\n# code goes here\n```\n````\n:::\n\n:::\n\n:::{.callout-tip appearance=\"simple\" collapse=\"true\"}\n\n### Tinytex\nYou must make sure you have **tinytex** installed in R so that you can “Knit” your Rmd document to a PDF file:\n\n```{r eval = FALSE}\ninstall.packages(\"tinytex\")\ntinytex::install_tinytex()\n```\n\n:::\n\n`r qend()`\n\n`r solbegin(show = params$SHOW_SOLS, toggle = params$TOGGLE)`\n\nYou should end up with a PDF file. If you have followed the above instructions and still have issues with knitting, speak with a Tutor. \n\n`r solend()`\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":true,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"include-in-header":["assets/toggling.html"],"number-sections":false,"output-file":"2_02_int2_nn.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.340","bibliography":["biblio.bib"],"toc_float":true,"code-annotations":"hover","link-citations":true,"theme":["united","assets/style-labs.scss"],"code-copy":false,"title":"Interactions II: Num x Num","params":{"SHOW_SOLS":true,"TOGGLE":true},"editor_options":{"chunk_output_type":"console"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}